<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hall">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hall">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Hall">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Hall</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hall</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">其实是一个备忘录</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/05/12/python-ctypes-pointer-cache-leak/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/12/python-ctypes-pointer-cache-leak/" class="post-title-link" itemprop="url">python ctypes库pointer_type_cache内存泄漏场景和规避方案</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-05-12 00:22:10 / 修改时间：01:59:38" itemprop="dateCreated datePublished" datetime="2022-05-12T00:22:10+08:00">2022-05-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="先说说前提和应用场景"><a href="#先说说前提和应用场景" class="headerlink" title="先说说前提和应用场景"></a>先说说前提和应用场景</h1><p>在公司中的一些跨部门合作中产生了这样一个使用场景</p>
<ol>
<li>云端对接很多服务使用的是Go完成的代码，并且在代码中使用协程相关的特性</li>
<li>有一些加密代码是使用C写的，并且使用到了一些C写的系统调用和古董代码和加密代码，使用了一些posix系统调用(比如systemv标准的shm共享内存方案)</li>
<li>需要将部署在客户内网中的设备中的数据库中的数据同步一部分到云端，但是这部分数据库相关的接口只暴露了python相关的业务接口，所以主体的业务代码逻辑需要使用Python编码完成</li>
</ol>
<p>之前就有人用C代码开发了一个中间件SDK来衔接不同业务代码之间的交互，所以我们实际在使用中，需要通过C接口来实现数据交互</p>
<p>大致的结构如下</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAosAAAGbCAYAAACs1NoRAAAAAXNSR0IArs4c6QAACZh0RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJFbGVjdHJvbiUyMiUyMG1vZGlmaWVkJTNEJTIyMjAyMi0wNS0xMVQxNyUzQTU5JTNBMDQuMjUwWiUyMiUyMGFnZW50JTNEJTIyNS4wJTIwKE1hY2ludG9zaCUzQiUyMEludGVsJTIwTWFjJTIwT1MlMjBYJTIwMTBfMTVfNyklMjBBcHBsZVdlYktpdCUyRjUzNy4zNiUyMChLSFRNTCUyQyUyMGxpa2UlMjBHZWNrbyklMjBkcmF3LmlvJTJGMTguMC4xJTIwQ2hyb21lJTJGMTAwLjAuNDg5Ni4xNDMlMjBFbGVjdHJvbiUyRjE4LjIuMCUyMFNhZmFyaSUyRjUzNy4zNiUyMiUyMGV0YWclM0QlMjJTLXp0dlJGa1NiWThPbkxEdEw4RiUyMiUyMHZlcnNpb24lM0QlMjIxOC4wLjElMjIlMjB0eXBlJTNEJTIyZGV2aWNlJTIyJTNFJTNDZGlhZ3JhbSUyMGlkJTNEJTIyQnJhcl94NEI2Y3NvUXZYWXlfSVklMjIlMjBuYW1lJTNEJTIyUGFnZS0xJTIyJTNFNVZ0YmM2czJFUDQxZW93SElTN2lFWHhwWjNveWs2azc3Y21qWWhTYkZsc2VqQlA3JTJGUHF1UUppYmZFbGlCenQ1aWxna0diN2QlMkZmWWlna2glMkZ2dmt0WWN2WnZRaDVqRXdqM0NBeVFLYUpMZE9CUDFLeXpTVXU5WExCTklsQ05ha1VqS05mWEFrTkpWMUhJViUyRlZKcVpDeEdtMHJBc25ZckhnazdRbVkwa2lYdXZUbmtWYyUyRjlVbG0lMkZLV1lEeGhjVnY2VHhTbXMxeEtiYU9VJTJGODZqNmF6NFpXeW9PM05XVEZhQzFZeUY0clVpSWtORSUyQm9rUWFUNmFiJTJGbzhsdUFWdU9UclJudnU3aDRzNFl2MGxBWDByJTJGJTJGY0pRNyUyQmZ1QkJzdmh6UUhoeUg5NVo2dG5TYmZIQ1BJVDNWNWNpU1dkaUtoWXNIcGJTSUJIclJjamxyZ1pjbFhOJTJCQ0xFRUlRYmh2enhOdDBxWmJKMEtFTTNTZWF6dThrMlUlMkZwVExlN2E2ZXF6Y0dXelV6dG5GVmwza3p5a2ZidSUyRnJLOUZLckpNSlAlMkZET2hSbXhaTXJUQSUyRlBJVGtsZzNWek1lWnBzWVYzQ1k1WkdMJTJGWG5ZTXJNcHJ0NXBTWmdvSlR4QnNVb0wzbGg4VnI5RWhwU0ZCaUlFalIwa1djaG4ycDE5NE05Z1F2VzhHWnhORjNBZUFKUThRUUVMenhKSTdCeFg5MllSMkdZcTVhdm9sJTJGc0tkdFBvcjRVMFNMTlhzME9rRDNZNlVGdXdEZEk0NEJxY1duMlZRM3ROOEUyekdwM28yZDRsdnFKYmUwSFQ5YUQydnRCdmt0bGluaCUyQlhvSCUyQm00cmFQY0w3ZFljMXV2T2s0a0JsTVBCY0dOeExhTGJnT290TXJ5UGtCVkt2TUlNQ3hvQ2RFd05vd1ZNQ282a2NLYTE3SXpTMFVPQWozNVVMS1JpRTNiS0R1b2UlMkJ6cUtVajVjc2M0cFhvT202ZGV6VmFNdTM5aW9KVTZPbUliTWd3ZGVTTW5GaEVMTUtYVHJHaGR3SGsyNkp6VDJkMlFEalpGdGRKYThmcXpmTGRkblZCU2lSbkVpSnRFdEt4SzdHcjJ6a0Q1QUhmdVVnejViOENBTTZRUDd3YTVBajNoT0UxUFozUUk5V3pmWHVycDRkaTR5d3FzWU9mTFVEN3pIdEx0Mkg2TnpuYTZZVXVZa2Q5QnJIY2ElMkZkVVVoTFglMkYyNzhlQ1Bsb3FPeEhlMld1YUYwWE8wa1E1empvQnY0WHJBSjdxQWp6VUJmeWM4dTNtN1hRYjhZdnhZcTJxT3hmdGFzTyUyRnRZdiUyRmx3NzF6SW1IdE1ZSlA0cXRPd29LJTJCTmpXJTJCaWtaSnB5clZSSDVJNEFJWEJXYVd3UFVSOWJKUTVDTnFaWFVPbFdPWVE2SGd3Vmx1TjBTJTJCblVsR3lHOG4lMkJaOWQlMkJaQ3JLM3dNTGNhQWx1ZWNtQ1IlMkZtb2VaNzNHeEhuR3NxcHZobm1HNFJ4d3R1M3JnU1FRWXkyemwzTjVIVCUyRlclMkJMcDBQZDlycmUwdUVQTGRtUG9CNEklMkJsVFhtODMlMkJoMlcxM0RuM0JMVXFnczBtT3lXazRkenBsWHZ6ZVh1JTJCSEElMkZFSEozYk5iQSUyRjJqRnU5VXV1RnhhVDF1Nlc4MEFsTHM1bjNjZXpwcDV2ZVYwSHMlMkYwSmVrVnN0WVZaSUdGWjF4NUlQbyUyQlp4dDRUJTJGeXBrSm5oM1JoJTJGRlVaMjhIampKMHlZaXBndHBycmpqVnMlMkIyeUNtM1RVbDZzb29WOVpIZmo5RE1wQU44U1p1RUdTV2NoaXlsSTFUa1dUbjNzZnd5MXBHaWlYUGhHY3JkM0kwZUJvYVBPMUw0V2wyZWxaMGpoRGpmbUtNS1V6OXVtT01hWDJiR0dNZVBTSnlMRnB6dVJzNEk5SjFNWm94eG9jSiUyRmE4V1hpelNkY1p0YXVKN0IlMkZ4NFRzbzY5WXVmeW5kWlhYQ1c3cnNSV3hxc2wzVThBNHlvcWVtQndzQXpFZTFuN1QyNDYyWm1IcURBNmR5NnlkVVpkN3R6MGlhVyUyRmh1VFYwZENUV2syR1pEMzlyTkxCMGQxelh5TDRIYSUyQlJUVXFvQmRUZ2U0Y091TmxxSVFrekFIeVI4Vnh3S0JzJTJGcmM0S0k2ajVVcHlUWkhhVG1LeERqJTJGRnJtMjdEaXAyVHpUc2k2RktkQkdUeWhhJTJGYjJXREVhSllIYWtBZjZoQWFCWElheWglMkJFZnJ5JTJCOWtNVjdaYVJST0pORkJvMmhaWHdLMHpUS1Z0YjllJTJGYmVwNXgzSldiZFAlMkJQY2R6NTR3azlxbVJ4TlhiVDhVJTJCN0FNMXpnZjcwNDdWOFBsbWZ6cCUyRjBWWiUyRnVyMlIyOWlvU2N3WGJuU1RteW5Oem1oazVDWSUyQlVDYmZwOElpUnlzc2doMnY1aWpYWDJJUlhiYlp6SVRHYVBlVjhrMVhWYnZQamk2UWVNSmwlMkJVOGN1WGJLZjRVaHclMkY4QiUzQyUyRmRpYWdyYW0lM0UlM0MlMkZteGZpbGUlM0UGjRb8AAAgAElEQVR4XuydBbgW1fr2HzqkRBEVxUDkcFBEPXYHFljY5+hRDOwOrGNhYHdjd6DHbsVGObaiYqMiCKJ0s7/rt/7M/t79sjf7jZl31szc67oQ2XtmrWfdq+55ajUwFSEQDQJV0VSrWj1CoIFHskgUISAEhIAQiAgBbfYRAatqraqqSnwxrfOgQQO3dWj/SOsAq19CQAgIgRwEtNlrOkSFgMhiVMh6UK/IogeDIBGEgBAQAhVCQGSxQkBnsBmRxRQPushiigdXXRMCQkAI5CEgsqgpERUCIotRIetBvSKLHgyCRBACQkAIVAgBkcUKAZ3BZkQWUzzoIospHlx1TQgIASEgzaLmQIUQEFmsENBxNCOyGAfqalMICAEhEA8C0izGg3sWWhVZTPEoiyymeHDVNSEgBISANIuaAxVCQGSxQkDH0YzIYhyoq00hIASEQDwISLMYD+5ZaFVkMcWjLLKY4sFV14SAEBAC0ixqDlQIAZHFCgEdRzMii3GgrjaFgBAQAvEgIM1iPLhnoVWRxRSPsshiigdXXRMCQkAISLOoOVAhBEQWKwR0HM2ILMaButoUAkJACMSDgDSL8eCehVZFFlM8yiKLKR5cdU0ICAEhIM2i5kCFEBBZrBDQcTQjshgH6mpTCAgBIRAPAtIsxoN7FloVWUzxKIsspnhw1TUhIASEgDSLmgMVQqBiZHHs2LHWsWNHW0BgFtm92bNnG39atWpVIRjS2YzIYjrHVb0SAkJACNSGgDSLmhdRIRA5WZw6dapVVVXZ+uuvb9dee62tu+661rBhQ3vwwQft7bffru7XfvvtZ5tvvrn79/XXX29PPfWUPfvss/buu+/aSy+9tFD/TzzxRGvdunX1z2fMmGETJ060Tp06RYWVzZs3z9XdqFGjyNoIs2KRxTDRVF1CQAgIAb8REFn0e3ySLF3kZHH55Zd3WsLc0q1bN1t11VVtjTXWcARxl112sdtvv90222wz++GHH5xG8V//+pdtt9121q9fP/vyyy9rvH/AAQfYJ598YksvvbT9/PPPduqpp9r999/vnqHeAw880AYOHBjKuDz++OPWs2dP69Kli5199tn266+/2pAhQ0KpO+pKRBajRlj1CwEhIAT8QUBk0Z+xSJskkZPFr776yhHBSy65xGG355572qBBg+zSSy+1nXfe2ZG7TTfd1MaMGeM0docffrhts802tskmmziNZIcOHRbCHOKGVhKyOGDAAJs0aZJdc8011rx5c6eRREv53HPPObJZboHQnnnmmbbHHnuILJYLpt4XAkJACAiByBAQWYwM2sxXHDlZnDNnjq288sr2zjvv2Lhx4+yggw6yjz/+2A455BBHFj/66CObNm2aXXzxxW4wArK466671jk4uWQRP8gjjzzSzjrrrOrnb7jhBuvVq5dtuOGGNeq4/PLLbcqUKa59zNvbb7+9I5m33nqrff/99878Tfn000/t4IMPdlpPSO1yyy1nd9xxh7355pv2wQcf2GKLLWbDhg2ztdde2+655x5bYoklnPbziCOOcL//29/+ZldeeaVttNFG9v777xvt9ujRw7Wz1FJLuXYwy0ddpFmMGmHVLwSEgBDwBwGRRX/GIm2SREoWR44cadtuu6398ssv1f6FkDXMuuuss44jixAo/oZElkIW0SxSxz//+U/X1sYbb+zIaW0FInrTTTfZddddZ5jCDz30UDvmmGOse/fu7t3Jkyc7Oc877zx78cUX7bbbbrMddtjB9t9/f0cE8bnkd6effrqtueaadvzxx7s6Tj75ZFtllVVs9dVXd7974YUX7Oqrr7Zvv/3WEc/evXsb5Jc6zjnnHOez+cYbb0Q+l0QWI4dYDQgBISAEvEFAZNGboUidIJGSxZkzZzofxPzSuHFjp0mEJHbu3Nn69u1ro0aNshYtWhStWaQNSN1jjz1mr776qmsKcvbAAw84jV9ugSwiz/PPP+9+TJDNzTff7Ighz951112O1KEFRFsJucs3Q7/yyiv21ltvuffxlcRnErM3WsqAbPK7Nm3auLoxoyMPJBlfTNrGFM+zUReRxagRVv1CQAgIAX8QEFn0ZyzSJkmkZBGw7rzzTuezmFvwAXz44YcdWdxxxx1tr732cn/vu+++RZFFiBika/HFF3fVT58+3Z544gmn7cPMjfk3nyy2bNmy+ufDhw+3DTbYwObOnWtHH320EVGNbGgJCWRZdtllFyKLP/30k+sT5cILL7T//e9/TiuJOfuLL76obg4N5+67726rrbaaC9bBBE/BHI95Gn/MqIvIYtQIq34hIASEgD8IiCz6MxZpkyRyskgwy++//2777LOPw+6qq66ynXbayfn8BWTxiiuucM8MHjy4KLJIYAv+gd99910N0zP+htT35JNPLkQW8aEMopn5+4wzznBEDq0kUdlEPD/99NP22muvuXcXFeASkMXjjjvOaUf//PNPF6QDEWzbtq3TIkJg+/fv7zSQIotpWz7qjxAQAkLAHwREFv0Zi7RJUhGy2K5dO6e5o+DnR2AIZHG99dZzaXVuueUW58uHCbiYABdMxwSfbL311nbjjTc60y9+kmgp//3vfzvil1uo+7777rPPPvvMmjRp4szB+DfefffdTrvYvn17Zy5GHjSTFGTFLxJtZX7q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hIAQCAUBkcVQYFQlQmBhBEQWNSuEgBAQAkIgDQiILKZhFMPpw2pmtoqZdTKzJcxsMTNrZGbzzGyamU00s9/M7Ecz+9rMpobTbHprEVlM79iqZ0JACAiBLCEgspil0a7Z13XNrE/r1q13mDZtWq8llljizy5duszq2rVrs86dO7dr1apVgwYNGsyZPXv27EmTJs0bP378/DFjxjT84YcfGv30008tmzZtOm7u3LnvzJ49+w0ze83MRmYXytp7LrKoGSEEhIAQEAJpQEBkMQ2jWHgfmnXs2PHkefPmHdqyZcu2++yzT+utttrKNtxwQ1tsMRSJhZeRI0fa+++/b88888y41157rcX8+fOnNW3a9Klx48bdaWbvFl5Tep8UWUzv2KpnQkAICIEsISCymJ3RPqV58+Zn9e3b14488sjFNt9881B7/uGHH9rQoUNn3XXXXdOnTJnyx+TJk68zs1vNbHqoDSWoMpHFBA2WRBUCQkAICIE6ERBZTP/k2KZ169Y3rLfeeq0uu+yyjmussUbkPX711Vft0ksv/e2VV15ZvEGDBlfPnj37UjP7I/KGPWtAZNGzAZE4QkAICAEhUBICIoslwZaYl05r2bLl6bfddluLvffem2CVipZvvvnGLrroor/uvffexebMmXOOmV1YUQFibkxkMeYBUPNCQAgIASEQCgIii6HA6GUlV6222mr/euaZZ5bs3LlzrAJ++eWXdvLJJ0948803p0+ePPkYM3uiCIGWMrN2ZtbczJivMxZEZhOd7XURWfR6eCScEBACQkAIFIiAyGKBQCXsscFrr732Ae+8807Hpk2beiP6E088YYceeuif48aNe9DMjl6QlieQDzKII+X6bdq02Wj+/Pk9pk+f3rFly5azWrduPadFixY812Dq1KlVkydPbjJnzpxGzZo1+6WqquqLGTNmjDAz/ry5IM2PF30WWfRiGCSEEBACQkAIlImAyGKZAHr4+oGdO3e+7LPPPlu8TZs23ok3Z84cO+iggyY+9thjf0ybNu0IM1u5VatWe0+bNm3ztdZaa9LWW2/dfN11123eo0cPW3nlla1Jkya19mHatGn23XffGVrLESNGzHzzzTdnjxgxovWSSy75wV9//XXPnDlzHjCz8XECILIYJ/pqWwgIASEgBMJCQGQxLCT9qGfFxo0bj3rrrbearLfeen5IVIcUt99+O6TR+vbt++d+++23eJ8+fYpO35Nf9axZs+y5556zBx98cMYjjzzSfJlllnn2119/HWRm78UBhshiHKirTSEgBISAEAgbAZHFsBGNsb6ll1766YMPPniLQYMGtYxRDC+anjx5st1yyy0E2Ext2rTpW2PHjj3ezL6qpHAii5VEW20JASEgBIRAVAiILEaFbOXrXX/xxRd/ceLEia0r37TfLZ5//vmzzj777Cbz588/w8wGV0pakcVKIa12hIAQEAJCIEoERBajRLeCdTdt2vTeCy644F8nnXRSBVtNTlOk8enfv/8f33zzzZe///77bmb2e9TSiyxGjbDqFwJCQAgIgUogILJYCZTLb4NQYJwQezVp0qRHixYtuldVVXWaO3duuzlz5rScN29ek6qqqgZ//vmntWtHlhmVuhA47bTTZl177bVjp02btkPU91mLLGoeCgEhIASEQBoQEFn0dxSXMbM9O3TosN/48ePXXmONNaast956jXr16tWyS5cu1qlTJ+vQoYMR8dy8OVlnVApF4LrrriPv45iZM2duYmbfF/pesc+JLBaLmJ4XAkJACAgBHxEQWfRvVP7RunXrgdOnT991jz32mLbPPvu02Xbbba1Zs2b+SZpgiS677DI755xzPp42bdqaUXVDZDEqZFWvEBACQkAIVBIBkcVKor3otpZp3br14Pnz5+926qmnzjvuuOPatGrVyh/pUijJXnvtNWn48OGPjx49un8U3RNZjAJV1SkEhIAQEAKVRkBksdKI197eAc2aNbvukEMOmXXxxRe3b9ky85lvKjIq+Hguv/zys6ZNm7aBmX0UdqMii2EjqvqEgBAQAkIgDgREFuNAvWabV6644or977333rYbbbRR/NJkTIKLL77Yrr322qd//fXXHcPuushi2IiqPiEgBISAEIgDAZHFOFD//23e07t37x2efvrp9j7d4RwvJJVtfeLEibbkkktWVVVVcTfi1DBbF1kME03VJQSEgBAQAnEhILIYF/JmN/Tr1++goUOHNo1PBLUMAhtvvPH4t99++3AzGxomIiKLYaKpuoSAEBACQiAuBEQW40H+oK5du148atSoJeJpXq3mInDOOedMPffcc28ws4FhIiOyGCaaqksICAEhIATiQkBksfLIN2vWrNnYV155pZ18FCsPfm0tPv7449avX78nzGyXMCWCLLLAVNKNQBwfBZpX6Z5T9C6OeZV+VNXDUhEQWSwVudLfO3677bY74bnnnluu9Cr0ZpgIvP7667b55pu/bmabh1mvI4tVVTrXwwTVp7oaNHDneRyHuuaVTxMhZFlinFch90TVpQgBkcUKD2abNm0+f/zxx3tsueWWFW5ZzdWFwLPPPmt9+vR5zsy4AjC0IrIYGpR+VhTjoS6y6OeUCEWqGOdVKPKrklQiILJY2WFt26RJkwmzZ89uXNlm1dqiEBg8ePCE00477SEzOypMpEQWw0TTw7piPNRFFj2cD2GJFOO8CqsLqid9CIgsVnZM1+jatetbo0aNSuTVLNOnT7eGDRuGehf1H3/8YUssEW+cz2abbTbmjTfeILjl3jCng8himGh6WFeMh7rIoofzISyRYpxXYXVB9aQPAZHFyo7pP7p37/7qyJEjW1ey2V9++cUeeeSRRTbZu3dvW2211dwzDzzwgH3wwQfG/cmUww8/3G688UY7++yzrVOnTrbvvvvaWWedVf372267zd577z33LHdY/+c//7HTTjutRnudO3d27+eWu+++204++WR77rnnrFGjRtW/oo6//e1vFYGIW1zat29PW/znzzAbFVkME00P64rxUBdZ9HA+hCVSjPMqrC6onvQhILJY2TFdrn379t/88ccfzSvZ7K+//mpPP/30IpvcbLPNHEHj2eHDh9txxx1njz32mK288sokrSZQo5os7rnnnrb22mvbd9995+r897//bfhg8jMivD/66CPbaaed7MEHH3S//+mnn+y8886z999/v1qGF1980bbddlt8Ba1x4/+zys+dO9eeeeYZ23777Q0/wkqUgQMHjrvmmmuemzlzZuj3Q4ssVmIEY2wjxkNdZDHGcY+66RjnVdRdU/3JRUBkscJj165du/HDhg1bco011qhwy4U19+STT9pLL73kHp43b54dfPDBdthhh1m7du1sypQpTgOI5q9FixbVBBSyuM8++9j6669vK6ywgiOLaB/fffddV8/LL79sV1xxRTUBRCt5xx132Kabbmqff/65XXfdddakSRM78sgjbcMNN7RLL700VFN3XT0fM2aMde7cec68efN6mdnIwhAq/CmRxcKxSuSTMR7qIouJnDGFCR3jvCpMQD2VRQREFis86qusssqQbbbZ5p/XX399i0o0/eOPP9onn3xSUFOrr766zZ492x5++GFnZu7YsaMjfNRRW+nSpYsjh5DFF154wVq1amXff/+9ffvtt44svvPOO5AxV+f1119vu+++u6sGeVZaaSXn/4gGEzM2hXcwd1NPJcpWW231y6uvvnqHmZ0VRXsii1Gg6lGdMR7qIosezYOwRYlxXoXdFdWXHgREFis/lks3btz4pxEjRjTt1QuFVrQFs+61115b3cgXX3zhyNuaa665UMMDBgywtdZay/gbDWPXrl3t6quvtjvvvNM9O2zYMOvRo4d16NDB/bt///626667OrKI9hGtYJs2bZxmcfPNN3cawqBAAPv27etM15i3n3/+eXv11VdtueWWs2OPPdZpK6+66ipHNnkXEzV1d+vWLRKALrzwwomDBg36ZubMmetH0sCC/Hs61KNC14N6YzzUNa88GP+oRIhxXkXVJdWbfAREFuMZw8NXXnnl/4waNWqZ3MCOqEXB7/Af//iH8z3Ep7C2gt8gBO2VV15xZBDfQggcBbMxwS8EuVDwZ8R8DFnca6+9bN111zW0jZBFyChm6yOOOMImT55sH374oUFUIYiYnbfYYgtHLiHMG2+8sSOkkFM0mQTL8OeQQw6xrbfeOnRYuLFlr732mjRnzpwNzOzL0BtYUKE0i1Eh60m9MR7qIouezIEoxIhxXkXRHdWZDgREFuMbx2vWWWed3V9++eVl0MZVoqDNGzhwoH388cfGfgQJPOqoo5zvISbhoEAWb7nlFkfgzjnnHFtxxRUdMZw6darNmDHDaRZ5l8AVzMwEvFA3foy///57tRn673//u9MOTpw40b788ku76KKLXBNDhw517waFNjBH4xcZlF122cW1GUWh7y1atHh0xowZ/zKz2VG0QZ0ii1Eh60m9MR7qIouezIEoxIhxXkXRHdWZDgREFuMdx8GLL774QbfffnuLXXbZZbEoRSFYBRMzUck777yza2r+/Pm2zjrr2PHHH+/8BYOyww47GNHREEO0i/vtt5+deeaZTis4a9Ysg8idccYZdv/99zuyiJYQX0OiqQMzNPXdfPPNLkCmdevWziRN+xTS+IwaNcr9P1rIN99804455pjq9m+//XZHVLUtRRAAACAASURBVDfZZJNIIPn5558hp7+9+OKLDaZOnUoi7qFRNCSyGAWqHtUZ46EusujRPAhblBjnVdhdUX3pQUBkMf6x3LVFixaX/u1vf2s0aNCgpfr06dMyCpHwPcS0jC9iboGoEXiCL2EQWPLEE0+4NDdoA//1r385v8VFkcXA9AxRzCWLmJS32WYbF9Aybty4hboFadtuu+3sxBNPtAMPPLD695BP/BejjhgnPU///v3/mj59+gNTp049ImzcRRbDRtSz+mI81EUWPZsLYYoT47wKsxuqK10IiCz6M56HtGjR4ojmzZuvuNNOO03ba6+9OuEjuNhi5SscMRGTu/CSSy5xqW8gbqSN4Q8Ju9HyYSI+9dRTnUl68ODB9s0339iOO+5oe++9t9NG1kUWqQ+NIXUSOENOxiB1zoUXXlitxcTMTIQ1ORWnTZvmtIuYxPGfxK8xKJi6l112Wfvhhx8qcrML2tO99trrz48//viHn3/+mQu7J4U1JUQWw0LS03piPNRFFj2dE2GIFeO8CkN81ZFOBEQW/RtXbLU7N2/e/MCZM2cuV1VVNcPMykqzQ1DKf//7X1tqqaUcmeMP/0+gCsQMokfACwm5IY4EphAIAxHEtxAz9LnnnuvM0HPmzHHJsy+//HKbNGmS/e9//zMCRoiGxuTMlYBEOxO8QoEUYp4+4IADDPM2SbsxcRO4AoGEEFNOOOEEe/31151fJCZsboGpZDn55JPn3HzzzV9NmTJlCzP7I4y2RRbDQNHjOmI81EUWPZ4X5YoW47wqV3S9n14ERBb9G9sDWrVqdfl2223X8LzzzmvXvXv3ikiIlhHimF8ghgSt5P4OzeDMmTOrNX+QxpYtWzpiufzyy7sqyM1IWpxAM4rPJESzefPm9ttvv9kyyyxToynqgyguvvjiNa7+q0jnFzRy7LHHjr355pu/nTVrVijOkiKLlRy9GNqK8VAviiziaMxXHIurkOLDhe2FyBnVM5hI2OTAC9wobHCVKjHOq0p1Ue0kDwGRRX/GrHHz5s3v6Ny5c58hQ4YsHlVwhz/d9VOSvn37fv/MM8+8bGaHliuhyGK5CHr+foyHekFkEdLDH3xLiBpD5U/hq4wItaDwRXfNNde4f0KSMAUQvcYmhA8KkXC5BbMDSVPjKOT/4sszuCO0XBnAh4g9fG969uzpquO+U/6NOWbQoEHu8niul6JghuEy+5EjR9qnn35q48ePt4svvthuuummGqKst9567uL7UkqM86oUcfVONhAQWfRjnFu1bNny+b59+6700EMPLaze80PGzEjRqVOn38eMGXOcmT1QTqdFFstBLwHvxnioF0QWyX9Vmz8HDshEkEGGuNvzqaeestdee835l0CCyHVF4tSvvvrKRowY4chZUPAVQdsGubz11ltdBn9yX+F8HBQcgdHEkQaBJKvlFkwWRNztscce7u5QUjQQHRdWeeONN1zd9913nzOXcB0VxBpCzc/I6YUDN3++/vprl1csiAzE4RpfG+QLsObqKq7B4k8pJcZ5VYq4eicbCIgsejDOTZs2fXL//fdf75ZbblnKA3EyLwKJyPfYY4/fJk+eXBZxF1lM+VSK8VAviCwC/+mnn+6i1NCaQQjRMh599NEu8ow0BTgk40SMw3GQnoDs+ZBGfGAW9LF6JB966CF7++23HVmENB166KEuISrpFIJCGxArCprAcgtkFgdn2oiCLCIf/SVR7GeffeY0hzho42hNe/wc5+pTTjnF5Q6DTPP/pG1Aw8o1WTwHrhQcuSGgIovljrze9wgBkcX4B+OI7t27nzRy5MiV4hdFEgQIbL/99tPef//9MyZOnHh1qaiILJaKXELeSwJZHDJkiLs+6YYbbnBRbOSo4tokyOJbb73lcl1hSiXqLZcs1jUE+WSRvFoQLYhnYMZF84dWEnNuPlkkfxcRd5i+H3zwQSNzPyZcIu6445PkrMFdpJAv/AbR7nELwG677eYi6cjnddBBB9k999zj3uMdTONoQEnrwL8xL/PcBRdc4AgvZA9ie8UVVziH69NOO80RZKL5giuquH2gbdu2TmvIHamQvXwzNMQVbSJpJNCc0ufzzz/fmflzCwlsA/JY7HSOcV4VK6qezw4CIosxj3XTpk2/ffnll7vIRzHmgchrHmVB//79Px8/fvzqpUomslgqcgl5L8ZDvSDN4uGHH+7MqUSoEW0GweFvSBI/v+2226xPnz7u59zbWQpZhIzi47jKKqu43FgQMQgcZumTTjppIbIIQdxnn33cXZ7cE0o+L66PwiS+wQYbOMKIWRu/SsgYyVC5cgqzORo/tHq9e/d2V0NBfK+88krnU4nWFLM4SVshjKuvvroji2gHIYaQ01VXXbWaBNJ3zOWYj8nhhTb13nvvdddVoRUk3xi5vyCyyEFd/A5yPXbsWBehd9lll7n2uJsUjWN+gcCWEhgT47xKyMqTmDEgILIYA+g5Tf69bdu2r/31118yP8c7DrW23qxZs9mzZ8/GFF1SKh2RRQ8HNUyRYjzUCyKLkEA0Z/kFQgeJQhvIXZ2bb76505aVQhbR4uGrB+HCnw9Cxx2i/BxSl69ZDMgiMjRr1sy1yTVQBNagneMqKIgb5BEyCTmkzlwzNPVCJiGA/A7/SnwjuZwesok2kAKRJecXcvEspmVMx2AC6ePWAYguhf6T74urpkjyiul56aWXdsSQwv/zO24ZICEtQS0UfDjvvvtul7QWMzn+nBBVCqZ6SHSxJcZ5Vayoej47CIgsxjvWO2y44Yb3vP322+3jFUOt14ZA9+7df//qq6/2MLM3SkHIG7KISe7PP/+0jh07LrIfHHRNmzatjjQl1xGHOpqVMEuhqVkgALSd6zfH4U0/8n3pwpSv0LpiPNQLIosErGy5JYnm/3+B9KDNC3wWIWZcowRpK5Usoonj+if8/dAAkmcrSKZaG1lE8wdRpaAVJKEr1z2h9ST3FjcCYD6mTszB+T6LaPmCK6EwpWOWoR0IIKbp4D5TTN4kdIWIQhapNyBvjB0ay+CaKMgiWlb+oOFEY7n++usvZIbGZL/aaqs5XDGXQ4pJTksf0FYSIY1pvpwS47wqR2y9m24ERBbjHd/de/fufcOLL77YIV4x1HptCGyxxRYThg0bdrCZPVEKQqGSRbQamM0WVTD71Wb2uuOOO5wT/qOPPrrI9/GxwgcLEyGF50mhEqRcqetlNDpocSClZFeHPNRV0MKQUgSNEAdsUNAyBVqe4Gcc/kTCouWBJEIsICHXXXdd9SG/wgorxEYcYzzUCyKLkH3IPwEpFLR0mKbxyQvIIiQLM/Bff/3ltHMQRwhkXSXfZxGy9MEHHzjtHmZeiBImYeqDqNVGFhn/IJoZ30YCadDKESiz8cYbu1Q2pOwhUAZfw0UFuOSSRbSG3F0apLlBS8ndpcxfyCK+iSut9H++4XWRReba/vvv7+YduOT7LPJv+sR8RMsI2WQuIyvvgCGaReYl7ZdSYpxXpYird7KBgMhivOPce911133ovffeKyxZbryyZq71DTbYYOLw4cP/aWYvlNL5UMkiBx5krK6CH9iECRNc6g/uW+TQDwo+axR8yfILfl5oUzC9cdjeeeedxmXf+GdhquTQ4++g8G8O0dySSxYxF3KA11YIM8dMSHtBnjy0XxBZ7qPEPy23BGQRc+oxxxzjyA6BGBRMiphPIQM8B6EIzI91YYS5NIjSLWVA89+J8VAviiwGhI15sPbaa1eTRXIJYkYFOwhiqZpFyCLpYzBpox0cPXq0G5+6yCJzlbGG+GPShYByfRRzAoKFlo+5immXDwrmB/6JPDNs2LAaqXNyySJElWAYTN3IQfv9+vVz6X3qI4s8R/oc0grx4cNaoOSTRWSlXuYSZBFiy9pBVq6y4jaC448/3n3gcA9qKSXGeVWKuHonGwiILMY7zp0WW2yxb6ZOnVrWdX7xdiG9rS+zzDIzx44di//Rt6X0MlSyyIGMmbiuSCgIU3ChNho4TG8UDlDMcZCq2ky3XKmDDxckkzQqOOpzIEM40fTlkk4IAQc2Bzn+XeST44CvjSxCAklMTAABBz7BD2g40RR9/vnnTjtIUAVaoMBXDFkokAOeJ4oXTSeEABMn6Ur4f9pFVnzRAtIJyeV3HPa1FSJWMS8SRRtWifBQP9HMbjGzhR0O/0/4osgigRoUxhkzbaBZBCvGGZKESbUQsohZGHNukGeRjw3GGI0akcSMEf58zDmCUPLzLELkIG+QqSDw5q677qo2l0O6uIcUEom5msLPkI98h9dff32dZBFtHx8jmIIpRCSj8cOcXRtZDCK4aQvCjKxo55lbJOKmQHrR1mOShnQHawhCC1mEVLImKGji8YMM8i1i8g/qKWbORTivihFDzwqBXAREFmOeDx06dPjmnnvuWYU9TsUfBAhw3HbbbcdOmjSp5r2ERYgYKlkk9Qn3JNalPcsli4GMECzIFn5/+fcrdu3a1R2kFDR2mNMgCxAK/LrQwGGyy73pA40jRAOfNDQqmK232mqrWskihA5TIlGlFA5m6kMrifYR/y4KF4GjTeJAzy+BZpEULNQDQeEgpy5IIiZLUqlgxoQs0l8uLa+tELVKmpaEkEX8DbDR0xmYXj5pLIosBuZQyBBkL9cMnYtVfWSR1DuQKlLKQDBLKZBF0tfgo4gWLpgTQV34s6I9xg+QORoUPj5ww6jPf5b0OXw0YX7H/7E+31bM32io+YBh7jNP+FjKd/ngdxBjIskpAVmEwNa1JtGG4l9ZbBFZLBYxPV8BBEQWKwByPU0cutFGG5331ltvKSI6/rGolmC77bYb98ILL1xhZpeUKlboZBFNS5CDLl8oDvHADM3v0HagxcNPC40H2rug4KSPKTDwTauNLKJh2WijjRzB4kCkcPiiRYJ4kmYEXziISG2aRYgi2hwOXw5kzOgQPjQ1mAiPPfZYFw1LQAQycmDzxYQ2qlu3bq49yCLJjtF2QgTp37fffuu0PEEhKTLRtCkji8ea2WAzw97PJn1lHmksiCyCEYEgQWATRAoM0XZh2g/89wIscXNgLPJ9R4PfEyQFSa+PsC1qwQRkkXmUX5gjmIAhekRDV6rQr0Lvzc5dQ8zvUlLj1NcvkcX6ENLvY0BAZDEG0PObbNOmzVfXXnttNzJFqMSPwE033TTz5JNP/mnq1Kn/l1ajxBI6WUTjgfN9XQWyxWGOBhKtG0EHaFnQiuBrGBTM2RzWuWQRM3SuTyMkg2AVyAVBKRRIB6SN5zD5YeZDG1UbWezRo4fzHcPZH4KI2RmTHaSVpNDIB8FDe4SWCVUufwiuQVuJ2Z36ISb41VEwoSIXRDYoEFfMfSkji3SPfE1BmgScVXNJ4+QwbkYpcV6X9RoJvJl7uX6wQYW4SjDf8H0sh5CWJaAHL4ssejAIEiEfAZFFP+bEJo0aNXpt+PDhjcjjqhIfArhPDRgwYOrs2bM3M7MPy5EkdLK4KDN0rqBoErnzl4TC//znP52ZlnQfQUGTgikwlyzyTGCKw7cPUhbkjCPVCrdnQBbxyQr8sDBL45vG4R5EQ2NiRluIuTdIj0K7Q4cOddGiQSHxMs8GWkt+jmmbiFi0kiQ8Dm7XoB9EZaMNQ9NJgXTwLGZyzH0xksVy5kix784xsyfNbLekksViO5zF50UWszjq3vdZZNGfITqwbdu2V7766qttSg2i86cryZTkhBNOmDZkyJApU6ZM2dXMhpfbi4qTRXLDEVSC9i5wxsfcTMBALlkkrQn+V4syQwd57PAX5AYM0qFgFsa8HWh9SMNCRCvEM5csEi0KCYQMBoXgGPzQKARV4DdHhHNQSMgM4SOAh8AH3sd3DYKJiRACCXklgjdIJg1hDNLvxEgWGecoygQzW2JBxanRLDIvg3Q9hYBGMA1uBrgsFFIIhsGnNslFZDHJo5da2UUW/Rrag5s0aXLVY489thiuWCqVQYBsG6eddtq0OXPmvDp27FiiZceH0XLFySIaPhzwidIMCmSRoJJcMzQaO0zD+ZpFtJHcjIHfYEAWqQdfN0gZhxi5+4IIZEgnxBFNZC5ZhAgGOf7ygQyCKPBlRCMYFEzUaCSDJMn8PAhwgSwSYXrLLbc4MzwmagIHct9PGVnEZ5FQYIJcyvJZDGMil1sHgVRopMmviA8qwVr15e4M2sSVghtbgsCSRcmCzyWkMlfrSmYA3DeYX/UFu5Tbz7DeF1kMC0nVEyICIoshghlSVX1btGhxD8F2l1122f8FFqiEjgA86eGHH54+ZMiQOfPnzx89duzYU82sZp6/MlsNlSzi/0cCZFKHEACQX/D1giSSNoQciblkEQ0gwS5BQfvCAZzvs0iQCSQPbU4uWeQ9Dnu0lkTUYg4nmXJQiEjGj5CIVXwT+RMUgiXwKySVD9pFroXj3mAmeFAgqGiDgtQ//JygFlLpEHwDWaRu3sesTsHMjSmbYBkKZJG6ySNYW8HXkuezFA1d5vwN7XXcC5hvjDkfJJBFchIGJZfEke8w93e1CUGEf+DiwEcP9QeFD6FA800AD64SFNZPbesmtE6GWJHIYohgqqqwEBBZDAvJcOtZpl27dje1atVq08GDB7crJftCuOIkrzaUYZwbcA1iMbBmfvrpp5P+97//zX7//febzZ07l2wkT06fPv1+M6s9iXSZ3Q6VLKLFg5AFOeTyZUPzh19hbvAHz6BZzCWLBK2QxzA3dQ5AkZKGCFS0M0Q6B1o7/BgJOCGVCNHY5EVEc0gKlkIK6XVIixNc/4ZpOiCuyELwCmSRFDpBfjoCXUjTwnuYrvk5BBTzOu+gyeTfyIPPJIEwBOHQL35fW8FUDplOCFkMJc9iIeMT9TN8xHTo0MGlcEIjzTwm4jrX14Y0TRD53MIcRCOIxppCqiU+bhjHukquZpHE4NTLnGGuBtrwqPsbRv0ii2GgqDpCRkBkMWRAQ65uh6WWWurCZs2arXjUUUe1xcqYqzSqry0UQLiCXXrppTNvvvnm5lh00lxGjBjhAnMbNGhQ1bBhw7mNGzee0bhxY0jh2BkzZnw7f/78bwiNMLMPzOz//OciLKGSxVLlRIuI/1+Q4gN/QMgZfmCFHqBo+SCjhT5fm6xMxvxcj9w7jSxoDnOv/kOLCKkIfk4fMEnn52IkUIe+BZqp3KTJ+TIs6nelYhvjoV5w6pxS+xbWe6R4QLuHNpmCGRqiX1dqHHxk8Y/lC48k7vjLUiCPRNEHvrdHHXWUS8WUS/756MkvgZYRf94wPxTCwqe2emKcV1F2S3UnGwGRxWSM36YrrLDCcb///vu2K6644tw+ffq0wSJIYChWOM5QzlfS52FBHD58+Iynn3565nvvvddq7ty5dxDV27x586s++eST5lzfmsaC1bRnz54Tfv/99zPM7HYzmxt3P70gi3GDkOb2YzzUE0EWn3zySXf1HRrB4Hae+sgi2mKuhUQTvaiCBplbYHIJIimYuEGGjxBcNnK1l3wsBTL4PidjnFe+QyP54kNAZDE+7EttGd+zjdu3b7/l3Llzu8+aNWuJ2bNnN23QoMG8pk2bTm7YsOH306dPf9fMhpkZN3QE9wkf37Vr17NGjBjRjlu50lQmTZpEnubxX3311fVmdq4vfRNZ9GUkIpIjxkM9EWQRv0J8XNEeoymm8LPnnnvOXecXFMwBgW8hZBFcc3+/qOHDF5b68FnFDYGCBjGInkbzfMEFF0Q0A6KpNsZ5FU2HVGsaEBBZTMMoFt6Hi3r27Hnw66+/vmRuervCX/fvSYJrt99++7+++OKLG83sdJ8kFFn0aTQikCXGQz0RZDGA/PTTT6/OsYlLASmPSK8UFPxj8YulnHvuuc5UQrR8fYWAJ3xzMLFASrkHPbfgpoAvJJtEkkqM8ypJMEnWyiIgslhZvH1o7cLlllvugBdffHEZ8jAnueD/vscee0yZMGECWUb441URWfRqOMIXJsZDPVFkMRf5+szQ/fv3tx122KGgu6fxu4EkEsGP2TpfgwhZ5D5xkcXw575qzBwCIouZG3LX4WOaNWt2yR133NGMYNkklkGDBk0bNGhQozlz5vQnMYaPfRBZ9HFUQpRJZLF4MOsji1wDSTAKEe6FFtI4Ycom6CW3YP4mDY/IYqFI6jkhUCcCIovZnRxbtGnT5o6tttqq2fXXX790fqCqr7CgTTzssMN+Gzt27JeTJk0aYGbf+SqryKKvIxOSXCKLiwaSG3e+/vrrGg+988479tBDDy1kMl5++eUNTSB5MomEDqL3CxkqyGKfPn1InFrjcSL/BwwYILJYCIh6RggsGgGRRc2Qixo3bnziwIEDZ5x++ultitmjKwkdaXFOP/30X99+++1GM2bMwDeRKG+vi8ii18NTvnAii4vG8MMPP6xxpeOiniahOslQCYQ588wzixqcQLMIYcwt5Ablth9pFouCUw8LgdoQEFnUvACB7q1atfrP7Nmz+x1yyCFTjz766CW6devmBTJDhw61iy++eMznn3/eZMaMGZeY2WVeCFaAECKLBYCU5EdEFsMdPa7mI+1NsV+skEISfffo0aOGQPgyktQ9/+fhSh1+bTHOq/A7oxrTgoDIYlpGMpx+dG3SpMlhTZo0Obh79+6zDzzwwHb9+vVrvPTSS4dTe4G1kJP3vvvum/jII480b9So0Zd//vknt4XcVeDr3jwmsujNUEQjSIyHemIDXKIZiXTVGuO8SheQ6k2YCIgsholmuurq17Zt2/2mT5++XdeuXafstNNOzXr37t1m/fXXL/rDvz5YuFEOV6Ynn3xywmuvvdaySZMmoydNmnSvmT1qZjV9nuqrzKPfiyx6NBhRiBLjoS6yGMWAelJnjPPKEwQkhocIiCx6OCgeirSNmW3Rtm3b7aZMmbL68ssvP6Vnz55VPXv2bN6tW7cW3CLTsWNHa9++vXG7FhclcHsbN6xxUxx5c/FdJ9PFr7/+aj/88MPczz//fPpnn31WNXLkyOaNGzeeYGZvTps27SUuBDOz0R5iULRIIotFQ5asF2I81EUWkzVVipI2xnlVlJx6OFMIiCxmarhD6SwcqJeZrWZmqzZt2nSVZs2arVxVVbX0nDlz2sybN6/FvHnzmlRVVTUM7mhu1KjRzCZNmkxt2LDhhHnz5o2ePn069zJ/a2ZfmtmnZvZHKJJ5VonIomcDErY4MR7qIothD6ZH9cU4rzxCQaJ4hoDIomcDkiJx7jezsxaQwhR1q/CuiCwWjlUin4zxUBdZTOSMKUzoGOdVYQLqqSwiILKYxVGPvs/7mxnX73FX6x7RN+dnCyKLfo5LaFLFeKiLLIY2iv5VFOO88g8MSeQLAiKLvoxEuuTAtLy6mU01s53M7LV0da+w3ogsFoZTYp+K8VAXWUzsrKlf8BjnVf3C6YmsIiCymNWRj67fm5rZk2bWdkETnyzwcYyuRU9rFln0dGDCEivGQ11kMaxB9LCeGOeVh2hIJE8QEFn0ZCBSJMZjZrZrTn/+MrMTzez2FPWxoK6ILBYEU3IfivFQF1lM7rSpV/IY51W9sumBzCIgspjZoY+k48uZ2Q9m1tjMZptZ0wWtTDQzMnvPiaRVTysVWfR0YMISK8ZDXWQxrEH0sJ4Y55WHaEgkTxAQWfRkIFIixjlmdoaZzTSzKWY22cxWMrP5ZvaAmR2Ykn4W1A2RxYJgSu5DMR7qIovJnTb1Sh7jvKpXNj2QWQREFjM79JF0fJKZjTOzw82MRN5oFLmF5bQFPoyZiowWWYxkjvlTaYyHusiiP9MgdElinFeh90UVpgYBkcXUDKUXHSFR9+cLJDndzBZboGnkR447eSFlhYQQWawQ0HE1E+OhLrIY16BXoN0Y51UFeqcmEoqAyGJCBy4BYh9pZt3N7KgEyBqJiCKLkcDqT6UxHuoii/5Mg9AliXFehd4XVZgaBEQWUzOU3nVkXzPb1sz2806yCgkkslghoONqJsZDXWQxrkGvQLsxzqsK9E5NJBQBkcWEDlwCxN7RzA5ZkJQ7AeKGL6LIYviYelVjjIe6yKJXMyFcYWKcV+F2RLWlCQGRxTSNpl992czMzjWzzf0Sq3LSZM5Js3LQetUS41zpkinn30qD60l7ccwrT7ouMTxEQGTRw0FJiUi9zOwOM1szJf0puhva7IuGTC8IgVoR0EGliSEE4kVAazBe/NPcOvkVXzGzldPcyUX1TWQxqyOvfoeNgA6qsBFVfUKgOAS0BovDS08XjkB7M/vGzJYo/JV0PSmymK7xVG/iQ0AHVXzYq2UhAAJag5oHUSHAlX8zzKxJVA34Xq/Iou8jJPmSgoAOqqSMlORMKwJag2kdWT/6NXXBndD8nbkispi5IVeHI0JAB1VEwKpaIVAgAlqDBQKlx0pC4FczW8fMxpT0dsJfEllM+ABKfG8Q0EHlzVBIkIwioDWY0YGvULdHmtluZvZlhdrzqhmRRa+GQ8IkGAEdVAkePImeCgS0BlMxjN524l0zO97MhnsrYYSCiSxGCK6qzhQCOqgyNdzqrIcIaA16OCgpEukFM7vCzPg7c0VkMXNDrg5HhIAOqoiAVbVCoEAEtAYLBEqPlYTAw2b2yII/JVWQ5JdEFpM8epLdJwR0UPk0GpIliwhoDWZx1CvX51vN7D0zG1K5Jv1pSWTRn7GQJMlGQAdVssdP0icfAa3B5I+hzz24zMx+M7PLfRYyKtlEFqNCVvVmDQEdVFkbcfXXNwS0Bn0bkXTJc5aZkZybvzNXRBYzN+TqcEQI6KCKCFhVKwQKREBrsECg9FhJCBxrZtwRfVxJbyf8JZHFhA+gxPcGAR1U3gxF+YJUVVUxnqGXBg0aaM8NHdXqCrUGo8PW25rrWqvz5s2zWbNmWcuWLcuS/Y8//rDFFlvMmjdvXnA906ZNsxkzZtiSSy5Z8Du1PejTfqGNq6yh1MtCQAdVGufA6NGjq/7973/b0KFD7auvvrKrr756oW5usMEGdtxxx9n8+fNtn332WSQMQ31R2AAAIABJREFUp556qq255prm0+afwnETWUzhoNbXJcji0UcfbWussYYdfPDB1Y9/8cUXdvzxx9uLL75Yo4qBAwfaiiuuaIcffridf/75Nm7cuIWa2HPPPW2TTTZxPz/ooINs3333tS222KI+Uap//9xzz9kFF1xgb7311kLvfPvtt+539ZX//Oc/1qVLF284mjeC1Aecfi8EPEdAB5XnA1SMeBxAt956q1133XXuwIEwDhgwwG666SaDRP7yyy92xx132EMPPWRoMBZffPHqg+GRRx6xv/76yw455BDXJAfSgQceaNttt53IYjGDUPyzWoPFY5b4N1iraP923nln99F25JFHuj6NGDHCkbL//ve/NfrI2uzbt68jgL169TK0gJQTTjjBjj32WFthhRVs1VVXteWXX979fJtttnHayaWWWmohrDp16mRnn322a2PQoEE1fv/hhx9az549rXFj3Bz/r5x++uluH4DIUi688ELjo7M2ItqjRw9r1aqVNxzNG0ESP2PVgawjoIMqRTMgMG398MMPNnz4cPvmm2/s66+/tqeeesq23npr69Onj9NYBGRx2WWXtR9//NEhAIkcP368nXLKKe7fHED9+vUTWYx+fmgNRo+xdy0Ea3X69On2559/GgSO8vrrr9vll19uTz755EIy8yykkXU7d+5cR+gghddee61169atxvP8+4YbbnCm6PzSokULp9GcM2eOzZw509UFQUXDiRzsH3w8nnzyyXwoGs/nkkfevfPOO61z587VVTdp0sTatGnj/u2TJUJk0bupL4ESioAOqoQOXC1iL77JJptM5OeDBw+2n376yX7++WdnjuJAgSBOmTLF/S4gixwAa621lqsKrSNlueWWc39DNB9++GGRxejnh9Zg9Bh718JNN91Udd9991m7du1qEEN+hvYQEtesWTMnN5aB+++/35Zeemm3JidNmmRbbrmlffDBB3WSRYjbd99958hefsn1SYSAYnVo3bq1YZVgT5g9e7azSLRt29auvPJKa9iwYXUVEydOdOZwtJtBQUPKPnLPPfeILHo30ySQEAgHAR1U4eDoQy0NxowZMx+zEhrEyZMn27PPPuu0BEFhQ8fXKVezGPg+DRkyxH7//XdncqJgFttxxx1FFqMfWa3B6DH2roUpU6ZU8fG27rrr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9aZ5WsbEiWK+iCyWMSB6VWQxq3Mgis0oq1hWuN86hCsMeBjNZXC9aZ6WMXGimC8ii2UMiF4VWczqHIhiM8oqlhXutw7hCgMeRnMZXG+ap2VMnCjmi8hiGQOiV0UWszoHotiMsoplhfutQ7jCgIfRXAbXm+ZpGRMnivkisljGgOhVkcWszoEoNqOsYlnhfusQrjDgYTSXwfWmeVrGxIlivogsljEgelVkMatzIIrNKKtYVrjfOoQrDHgYzWVwvWmeljFxopgvIotlDIheFVnM6hyIYjPKKpYV7rcO4QoDHkZzGVxvtc7TefPm2YQJE6xjx44Fwfrnn39amzZtrFGjRgU9n5aHopgvIotpmR3+9UOHkn9jEppEUWxGoQmnihaFgNZlAudHBtdbjXk6f/58mz59uo0dO9bWWmst+/7776158+bWtGlTO/PMM+2PP/6oHtVBgwbZsssu6/7dr18/W2eddey0006ze++917799tsao7/EEkvY0UcfXeNntPPTTz9Zhw4dbMkll0zgbLFIbvwRWUzkVEiE0DqUEjFMpQmZwcOrNKD8e0vr0r8xqVeiDK63GvP0008/td69ey+E04ABA+zOO++0+++/3+bOnWtbbrmlTZkyxVq1amW80759e1t77bXtiSeesCZNmtjvv/9eXQcayvPPP9++/vpr9zO0kIcddpg9/PDD1c9su+22dvvtt1eTz3oHahEPIB8yfPXVV9atW7dyqqr33Sjmi8hivbDrgRIR0KFUInBJeC2KzSgJ/U6BjFqXCRzEDK63hebpo48+ajNmzLD99tvPETu0hi+99JKttNJK9sknn9jjjz9ur776qt13331uhLt06WLvvvuuI4+dOnVymsjc8uuvvzpyCVnktrHNNtvM0GDefffdtvLKK7ufH3TQQYbpm3rKLQFZ/PLLL+1vf/tbudUt8v0o5ovIYqRDlunKdSilePij2IxSDJdPXdO69Gk0CpQlg+ttoXkKydpll12Mv6+++mr7+eef7YorrrDll1/ekUV+N3DgQOvTp08NsrjUUkvVinIuWXz99ddt8803X0jr98UXX9jNN99sF110kS222GI16nnsscfsggsusBYtWjji+t5779lDDz3kyCXP897s2bPtX//6l3sOrSJ/ArKItvPyyy93pHSbbbaxwYMHO1LLe8j2ww8/2Isvvug0o3fddZcziyPPMccc48zx++67r3300UeuDjDILVHMF5HFAherHisaAR1KRUOWnBei2IyS0/tES6p1mcDhy+B6qzFP0fadccYZ9ssvv9hyyy3n/m7durXtv//+9t///tfef/99ZyrONfEGmsVCyOJNN91kZ599to0bN66g2YEJG/J2ySWXOL/GU0891Wk9J0+ebLfeequdeOKJjjCuvvrqjiwecMABrv6ALKK5hOCdddZZtt5669npp59uPXr0sCuvvNI9d95559m5555rf//73+3II490f3h2jTXWcD6bO+20k2t7+PDh1eRTZLGgodNDHiKgQ8nDQQlLpAweXmFBF3c9Wpdxj0AJ7WdwvdWYpxMnTqyVyLVt29aRLTSLaPVee+21ap/DYsgixA7fx8B/sb4hevDBB13AzNNPP+0eRbsHuYMsrrvuuoavI4E2lCFDhrjfoSkMyCIEdtiwYU4jOX78eEcO0RK+9dZbjizSjzfeeMO9D5Ek4Obiiy925BGiSmAPBJm+12bWjmK+SLNY36zQ70tFoORDCRU7qREWTPhFto+anz84NGetTJ061WGEeeSvv/5yGDRu3LgiMESxGVVEcDVS8roUdPEhkMH1ttA8xfz68ccf1xgECCLkDLJIihwCWvh//BiLIYuQv3322cdFVVNHUCB/t9xyix144IE1fo4vIxpFCBzlzTffdOZvnkeOe+65x3beeWf3u1deecW23nprmzNnTjVZRD6CazCn41OJtnSFFVaoJoujR4+2O+64w71PG5i4d911V7vqqqvsgw8+cD9flA9kFPNFZDG+9Z/2los+lCA/OBqvv/76du2117pNoGHDhsZCfvvtt6vxwsEZ/xLK9ddfb0899ZQ9++yzzgkZh+f8gkkAk0WSyzfffONMG3z9BpsZZgj8ZUj9sMUWW7iNp2fPnq6b+Lbgh/P555+7qEDMIZg5+JrNLWx622+/fdHQRLEZFS2EXigFgaLXZSmN6J1wEcjgeltonrLHYdJFu0bZa6+9HEnbZJNNHEFkX+zbt68dfvjhjrgVQxZ5v1evXoYfIqQsKJi/0Qqy/3IWBeWII45wGr4gcprgGwglZBE5d999d2c6ptx4440uGhstZKBZRBuIVvF///ufaxc/RSK6A80iPotoJHPJIv095JBDXHAPeSN/++03Z3qXZjHctabaKo9A0YcSPhxoCXMLKQZW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" alt="调用结构"></p>
<p>如上图所示，实际上，跨部门之间的实现代码由一个由C实现的SDK衔接起来，并且中间用一个共享内存作为异步桥接用的轻量级消息队列，多个生产者进程将自己业务中产生的数据通过调用SDK中的接口往共享内存中写入，然后有一个专门的消费者，专门负责将数据取出并和云端进行交互</p>
<h1 id="不同业务团队暴露的SDK接口一般形式以及其带来的一些问题"><a href="#不同业务团队暴露的SDK接口一般形式以及其带来的一些问题" class="headerlink" title="不同业务团队暴露的SDK接口一般形式以及其带来的一些问题"></a>不同业务团队暴露的SDK接口一般形式以及其带来的一些问题</h1><p>给业务团队提供的C-sdk接口一般的形式是如下所示的</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">param_t</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> param1;</span><br><span class="line">    <span class="type">int</span> param2;</span><br><span class="line">    <span class="comment">// balabala</span></span><br><span class="line">    <span class="type">int</span> dataLen;</span><br><span class="line">    <span class="type">char</span> data[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">error_code <span class="title function_">sdk_data_producer_interface</span><span class="params">(<span class="keyword">struct</span> <span class="type">param_t</span>* param)</span> &#123;</span><br><span class="line">    <span class="comment">// 这里是示例，实作是一些共享内存存储操作</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意到，这个C接口中data数组实现的时候有点magic，是一个变长数组，所以python代码在模拟ctypes.Structure不能使用简单的char指针代替data，因为在内存中param_t实际占用的空间需要连续占用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python2</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"><span class="keyword">import</span> ujson</span><br><span class="line"><span class="keyword">import</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">param_t</span>(ctypes.Structure):</span><br><span class="line">    _fields_ = [</span><br><span class="line">        (<span class="string">&quot;param1&quot;</span>, ctypes.c_int),</span><br><span class="line">        (<span class="string">&quot;param2&quot;</span>, ctypes.c_int),</span><br><span class="line">        <span class="comment"># balabala</span></span><br><span class="line">        (<span class="string">&quot;dataLen&quot;</span>, ctypes.c_int),</span><br><span class="line">        (<span class="string">&quot;data&quot;</span>, ctypes.c_char * DEFAULT_ARR_LEN)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载sdk接口动态库</span></span><br><span class="line">cdll = ctypes.LoadLibrary(<span class="string">&quot;libthesdk.so&quot;</span>)</span><br><span class="line">some_val = <span class="built_in">int</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call_sdk_func</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="comment"># 把数据序列化成字符串</span></span><br><span class="line">    data_str = ujson.dumps(data)</span><br><span class="line">    data_len = <span class="built_in">len</span>(data)</span><br><span class="line"></span><br><span class="line">    struct = param_t()</span><br><span class="line">    struct.param1 = ctypes.c_int(some_val)</span><br><span class="line">    struct.param2 = ctypes.c_int(some_val)</span><br><span class="line">    <span class="comment"># balabala</span></span><br><span class="line">    struct.dataLen = ctypes.c_int(data_len)</span><br><span class="line">    struct.data = data_str</span><br><span class="line">    </span><br><span class="line">    err_code = cdll.sdk_data_producer_interface(</span><br><span class="line">        ctypes.pointer(struct)</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> err_code != <span class="number">0</span>:</span><br><span class="line">        logging.error(<span class="string">&quot;opoos ret: &#123;err_code&#125;&quot;</span>.<span class="built_in">format</span>(err_code=err_code))</span><br><span class="line">    <span class="keyword">return</span> err_code </span><br></pre></td></tr></table></figure>

<p>在使用形如上述代码调用sdk interface的时候是没有太大问题的，但是如果实际上数据实际长度超过了给定的DEFAULT_ARR_LEN，那么C调用有可能把数据串到别的内存区域导致其他的奇怪bug</p>
<p>所以这个地方需要考虑一个点，是否动态声明不同长度的ctypes struct？</p>
<p>之前有一个愣头青，也想到了这个问题，所以他写了一个工厂方法动态声明这个struct</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 目的是动态声明不同长度的struct类</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">param_t_factory</span>(<span class="params">new_max_len=DEFAULT_ARR_LEN</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">param_t</span>(ctypes.Structure):</span><br><span class="line">        _fields_ = [</span><br><span class="line">            (<span class="string">&quot;param1&quot;</span>, ctypes.c_int),</span><br><span class="line">            (<span class="string">&quot;param2&quot;</span>, ctypes.c_int),</span><br><span class="line">            <span class="comment"># balabala</span></span><br><span class="line">            (<span class="string">&quot;dataLen&quot;</span>, ctypes.c_int),</span><br><span class="line">            (<span class="string">&quot;data&quot;</span>, ctypes.c_char * new_max_len)</span><br><span class="line">        ]</span><br><span class="line">    <span class="keyword">return</span> param_t()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">call_sdk_func</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="comment"># .....</span></span><br><span class="line">    struct = param_t_factory(data_len)</span><br><span class="line">    <span class="comment"># .....</span></span><br><span class="line">    <span class="keyword">return</span> err_code </span><br></pre></td></tr></table></figure>

<p>然后，喜闻乐见的，python进程内存泄漏了<br><img src="data:image/jpeg;base64,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" alt="捂脸"></p>
<h1 id="根因和优化"><a href="#根因和优化" class="headerlink" title="根因和优化"></a>根因和优化</h1><p>to be continue</p>
<h1 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h1><p>to be continue</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/05/03/%E5%AD%A6%E4%B9%A0dpdk-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/03/%E5%AD%A6%E4%B9%A0dpdk-1/" class="post-title-link" itemprop="url">学习dpdk-1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-03 20:41:36" itemprop="dateCreated datePublished" datetime="2022-05-03T20:41:36+08:00">2022-05-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-11 23:59:26" itemprop="dateModified" datetime="2022-05-11T23:59:26+08:00">2022-05-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="什么是DPDK"><a href="#什么是DPDK" class="headerlink" title="什么是DPDK"></a>什么是DPDK</h1><p>除掉一些乱七八糟的背景合一些看似相关的硬件发展知识以及软件发展知识，只需要简单认识到一个点，那就是：</p>
<blockquote>
<p>DPDK是一个软件优化库，目标是在通用处理器上面发挥出极致的包处理能力</p>
</blockquote>
<h1 id="我为什么要学习这个"><a href="#我为什么要学习这个" class="headerlink" title="我为什么要学习这个"></a>我为什么要学习这个</h1><p>我在工作中要维护一个组件，这个组件中使用了一部分DPDK相关的共享环相关的代码，但是我对DPDK一无所知，这对我来说是难以容忍的，我需要投入一些精力去了解一下什么是DPDK以及其性能强大的基础，为以后可能的中间件编写任务铺垫基础</p>
<p>好吧，讲了这么多，其实说白了也就四个字</p>
<blockquote>
<p>我感兴趣</p>
</blockquote>
<p>哎，上一个坑还没填，又开了个新坑，要学的东西真的好多啊TUT</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/17/%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97%E7%AE%97%E6%B3%95%20%E5%85%88%E5%AF%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/17/%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97%E7%AE%97%E6%B3%95%20%E5%85%88%E5%AF%BC/" class="post-title-link" itemprop="url">无锁队列算法 先导</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-17 23:45:10" itemprop="dateCreated datePublished" datetime="2022-04-17T23:45:10+08:00">2022-04-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-11 23:59:26" itemprop="dateModified" datetime="2022-05-11T23:59:26+08:00">2022-05-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="无锁队列算法"><a href="#无锁队列算法" class="headerlink" title="无锁队列算法"></a>无锁队列算法</h1><h2 id="先聊聊应用场景"><a href="#先聊聊应用场景" class="headerlink" title="先聊聊应用场景"></a>先聊聊应用场景</h2><p>我们现在工作中需要在客户终端部署一个和云端服务器交互的媒介组件，由于客户内网服务器中的很多进程需要使用这些服务，所以开发了一个汇集了所有云端接口访问的一个中间件，并且通过共享内存环和调用服务方进行交互。</p>
<p>讲完了这个简单的场景，那么现在需要先解决一个算法上的问题：</p>
<p>提高性能，如何实现单一消费者（在这个场景中就是远端对接组件，共享内存的消费方）以及多个消费者的高效交互。</p>
<p>这时无锁队列的算法就进入我的选型列表了<del>（当然如果客户端允许的话是不是直接用kafka比较好</del></p>
<p>为了能够最终解决这个问题，应该先研究如何实现单生产者单消费者的无锁队列实现方式</p>
<h1 id="算法实现思路"><a href="#算法实现思路" class="headerlink" title="算法实现思路"></a>算法实现思路</h1><h2 id="首先是环形队列"><a href="#首先是环形队列" class="headerlink" title="首先是环形队列"></a>首先是环形队列</h2><p>环形队列是很基础的数据结构，学过一点点数据结构的朋友应该能够很容易的想到一个简单的环形队列的结构是什么样的</p>
<ol>
<li>首先逻辑上，环形队列就是一个线性表</li>
</ol>
<p>因为我们这个使用场景中的线性表是需要申请整块内存的，所以直接用数组的效率最高</p>
<ol start="2">
<li>操作线性表，有两个游标</li>
</ol>
<p>一个游标readIndex标记第一个元素，一个游标writeIndex标记第一个元素的后一个元素</p>
<p>字面理解：readIndex值向的是第一个可读元素，writeIndex指的是第一个可写空位，在这个前提下，如果对于整个线性表不容忍任何形式的容量浪费，那么当readIndex和writeIndex相同的时候，很难将这种状态理解成<strong>满</strong>还是<strong>空</strong>，当然，可以通过一个新的变量来记录是否空，但是在并发情况下，尽量减少需要修改的临界变量是基本操作，所以这里还是选择浪费一个空位用来区分满还是空</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">readIndex, writeIndex</span>):</span><br><span class="line">    <span class="keyword">return</span> readIndex == writeIndex</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isFull</span>(<span class="params">readIndex, writeIndex, capacity</span>):</span><br><span class="line">    <span class="keyword">return</span> (writeIndex + <span class="number">1</span>) % capacity == readIndex</span><br></pre></td></tr></table></figure>

<blockquote>
<p>下面的描述参考了wiki</p>
</blockquote>
<ol start="3">
<li>工作过程</li>
</ol>
<p>一个圆形缓冲区最初为空并有预定的长度。例如，这是一个具有七个元素空间的圆形缓冲区，其中底部的单线与箭头表示“头尾相接”形成一个圆形地址空间</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAA2CAMAAADZGHTAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABPlBMVEUAAAADAwQEBAUDAwQEBAUDAwMCAgMEBAUCAgICAgIEBAUCAgMEBAQICAkLCw4NDREjIysbGyEODhISEhcXFx1CQlI1NUIpKTMODhERERYWFhw/P08yMj8nJzEFBQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABISFqGhqdCQlI6OkkQEBQzM0AUFBkrKzYZGSAgIChubonMzP9jY3xZWW9OTmIeHiYnJzAwMDxpaYPCwvNfX3dVVWpLS14dHSQlJS4uLjoAAAADAwQDAwMBAQH////0oLsCAAAAS3RSTlMAxvP7+fv6+vr5+/n82v7+/v7+/v7+/v7+/v7+/v7XLzo7XFBaU1dVizUf5s8BEyW+9GhUokHr3g4D1v2bePXlEunHM4nUsINzfMWAuOuUAAAAAWJLR0RpvGvEtAAAAAd0SU1FB+EICBAUBNHtsZUAAAFGSURBVGje7ZlXT0IxGIbBvRD3lnNkulFBxYlileVW3Lir/v9fIMYrTc5bc25M6fvcNU968SRNv6T1eAghhBBCCCHa4q3B1NZhX6/wDY3YNyl8cwv2rW2KAK9juq+4D2k/wN5/iP3RMfYnp9ifdWB/3ol90eecXrqAdF1i332Ffc819je92N/2YX/Xj32J6UxnOtOZznSmM53pTGd61aSX7yEDD9gPPmI/9IT98zD2LyPYv45iX3ZOD0jMm8K/K/yH/GcCjumW/ZOxX+tgyIaEI9hHY9jHothHwtiHgtjb1p9fbcYnTH2vmpyantE6YDbuduecnF/QOj2RdLlxcUnK5ZSJ6SurlStxbd3E9I3Nr3GQjpuXvrX9PQoz5qXvCCF294TIpsw78BWSCb2nM9Ndpecsrcm5T88XNCfPL2RCCCGEEEKqh0+DACz7FQ3mlAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wOC0wOFQxNjoyMDowNCswMDowMPTbQDwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDgtMDhUMTY6MjA6MDQrMDA6MDCFhviAAAAAAElFTkSuQmCC" alt="avatar"></p>
<p>假定1被写入缓冲区中部（对于圆形缓冲区来说，最初的写入位置在哪里是无关紧要的）：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAA2CAYAAADuxoTyAAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH2wQHAzEy0LYwXgAAAxZJREFUeJzt3M+LG3UYx/H3TlKhsHWrpbYurbXSXqTagnuyp0IQFC89LEgR6UHFQ/EkZZdaitAfCwWlFy+99LIivYse/BMqgopeqotYWvHg1mzAze7kOz0k0qUIdrLJPJV5vyAkGXjyeQh5mMl3MgFJkiRJkiRJkiRJkiRJkiRJkh4tE2ULsiz7LqX0QrO5pTOOhv5LSr3JlBJR+b1ePlkURVh+nq9PAubXOD/Lsu9TSi+WqSs96M3mY7cPHDj09MmTc2VLR+Ls2TfZtWsvp05dCsk/c+YE27ZtZ27u05D8+fk3mJp6Miz/3Lm36PV6nD+/GJbf7a6ysHA9JP/ChXdZWbkbln/t2gI3b/5wJ8/XpsvUNcsGNRqNTqs1S6s1W7Z0JC5efK9otWYnovIvX36/OHbseFj+lSunOXr01bD3/+rVjzh48HBo/s6de4pWa7b0TmoUFhc/JqVeWP6tWz+ztPRTJ8/L1WXjaUfSo8RBl2rAQZdqwEGv0MzMBDMzIV/tVHMOeoVu3CiiW1BNOehSDTjoUg046FINOOgV+mchzgU5Va30L+M0PBfjFMU9ulQDDrpUA0McuhdZu71Mu708+m4eQko9IvPzPA/NX19fC81fW+uG53c6fwXmr9Ltrobl93OL0jvoYa5HX04pbS9bNypZ1iClXlQ8WZaRUgrLl7Isu5tSeqJMzTDLv88DW4eo25i5mVWpfcDfwB+beI3N2AusA78H5U8DKTB/N/2vfLcD87cAvwXlP0X/8/9rUD70P/8/BuY/lOvAy9FNSBqfZ4A7wLcMdzQh/d/tBg5FNzFuX9M/bF8B3g7uRYpwAqj8f7iqPL32CnBk8HgSmB/cSxqzqga9AXwC7Niwbd9gm6Qxq2rQPwD2P7CtAbwGPFdRD1JtVTHoO4AP+fdTctPAlxX0INVaFRe1PAt8Dvw5eP468Av3zwNOAY8D7Qp6kWqpikH/Bnhnw/M9wBfAZxVkS8KLWqRaiLoefT/wUlC2FOnBRelKRAz6EnB8cJPq6KvoBiRJkiRJkiRJkiRJkiRJkiRJinYPfBvpK76naVsAAAAASUVORK5CYII=" alt="avatar"></p>
<p>再写入2个元素，分别是2 &amp; 3 — 被追加在1之后：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAA2CAYAAADuxoTyAAAABmJLR0QA/wD/AP+gvaeTAAAED0lEQVR4nO3cb2hVdRzH8bfnzg1la7aLuoa2DEeQ9odle5APbHi5UPTEYDAkRKjGcNKjzP3JP6m7zYTEBxNBBJMWQ5+0B1GMovUoEGewwih0Y2voWK3d/cF27z3nd3uwVUOCPHe752eczwvG7j3wvZ8v4345v3PP/Q1ERERERERERERERERERERERERERERERB4sK/wWOI4zYIx5qqBg5Ww+GvovxnjFxhhs5XueW5zNZq3lu26mGFB+iPMdx/neGPO0nzrfg15QUHh78+atj+zd2+y3dFkcOvQa69dvZP/+963kt7XtpqRkDc3NZ63kt7TUU1paZi3/yJE9eJ7HiRNd1vJTqTk6Oi5byW9vb2BmJmkt/+LFDm7e/OGO66Yr/NQV+A2KRCKzsVgdsVid39JlkUg0ZmOxuhW28k+deitbW7vLWv6ZM++wfftL1v7+58+/R1XVM1bz167dkI3F6nyfpJZDV9eHGONZyx8dvcXQ0I+zruuvzslPOyLyINGgi4SABl0kBDToIiHg+8M4yc3ExBidnW309/fR03PLSg9Xr35Fb283xngUFa3i4MHOQPOHh3+iq+s0nueSyaQ4evQjHEfnmiBo0AMSjZZz+PAFGhpetNZDTc1Oamp2AtDUFOfu3RlWry4JLL+y8glaW88BcODAqySTv1FWti6w/DDToIdQX9+nbNnyfKBD/pdr176mp+cCjhPRkAdI66aQuXLlLIODN9i3r91K/rZttRw//jHRaDkDA99a6SGMNOgBSadTJBKNjIz8TCLRyPj4aOA99PZ2c+nSB4yNjZBINDI1NRFo/vXr33DyZBPHjr1OMvkrVVW+vsUpS6Cle0AKC4tobT339zWqDfF4PfF4vbX86uodVFfvsJYfZjqji4SABl0kBHJYumed6elJpqcnl7+b+2CMh81813Wt5mcyaav56XTKev7s7JTF/DlSqTlr+fO5Wd8n6Fz2o08aY9b4rVsujhPBGM9WPI7jYIyxli/iOE7SGPOwn5pctto9CazKoW5xZnYJ9ZXAH8D4El5jKTYCGWDMUn4FYCzmlzN/yXfbYv5K4BdL+euYf/8PW8qH+ff/DYv59+Uy8ILtJkQkfx4F7gDfkdtqQuT/rhzYaruJfPuS+WX7DPCG5V5EbNgNBP5/uIK8vRYHnl14XAy0LPwWkTwLatAjwGkguuhY5cIxEcmzoAb9bWDTPcciwMvA4wH1IBJaQQx6FHiXf78lVwF8HkAPIqEWxKaWx4Bu4PeF568Ag/xzH7AUeAiYDqAXkVAKYtD7gTcXPd8AfAZ8EkC2iKBNLSKhYGs/+ibgOUvZIjbd+6F0IGwM+hCwa+FHJIy+sN2AiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIhtfwJR60YLmg6u9QAAAABJRU5ErkJggg==" alt="avatar"></p>
<p>如果两个元素被处理，那么是缓冲区中最老的两个元素被移除。在本例中，1 &amp; 2被移除，缓冲区中只剩下3:</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAA2CAYAAADuxoTyAAAABmJLR0QA/wD/AP+gvaeTAAADmUlEQVR4nO3cT2gcZRjH8e87s7spSchhDV1qLGtaDCqGXlYqHkqlIQeNB20LhYI99BAxFFrBBkEQC01rrS2lFEpPVm9FKNiDp0rswUOJFfHgH0REUYtHia3Z2ZnXw6YQiofMZDNP5f19YA67y7u/h2UfZt7ZfV8QEREREREREREREREREREREREREREREXmwuLwD4rjyhXNufD2KWQ3v/QbnXAa0bfKzDc5FZvlZlvVFUQSwZJOf9kVRbJlfi6I4Av6xyc9qUeRicHct8gG899+kaefZPGMqeUOq1erwzp0vDe7Y8WLeoT1x/Pi03759ojIxsbdmkX/ixGt+fPyZytTUKyb5p04dYuvWp9i9e7pqkX/mzOs0GpvZv/+ISf7582/S3z/gDx58a9Ai/9Kld0iSJT8zM2eSf+PGNebnrw6naSfXuNyNDjA2to3JyX1Fhq7ZyZMzjI4+aZZ/+vRhms0xs/xz5476kZEtzir/4sW3aTQe8ZOT+3JfDfbC5cvvMjRUN/v8r1y5wNLSXbP827d/YX7+au5x0TrUIiIPGDW6SADU6FKqVsvRajmmpppcv/6xdTnBKDRHFylqYcHjvefWrc+Znd3Lrl17rEsKgs7oUjrnHHFcoV7faF1KMHRGl9K1Wo5arY9jxz6yLiUYOqNL6W7eTDl79hpzc9PWpQRDZ3QpVavlcM5Rrzc4cGDWupxgqNGlVAsL3rqEIOnSXSQAanSRAKjRRQJQaI6eJG3u3FnsdS2r5Ol0ErN87+3z07RjmJ+RpqlZfpbZ52dZZpafJMVWR+degVSt1r5NkvbjhdJ6II4r5F2i19v8mDRNzfKdc3ivG1ohq1Zr3yVJ+4k8Y4osNdwGDBQYtzJzLd/ULcAi8Oca3mMtHqW76cIfRvmbgQz4zSh/hO6U71ej/E1AH/CzUf5GYBD4ySgf4G/ga8P8VXkPeNq6CBFZP03gd+Aril1NiPzfPQQ8Zl3EevuM7mX7IvCqcS0iFvYAH5YdWubPa88B9zaVHACOAkMl5osEq6xGj4ELwPCK55rA+yXliwStrEZ/g25j35/9PAHMV0SsldHodeAI0P8frz2MwXxFJDRlrF4bBT5Y8fgF4Efg++XHbbpz9b9KqEUkSGU0+pfLxz2bgE8A7QwoUhItahEJgNXGE026f6UVCc39N6VLYdHoPwAvLx8iIfrUugAREREREREREREREREREREREREREREREWv/AudC6d2T9CnNAAAAAElFTkSuQmCC" alt="avatar"></p>
<p>如果缓冲区中有7个元素，则是满的：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAA2CAMAAADZGHTAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACB1BMVEUAAAADAwQEBAUDAwQEBAUDAwMCAgMEBAUCAgICAgIEBAUCAgMEBAQICAkLCw4NDREjIysbGyEODhISEhcXFx1CQlI1NUIpKTMODhERERYWFhw/P08yMj8nJzEFBQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABISFqGhqdCQlI6OkkQEBQzM0AUFBkrKzYZGSAgIChubonMzP9jY3xZWW9OTmIeHiYnJzAwMDy6uug9PUwICAoAAAAPDxN+fp0NDRAbGyKgoMgYGB6JiauurtoCAgNGRlc5OUe+vu1vb4tRUWWiossKCgycnMOdncTLy/6Zmb8ODhIpKTOWlrwiIiojIyxgYHgJCQtGRlgKCg2qqtQSEheQkLRHR1liYnuvr9vKyvwFBQaKiq2bm8IGBgeIiKpCQlNuborJyfuMjK8vLztpaYNVVWoODhE3N0XKyv2VlboBAQGfn8caGiEMDA9ra4YiIiuamsALCw4HBwk8PEsTExhtbYgCAgIcHCOOjrLCwvNfX3dLS14dHSQlJS4uLjoDAwQDAwP///+Z/x/0AAAAS3RSTlMAxvP7+fv6+vr5+/n82v7+/v7+/v7+/v7+/v7+/v7XLzo7XFBaU1dVizUf5s8BEyW+9GhUokHr3g4D1v2bePXlEunHM4nUsINzfMWAuOuUAAAAAWJLR0SsV2XyiwAAAAd0SU1FB+EIBxY2Ivi8HqwAAAIrSURBVGje7ZnXUxNRGEcpgiAgIiBgIaFXRQSRIkpZFAgaKaEo6JUgXcNGmsEQkA5KaKGJXRDhnySML4iT33Xui7Pud952ztyZPXPbzK6bG0EQBEEQBEEQisXdA+N5Ansvjvc+ib0Px/uewt7PnxPg7jI9QFcBOX0P+8D72OsfYF9ZhX31GexrgrDXBbhON9RCztZhH1yPfUgD9g9DsX90DvvGMOwNlE7pIL3p8ROG0hljT1F6s17fjNINxpZnMJ2x1jaY3t4B050vyMTSO7u6ObP+/AVKN5pMRpTeI5sb8ay/7NXDdB3D6cKz3mfmLfj+AZQ+aDK9QumWoddWzoKXB1H6sI2Tbm0ZEUvvGR16A9PHbOMovW1iYhLv9ak+nM6mZ1D67BxOr337rlIsfd4sW2G6fQEec0ZZXoTp3UudOH15ZRGlO47t5T/Sx0cE01fX1jdg+uZ7mG7Z2rKgdPbhYxM+5hyfPuMTnrPgv3z9RpcbpVM6pR9Nt3+HhG9jH7GA/fkd7H9cwH73IvY/L2Fvd50eyTB7HL/P8Q72j4l0ma7R/k7UsefoGC0kNg77+ATsE+Kxj4vFPiYae63mr7/aJCap9XtVckrqZUUHXEkTHXmVpV9TdHpGpuDA61mM3chWY3pOrvNIzLupxvT8W4fXwe009aUXFP66CovUl14sSVLJHUm6m62+Be8kM0PZtzOlC6WXahRNqXh6WbnCKaNfyARBEARBEATx/3AAJRt0vv4uu6MAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDgtMDdUMjI6NTQ6MzQrMDA6MDBottpRAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA4LTA3VDIyOjU0OjM0KzAwOjAwGeti7QAAAABJRU5ErkJggg==" alt="avatar"></p>
<p>如果缓冲区是满的，又要写入新的数据，一种策略是覆盖掉最老的数据。此例中，2个新数据— A &amp; B — 写入，覆盖了3 &amp; 4:</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAA2CAYAAADuxoTyAAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH2wQHAzEy0LYwXgAABX5JREFUeJzt3H1I1HcAx/G3v7OwsJW1yqKHNeyf0dyog0Jpy7TBajB6kJXJqG7LapFtPWBPRA9mrSgS1gPZM9Ylwf4a+TAqFg0CR/TABj1SWeZs1tRV1t3v9oda0gbrTL/fxn1ecHgefH1/Pf3e/e73u9+BiIiIiIiIiIiIiIiIiIiIiIiIiIiIiMjrJSrcAY7jnHdd993o6A717TGh/+K6wVjXdbHVDwYDsaFQyFo/EHgaC6gfwX3HcS64rpsYzriwF3p0dMc7CQlD+kyblhPu0DaxYkUmvXv3Z+7cPCv9Zcsy6NKlGzk526z0lyyZTNeu3a31V678nGAwyNq1hdb6DQ2PWb++yEo/N3cmdXUPrPX37VvPlSsXKwOBJ33DGRcdbsjj8dSnpaWTlpYe7tA2sW7drFBaWnqUrf7GjfNCKSnjrfW3bl1McvLH1u7/XbtWMXjwe1b7PXv2C6WlpYf9JNUWCgs347pBa/2Kiqtcv/5bfSAQ3jinfaYjIq8TLXSRCKCFLhIBjC70e/cqmTNnDCNGdMTrNf8Sx+uNenZJTX3TeP/o0e2kpMSRkhLH0aPbjff37s0jJSWOsWP7cfbsKeP96uo7DB/egerqO8bb8PzvP3p0d/z+fKtzaL6YEvbOuFeRlzebmJhOHD/+B507dzGZBqC8PATAwYObuHnzkvF+fv5iduw4AcCsWaOZNGm20X5BwRp27foJgA0bvmL//jNG+2VlRwiFXMrKisjImG+03ay8PMSlS+fw+ZKZPHmetTmYZvQZ/cyZMny+5VYWeUulpX7GjPnMeDc+fsCz6336DDTenzIlm6ysURw48C2XL58z3i8uPkxGxteUlBw23n5RXFwva+2RI2MZN24AJ058b6xpdKG7bpDCws2MHBnLtm3LTaafuXXrClVVFXi9o4y3s7JW4fMl4/Mlk5W1ynh/7tw8Tp2qZ+rUb/B4jG7MUVFxlbt3bzJnTi6VlTe4ffua0X4zrzeKzMyhTJ++xEq/vDzEyZMPWLQon9zcmca6Rhd6QkIimZkL2bnzJIcObTGZfqa01E9q6kQcx2O8vXq1j927T7N792lWr55hvA/w8GEdBQVrGD58jNFuaamfmpoqkpJiqKmpoqTEb7TfrLw8hN9/gfz8xVb6AFFRUURHdyAUMrcJb/Rhff78TSxY8CmPHv1l7RG1pMRPTs53VtoTJsxk9uxUACZOzDLe93qj8HiiGTbsQ1asKDDaLi4+zJ49p0lMTOL8+Z/Jzc1ixoylRucAjfdBTExnxo//0ni7uQ/Qu3d/li7dYaxrdKEPHfoBx47dNpn8h6Kii9ba2dkbyc7eaK1vYydQs5b3e2JiEkeOXDA+B5u/v+056Di6SATQQheJAK3YdA85tbX3qa293/azeQmuG8RmPxAIWO0/ffrEav/Jkwbr/fr6Py32H9PQ8Nhav7EbCvsJujXno993XbdbuOPaiuN4cN2grTyO4+C6rrW+iOM4D1zXjQtnTGveg/cO0KkV41o2X2WPxEDgEfD7K/yMV9EfeArctdTvC7gW+/E0vuSz8z7Wxn4H4Jalfi8a//9vWOpD4///rxb7L6UISLI9CRFpPwOASuAsrduaEPm/iweG2J5Ee/uRxs32OuALy3MRsSEDMP45XCYPr30EvN90PRZY0vRVRNqZqYXuAbYAPVrcNrDpNhFpZ6YW+kJg0Au3eYCxwNuG5iASsUws9B7Acv79kFxf4JiBOYhENBMntbwF+IGapu8/Aa7x/DhgV+ANoNbAXEQikomF/gvQ8pzAfsAPwCEDbRFBJ7WIRASznyf03CBgmKW2iE0v7pQ2wsZCvw6Mb7qIRKJi2xMQEREREREREREREREREREREREREREREbHtbyz9xu0l6sXCAAAAAElFTkSuQmCC" alt="avatar"></p>
<p>也可以采取其他策略，禁止覆盖缓冲区的数据，采取返回一个错误码或者抛出异常。</p>
<p>最终，如果从缓冲区中移除2个数据，不是3 &amp; 4 而是 5 &amp; 6 。因为 A &amp; B 已经覆盖了3 &amp; 4：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAA2CAYAAADuxoTyAAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH2QcSChYB192k1AAABNtJREFUeJzt3G1IVXcAx/Gv59rYwFbWKnt0jXozWhvsDkHfdPM6WPgml1vJaDG3zCa5wYikRWSZNcdGvliBDz3Ruolvt/kwGGwIG9wRzdigR1b24ARrKi313nP24mpJDNY1/f+L8/vAxXsv/P3+vd4/53jOPYKIiIiIiIiIiIiIiIiIiIiIiIiIiIiIyOMlJdkBjuP85rruS6mpUwYmY0L/x3Xjaa7rYqsfj8fSPM+z1o/FhtMA9X3cdxyn03Xd5cmMS3qhp6Y+dX3JkmVzN2zYluzQCbFjxzvMmbOQsrJqK/3t24uYOnU627Z9ZaVfUbGWadNmWOvv3LmeeDzOnj0nrPUHB++yb1+TlX5V1Ub6+29b6x85so8LF87eiMWG5iUzLjXZUCAQGAiHCwmHC5MdOiH27t3khcOFKbb6NTVbvFBotbX+gQNbycl5w9rrX1e3i6VLX7banzVrgRcOFya9kZoIJ058gevGrfW7ui5y+fIfA7FYcuOcyZmOiDxOtNBFfEALXcQHfLXQg8GUe7fc3OeM95ubDxIKpRMKpdPcfNB4//DhakKhdFatWsDp0z8Z7/f0XCcrawo9PdeNt+H+73/lyhlEIrVW5mBL0gfjnmTRqAfA8eOfc+XKOeP92tqtHDr0AwCbNq1kzZpSo/36+t3U1f0IwP79H3L06C9G++3tp/A8l/b2JoqKPjLaHhWNepw7d4bi4hzWrt1iZQ42+GqLPqqtLUJe3tvGuxkZi+7dnzs303h/3bpySkpWcOzYZ5w/f8Z4v6XlJEVFH9PaetJ4+0Hp6bNtT8EoX23RAa5evUB3dxfB4Arj7ZKSXRQX5wBQVWX+zV5WVk1ZWTWdnT/T0fGt0XZX10Vu3rzC5s1V5Odncu3aJebPf8HoHCCx++44DhUVh4y3bfLdFr2tLUJu7ps4TsB4u7KymIaGDhoaOqisfM94H+DOnX7q63eTlZVntNvWFqG3t5vs7Kfp7e2mtTVitD8qGvWIRDqprd1qpW+L7xZ6a2uEvLy3rLQLCjZSWppLaWkuBQUbjfeDwRRCoRkMDw8a/2RdS8tJGhs7iEY9Ghs7rO2+B4MprF//Gvn571rp2+K7XfemprPW2uXlNZSX11jrjx6MtGHs6758eTanTnUan4PNn982323RRfxIC13EB8ax6+45fX236Ou7NfGzeQiuG8dmPxaLWe0PDw9Z7Q8NDVrvDwz8bbF/l8HBu9b6ia6X9AZ6PNej33Jdd3qy4yaK4wRw3bitPI7j4Lqutb6I4zi3XddNT2bMeC61exF4ZhzjxjYf5ahIJvAP8NcjfI9HsRAYBm5a6s8DXIv9DBJ/8tn5HGuiPwW4aqk/m8T7/09LfUi8/3+32H8oTUC27UmIyORZBNwATjO+vQmRJ10GsMz2JCbb9yR22/uB9y3PRcSGIsD4/+EyeXrtdeCVkftpQMXIVxGZZKYWegD4Epg55rnMkedEZJKZWuifAIsfeC4ArALMX8Ik4jMmFvpM4FP++5TcPOA7A3MQ8TUTF7U8D0SA3pHH+cAl7p8HnAY8C/QZmIuIL5lY6L8CH4x5vAD4BvjaQFtE0EUtIr5g63r0xcCrltoiNj14UNoIGwv9MrB65CbiRy22JyAiIiIiIiIiIiIiIiIiIiIiIiIiIiIiYtu/k0ORWCvP+9oAAAAASUVORK5CYII=" alt="avatar"></p>
<h2 id="Linux内核的kfifo"><a href="#Linux内核的kfifo" class="headerlink" title="Linux内核的kfifo"></a>Linux内核的kfifo</h2><p>在Linux内核文件 kfifo.h 和 kfifo.c 中，定义了一个先进先出圆形缓冲区实现。如果只有一个读线程、一个写线程，二者没有共享的被修改的控制变量，那么可以证明这种情况下不需要并发控制。kfifo就满足上述条件。kfifo要求缓冲区长度必须为2的幂。读、写指针分别是无符号整型变量。把读写指针变换为缓冲区内的索引值，仅需要“按位与”操作：（指针值 按位与 （缓冲区长度-1））。这避免了计算代价高昂的“求余”操作。且下述关系总是成立：</p>
<blockquote>
<p>读指针 + 缓冲区存储的数据长度 &#x3D;&#x3D; 写指针</p>
</blockquote>
<p>即使在写指针达到了无符号整型的上界，上溢出后写指针的值小于读指针的值，上述关系仍然保持成立（这是因为无符号整型加法的性质）。 kfifo的写操作，首先计算缓冲区中当前可写入存储空间的数据长度：</p>
<blockquote>
<p>len &#x3D; min{待写入数据长度, 缓冲区长度 - （写指针 - 读指针）}</p>
</blockquote>
<p>然后，分两段写入数据。第一段是从写指针开始向缓冲区末尾方向；第二段是从缓冲区起始处写入余下的可写入数据，这部分可能数据长度为0即并无实际数据写入。</p>
<h3 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">kfifo</span> &#123;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *buffer;    <span class="comment">/* the buffer holding the data */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> size;    <span class="comment">/* the size of the allocated buffer */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> in;    <span class="comment">/* data is added at offset (in % size) */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> out;    <span class="comment">/* data is extracted from off. (out % size) */</span></span><br><span class="line">    <span class="type">spinlock_t</span> *lock;    <span class="comment">/* protects concurrent modifications */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>先看一下基本定义，buffer是数据缓存区，size是缓存区长度，in&#x2F;out是输入输出指针（也就是上文提到的readIndex和writeIndex）位置（%size后就是真实指针了）。</p>
<p>size需要检测是否为2的次幂，不是的话需要升到2的次幂。方便后续计算。（可以看内核的roundup_pow_of_two实现）</p>
<p>in、out每次操作都+对应的读写长度，通过取模运算回落size区间。</p>
<blockquote>
<p>data :&#x3D; kfifo.buffer[ kfifo.out % kfifo.size: kfifo.in % kfifo.size]</p>
</blockquote>
<h3 id="快速取膜"><a href="#快速取膜" class="headerlink" title="快速取膜"></a>快速取膜</h3><p>kfifo使用了二进制的位运算实现了2的幂取模运算，并且利用了无符号数的溢出做回绕。很精妙的设计。</p>
<p>首先，缓存区尺寸要取整为2的幂次，这样可以利用位运算进行取模。</p>
<p><code>M mod N = M &amp; (N-1)</code></p>
<p>当N为2的幂次时有效。</p>
<h3 id="回绕"><a href="#回绕" class="headerlink" title="回绕"></a>回绕</h3><p>无符号数溢出后，就会变成0从头开始，借助这个特性可以绕开逻辑判断。</p>
<h1 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h1><ul>
<li>golang实现</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> KfifoBuffer <span class="keyword">struct</span> &#123;</span><br><span class="line">	size       <span class="type">uint32</span></span><br><span class="line">	readIndex  <span class="type">uint32</span></span><br><span class="line">	writeIndex <span class="type">uint32</span></span><br><span class="line">	data       []<span class="type">byte</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(size <span class="type">uint32</span>)</span></span> *KfifoBuffer &#123;</span><br><span class="line">	<span class="comment">// if size not pow of 2 round up it</span></span><br><span class="line">	<span class="keyword">if</span> (size &amp; (size - <span class="number">1</span>)) != <span class="number">0</span> &#123;</span><br><span class="line">		size = size | (size &gt;&gt; <span class="number">1</span>)</span><br><span class="line">		size = size | (size &gt;&gt; <span class="number">2</span>)</span><br><span class="line">		size = size | (size &gt;&gt; <span class="number">4</span>)</span><br><span class="line">		size = size | (size &gt;&gt; <span class="number">8</span>)</span><br><span class="line">		size = size | (size &gt;&gt; <span class="number">16</span>)</span><br><span class="line">		size++</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &amp;KfifoBuffer&#123;</span><br><span class="line">		size:       size,</span><br><span class="line">		readIndex:  <span class="number">0</span>,</span><br><span class="line">		writeIndex: <span class="number">0</span>,</span><br><span class="line">		data:       <span class="built_in">make</span>([]<span class="type">byte</span>, size),</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(l, r <span class="type">uint32</span>)</span></span> <span class="type">uint32</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> l &gt; r &#123;</span><br><span class="line">		<span class="keyword">return</span> r</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> l</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(k *KfifoBuffer)</span></span> Write(data []<span class="type">byte</span>) (n <span class="type">uint32</span>, err <span class="type">error</span>) &#123;</span><br><span class="line">	dataLen := <span class="type">uint32</span>(<span class="built_in">len</span>(data))</span><br><span class="line">	dataLen = min(dataLen, k.size-k.writeIndex+k.readIndex)</span><br><span class="line">	<span class="comment">// l is buffer rest length</span></span><br><span class="line">	l := min(dataLen, k.size-(k.writeIndex&amp;(k.size<span class="number">-1</span>)))</span><br><span class="line">	<span class="built_in">copy</span>(k.data[k.writeIndex&amp;(k.size<span class="number">-1</span>):], data[:l])</span><br><span class="line">	<span class="built_in">copy</span>(k.data[:dataLen-l], data[l:])</span><br><span class="line">	k.writeIndex += dataLen</span><br><span class="line">	<span class="keyword">return</span> dataLen, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(k *KfifoBuffer)</span></span> Read(buffer []<span class="type">byte</span>) (n <span class="type">uint32</span>, err <span class="type">error</span>) &#123;</span><br><span class="line">	dataLen := <span class="type">uint32</span>(<span class="built_in">len</span>(buffer))</span><br><span class="line">	dataLen = min(dataLen, k.writeIndex-k.readIndex)</span><br><span class="line">	l := min(dataLen, k.size-(k.readIndex&amp;(k.size<span class="number">-1</span>)))</span><br><span class="line">	<span class="built_in">copy</span>(buffer, k.data[k.readIndex&amp;(k.size<span class="number">-1</span>):k.readIndex&amp;(k.size<span class="number">-1</span>)+l])</span><br><span class="line">	<span class="built_in">copy</span>(buffer[l:], k.data[:dataLen-l])</span><br><span class="line">	k.readIndex += dataLen</span><br><span class="line">	<span class="keyword">return</span> dataLen, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关于无锁队列的话题，一篇文章讲不完，以后可能会开多个文章分开来讲</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/16/gRPC-learn-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/16/gRPC-learn-2/" class="post-title-link" itemprop="url">gRPC学习 2 开始使用gRPC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-16 22:32:04" itemprop="dateCreated datePublished" datetime="2022-03-16T22:32:04+08:00">2022-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-17 00:19:27" itemprop="dateModified" datetime="2022-03-17T00:19:27+08:00">2022-03-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="学习gRPC-02-开始使用gRPC"><a href="#学习gRPC-02-开始使用gRPC" class="headerlink" title="学习gRPC 02 开始使用gRPC"></a>学习gRPC 02 开始使用gRPC</h1><p>为什么要把这部分的内容作为文档保留下来，因为学习的过程中需要一些实践或者总结输出来巩固自己的记忆。就像我在周末刚刚完成书中第二章的实践，仅仅过去两天多，这部分内容和实践过程就已经被我忘的七七八八了。所以很多时候留存一个真实的文档一个重要的目的是在留存文档的过程中重新审视自己在实践中遇到的问题和坑，达到温故而知新的效果。</p>
<p>好，接下来是正文的内容</p>
<p>我们这次实验的目录形式大致如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> hallwood@thinkpadt480s  ~/Code/tmp/protoLearning20220313 $ tree ./</span><br><span class="line">./</span><br><span class="line">├── ecommerce_proto_files</span><br><span class="line">│   └── product_info.proto</span><br><span class="line">└── productinfo</span><br><span class="line">    ├── client</span><br><span class="line">    │   ├── ecommerce</span><br><span class="line">    │   │   └── product_info.pb.go</span><br><span class="line">    │   ├── go.mod</span><br><span class="line">    │   ├── go.sum</span><br><span class="line">    │   └── productinfo_client.go</span><br><span class="line">    └── service</span><br><span class="line">        ├── ecommerce</span><br><span class="line">        │   └── product_info.pb.go</span><br><span class="line">        ├── go.mod</span><br><span class="line">        ├── go.sum</span><br><span class="line">        ├── main.go</span><br><span class="line">        └── productinfo_service.go</span><br><span class="line"></span><br><span class="line">6 directories, 10 files</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在实验开始之前，我们假设你的文件夹是干净的，实验完成之后会渐渐充实成上述的内容</p>
<p>先将当前目录记录为fakeroot</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ export FAKEROOT=$PWD</span><br></pre></td></tr></table></figure>

<h2 id="首先，要定义服务内容"><a href="#首先，要定义服务内容" class="headerlink" title="首先，要定义服务内容"></a>首先，要定义服务内容</h2><p>我们需要简单知道我们要实现一个什么样的微服务，先假定我们需要一个产品信息的微服务，这个产品信息需要具有以下属性</p>
<ul>
<li>id 用来表明这个产品的唯一标识</li>
<li>name 用来表明这个产品的名称</li>
<li>description 产品描述</li>
<li>price 价格</li>
</ul>
<p>所以，我们定义出了一种message类型</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">message </span><span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="type">string</span> id = <span class="number">1</span>;</span><br><span class="line">    <span class="type">string</span> name = <span class="number">2</span>;</span><br><span class="line">    <span class="type">string</span> description = <span class="number">3</span>;</span><br><span class="line">    <span class="type">float</span> price = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们再定义一种类型，封装产品的唯一标志</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">message </span><span class="title class_">ProductID</span> &#123;</span><br><span class="line">    <span class="type">string</span> value = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义完了message类型，接下来要定义交互的服务</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">service </span><span class="title class_">ProductInfo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">rpc</span> addProduct(Product) <span class="keyword">returns</span> (ProductID)</span>;</span><br><span class="line">    <span class="function"><span class="keyword">rpc</span> getProduct(ProductID) <span class="keyword">returns</span> (Product)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于这一次实验只是实现一个简单的demo，所以在服务定义方面只做一个简单的getter和setter</p>
<p>完整的proto文件内容如下</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">syntax = <span class="string">&quot;proto3&quot;</span>;</span><br><span class="line"><span class="keyword">package</span> ecommerce;</span><br><span class="line"><span class="keyword">option</span> go_package = <span class="string">&quot;/ecommerce&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">message </span><span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="type">string</span> id = <span class="number">1</span>;</span><br><span class="line">    <span class="type">string</span> name = <span class="number">2</span>;</span><br><span class="line">    <span class="type">string</span> description = <span class="number">3</span>;</span><br><span class="line">    <span class="type">float</span> price = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">message </span><span class="title class_">ProductID</span> &#123;</span><br><span class="line">    <span class="type">string</span> value = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">service </span><span class="title class_">ProductInfo</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">rpc</span> addProduct(Product) <span class="keyword">returns</span> (ProductID)</span>;</span><br><span class="line">    <span class="function"><span class="keyword">rpc</span> getProduct(ProductID) <span class="keyword">returns</span> (Product)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需要注意的是，由于我们在实践过程中使用golang实现，在最新版本的protoc-gen-go插件中要求proto中定义go_pacakge，这里我们定义成ecomerce 然后编译要求前面必须有斜杠</p>
<p>接下来我们就将上述内容写到product_info.proto里面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd $FAKEROOT</span><br><span class="line">$ mkdir -p ./ecommerce_proto_files</span><br><span class="line">$ vim ./ecommerce_proto_files/product_info.proto # 在vim 中写下上述对应的内容</span><br></pre></td></tr></table></figure>

<h2 id="安装golang-gRPC插件"><a href="#安装golang-gRPC插件" class="headerlink" title="安装golang gRPC插件"></a>安装golang gRPC插件</h2><p>首先，需要安装protobuf的lib<br>以manjaro linux为例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S protobuf</span><br><span class="line">resolving dependencies...</span><br><span class="line">looking for conflicting packages...</span><br><span class="line"></span><br><span class="line">Packages (1) protobuf-3.19.4-1</span><br><span class="line"></span><br><span class="line">Total Installed Size:  8.78 MiB</span><br><span class="line"></span><br><span class="line">:: Proceed with installation? [Y/n] y</span><br><span class="line">(1/1) checking keys in keyring                     [##] 100%</span><br><span class="line">(1/1) checking package integrity                   [##] 100%</span><br><span class="line">(1/1) loading package files                        [##] 100%</span><br><span class="line">(1/1) checking for file conflicts                  [##] 100%</span><br><span class="line">(1/1) checking available disk space                [##] 100%</span><br><span class="line">:: Processing package changes...</span><br><span class="line">(1/1) reinstalling protobuf                        [##] 100%</span><br><span class="line">:: Running post-transaction hooks...</span><br><span class="line">(1/1) Arming ConditionNeedsUpdate...</span><br><span class="line">$ protoc --version</span><br><span class="line">libprotoc 3.19.4</span><br></pre></td></tr></table></figure>

<p>最后如果能够正常调用protoc命令并且展示出他的版本的时候，说明基本的protoc库安装好了</p>
<p>如果你在CN，那么由于一些众所周知的原因，你在执行go get的时候应该无法顺畅的执行，这时候你需要设置一下镜像代理，具体方法见链接<a target="_blank" rel="noopener" href="https://goproxy.cn/">goproxy.cn</a></p>
<p>安装grpc相关模块的go代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go get -u google.golang.org/grpc</span><br><span class="line">go get -u github.com/golang/protobuf/proto-gen-go</span><br></pre></td></tr></table></figure>

<h2 id="完成server端代码编码"><a href="#完成server端代码编码" class="headerlink" title="完成server端代码编码"></a>完成server端代码编码</h2><p>首先创建productinfo文件夹并且初始化service module</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd $FAKEROOT</span><br><span class="line">$ mkdir -p ./productinfo/service</span><br><span class="line">$ cd ./productinfo/service</span><br><span class="line">$ go mod init productinfo/service</span><br></pre></td></tr></table></figure>
<p>好了，现在简单的go module 就初始化好了</p>
<p>现在要在service module中使用protoc工具生成对应的golang接口代码，先回到项目根目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cd $FAKEROOT</span><br><span class="line">$ tree ./</span><br><span class="line">./</span><br><span class="line">├── ecommerce_proto_files</span><br><span class="line">│   └── product_info.proto</span><br><span class="line">└── productinfo</span><br><span class="line">    └── service</span><br><span class="line">        └── go.mod</span><br></pre></td></tr></table></figure>

<p><strong>执行protoc命令生成golang pb交互代码</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ protoc --go_out=plugins=grpc:./productinfo/service  ecommerce_proto_files/product_info.proto</span><br></pre></td></tr></table></figure>

<p>执行之后，在service模块中会生成一个新的文件夹ecommerce并且包含一个新的go代码文件product_info.pb.go</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree ./</span><br><span class="line">./</span><br><span class="line">├── ecommerce_proto_files</span><br><span class="line">│   └── product_info.proto</span><br><span class="line">└── productinfo</span><br><span class="line">    └── service</span><br><span class="line">        ├── ecommerce</span><br><span class="line">        │   └── product_info.pb.go</span><br><span class="line">        └── go.mod</span><br></pre></td></tr></table></figure>

<p><strong>要注意，如果执行的protoc命令不是上述的命令而是下述命令的话</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ protoc --go_out=./productinfo/service  ecommerce_proto_files/product_info.proto</span><br></pre></td></tr></table></figure>

<p><strong>也可以在对应的位置生成一个同名的代码文件，但是参数中少了一个重要的条件</strong><code>plugins=grpc:</code><strong>最终生成的代码文件中只会有ProductId和Product的定义，而会缺少重要的rpc server和client的接口定义，所以这个地方需指明pluging&#x3D;grpc</strong></p>
<p>定义好了消息格式和接口之后就可以直接开始编码了</p>
<ul>
<li>product_info_service.go</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;context&quot;</span></span><br><span class="line">	pb <span class="string">&quot;productinfo/service/ecommerce&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gofrs/uuid&quot;</span></span><br><span class="line">	<span class="string">&quot;google.golang.org/grpc/codes&quot;</span></span><br><span class="line">	<span class="string">&quot;google.golang.org/grpc/status&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span> &#123;</span><br><span class="line">	productMap <span class="keyword">map</span>[<span class="type">string</span>]*pb.Product</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span></span> AddProduct(ctx context.Context, in *pb.Product) (*pb.ProductID, <span class="type">error</span>) &#123;</span><br><span class="line">	out, err := uuid.NewV4()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, status.Errorf(codes.Internal, <span class="string">&quot;Error while generating product Id, err: %s&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	in.Id = out.String()</span><br><span class="line">	<span class="keyword">if</span> s.productMap == <span class="literal">nil</span> &#123;</span><br><span class="line">		s.productMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]*pb.Product)</span><br><span class="line">	&#125;</span><br><span class="line">	s.productMap[in.Id] = in</span><br><span class="line">	<span class="keyword">return</span> &amp;pb.ProductID&#123;</span><br><span class="line">		Value: in.Id,</span><br><span class="line">	&#125;, <span class="literal">nil</span> <span class="comment">// status.New(codes.OK, &quot;&quot;).Err()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span></span> GetProduct(ctx context.Context, in *pb.ProductID) (*pb.Product, <span class="type">error</span>) &#123;</span><br><span class="line">	product_id := in.Value</span><br><span class="line">	<span class="keyword">if</span> out, ok := s.productMap[product_id]; ok &#123;</span><br><span class="line">		<span class="keyword">return</span> out, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span>, status.Errorf(codes.NotFound, <span class="string">&quot;Product not exists, input id is %s&quot;</span>, product_id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>main.go</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net&quot;</span></span><br><span class="line"></span><br><span class="line">	pb <span class="string">&quot;productinfo/service/ecommerce&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;google.golang.org/grpc&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	port = <span class="string">&quot;:19999&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	lis, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, port)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;failed to listen tcp port: %s, err: %v&quot;</span>, port, err)</span><br><span class="line">	&#125;</span><br><span class="line">	s := grpc.NewServer()</span><br><span class="line">	pb.RegisterProductInfoServer(s, &amp;server&#123;&#125;)</span><br><span class="line">	log.Printf(<span class="string">&quot;Start gRPC listener on port %s&quot;</span>, port)</span><br><span class="line">	<span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;Failed to serve: %v&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>由于本篇记录的重点是如何使用grpc，go代码不做过多的讲解，直接阅读展示的源码即可，完成上述两个代码之后，目录结构如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./</span><br><span class="line">├── ecommerce_proto_files</span><br><span class="line">│   └── product_info.proto</span><br><span class="line">└── productinfo</span><br><span class="line">    └── service</span><br><span class="line">        ├── ecommerce</span><br><span class="line">        │   └── product_info.pb.go</span><br><span class="line">        ├── go.mod</span><br><span class="line">        ├── go.sum</span><br><span class="line">        ├── main.go</span><br><span class="line">        └── productinfo_service.go</span><br></pre></td></tr></table></figure>

<p>由于我使用vscode进行编码，所以go.mod和go.sum是插件自动补齐和生成的，建议读者也使用类似工具来减少工作量</p>
<p>自此，一个监听19999 端口执行tcp的监听服务器就已经完成编码了</p>
<h2 id="完成client端代码编码"><a href="#完成client端代码编码" class="headerlink" title="完成client端代码编码"></a>完成client端代码编码</h2><p>在完成了server端之后，如何完成客户端的编码就快捷了不少，按照下列指令一步步执行即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ cd $FAKEROOT</span><br><span class="line">$ mkdir -p ./productinfo/client</span><br><span class="line">$ cd ./productinfo/client</span><br><span class="line">$ go mod init productinfo/client</span><br><span class="line">$ cd $FAKEROOT</span><br><span class="line">$ tree ./</span><br><span class="line">./</span><br><span class="line">├── ecommerce_proto_files</span><br><span class="line">│   └── product_info.proto</span><br><span class="line">└── productinfo</span><br><span class="line">    ├── client</span><br><span class="line">    │   └── go.mod</span><br><span class="line">    └── service</span><br><span class="line">        ├── ecommerce</span><br><span class="line">        │   └── product_info.pb.go</span><br><span class="line">        ├── go.mod</span><br><span class="line">        ├── go.sum</span><br><span class="line">        ├── main.go</span><br><span class="line">        └── productinfo_service.go</span><br><span class="line">$ </span><br></pre></td></tr></table></figure>

<p>自此，成功建立了一个新的go module productinfo&#x2F;client</p>
<p>然后用protoc命令生成新的客户端代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ protoc --go_out=plugins=grpc:./productinfo/client  ecommerce_proto_files/product_info.proto</span><br></pre></td></tr></table></figure>

<p>执行之后再在根目录执行tree命令查看目录结构如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ cd $FAKEROOT</span><br><span class="line">$ tree ./</span><br><span class="line">./</span><br><span class="line">├── ecommerce_proto_files</span><br><span class="line">│   └── product_info.proto</span><br><span class="line">└── productinfo</span><br><span class="line">    ├── client</span><br><span class="line">    │   ├── ecommerce</span><br><span class="line">    │   │   └── product_info.pb.go</span><br><span class="line">    │   └── go.mod</span><br><span class="line">    └── service</span><br><span class="line">        ├── ecommerce</span><br><span class="line">        │   └── product_info.pb.go</span><br><span class="line">        ├── go.mod</span><br><span class="line">        ├── go.sum</span><br><span class="line">        ├── main.go</span><br><span class="line">        └── productinfo_service.go</span><br></pre></td></tr></table></figure>

<p>最后进行gRPC客户端的编码</p>
<ul>
<li>product_info_client.go</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;context&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line">	pb <span class="string">&quot;productinfo/client/ecommerce&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;google.golang.org/grpc&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	server_addr = <span class="string">&quot;localhost:19999&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	conn, err := grpc.Dial(server_addr, grpc.WithInsecure())</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;Failed to connect addr: %s&quot;</span>, server_addr)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> conn.Close()</span><br><span class="line">	c := pb.NewProductInfoClient(conn)</span><br><span class="line"></span><br><span class="line">	ctx, cancel := context.WithTimeout(context.Background(), time.Second)</span><br><span class="line">	<span class="keyword">defer</span> cancel()</span><br><span class="line">	new_product := &amp;pb.Product&#123;</span><br><span class="line">		Name:        <span class="string">&quot;hallwood&#x27;s lepold fc660m&quot;</span>,</span><br><span class="line">		Description: <span class="string">&quot;this is a high end mechanical keyboard, with cherry silent red switchs&quot;</span>,</span><br><span class="line">		Price:       <span class="number">829</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	r, err := c.AddProduct(ctx, new_product)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;Failed to add new product, err is %v&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	log.Printf(<span class="string">&quot;Product id is %s, add new product success&quot;</span>, r.Value)</span><br><span class="line">	product, err := c.GetProduct(ctx, r)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;Failed to get product, err is %v&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	log.Printf(<span class="string">&quot;Product: %s&quot;</span>, product.String())</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这个客户端，简单生成了一个名为fc660m的商品存到服务端并且用服务端存储返回的id再次查询</p>
<p>执行完上述所有步骤之后，所有的文件的排布形式应当是如下形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">./</span><br><span class="line">├── ecommerce_proto_files</span><br><span class="line">│   └── product_info.proto</span><br><span class="line">└── productinfo</span><br><span class="line">    ├── client</span><br><span class="line">    │   ├── ecommerce</span><br><span class="line">    │   │   └── product_info.pb.go</span><br><span class="line">    │   ├── go.mod</span><br><span class="line">    │   ├── go.sum</span><br><span class="line">    │   └── productinfo_client.go</span><br><span class="line">    └── service</span><br><span class="line">        ├── ecommerce</span><br><span class="line">        │   └── product_info.pb.go</span><br><span class="line">        ├── go.mod</span><br><span class="line">        ├── go.sum</span><br><span class="line">        ├── main.go</span><br><span class="line">        └── productinfo_service.go</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="最后进行一个简单的测试"><a href="#最后进行一个简单的测试" class="headerlink" title="最后进行一个简单的测试"></a>最后进行一个简单的测试</h2><p>首先进入服务端的go.mod所在路径执行如下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go run ./main.go ./productinfo_service.go </span><br><span class="line">2022/03/17 00:11:09 Start gRPC listener on port :19999</span><br></pre></td></tr></table></figure>

<p>然后开启一个新的会话，进入客户端的go.mod所在路径执行如下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ go run ./productinfo_client.go</span><br><span class="line">2022/03/17 00:13:36 Product id is 786b9bcb-1619-426d-b2aa-39eb94006ef8, add new product success</span><br><span class="line">2022/03/17 00:13:36 Product: id:&quot;786b9bcb-1619-426d-b2aa-39eb94006ef8&quot; name:&quot;hallwood&#x27;s lepold fc660m&quot; description:&quot;this is a high end mechanical keyboard, with cherry silent red switchs&quot; price:829</span><br></pre></td></tr></table></figure>

<p>至此，所有的流程已经打通，一个简单的基于 grpc 服务端和客户端交互的demo就完成了</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/03/13/gRPC-learn-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/13/gRPC-learn-1/" class="post-title-link" itemprop="url">gRPC学习 1 简单认识gRPC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-13 18:13:24" itemprop="dateCreated datePublished" datetime="2022-03-13T18:13:24+08:00">2022-03-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-17 00:16:23" itemprop="dateModified" datetime="2022-03-17T00:16:23+08:00">2022-03-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="学习gRPC-01-简单认识gRPC"><a href="#学习gRPC-01-简单认识gRPC" class="headerlink" title="学习gRPC 01 简单认识gRPC"></a>学习gRPC 01 简单认识gRPC</h1><p>好久没有文档了</p>
<p>最近在学习如何使用gRPC，之前在做项目的时候曾经使用过这种工具来实现内部微服务之间的通信，但是由于一直没有系统性的学习和整理，所以总是不记得很多关键信息和步骤，使用的时候老是要去查，这一次专门写一个文档和说明将这部分内容保存下来</p>
<p>参考书籍是</p>
<p>《gRPC与云原生应用开发：以GO和Java为例》</p>
<h2 id="首先，什么是gRPC"><a href="#首先，什么是gRPC" class="headerlink" title="首先，什么是gRPC"></a>首先，什么是gRPC</h2><p>gRPC是一项进程间通信技术，可以用来链接、调用、操作和调试分布式异构应用程序。</p>
<p>在开发gRPC程序的时候，首先要定义服务接口，其中应该包含如下信息：</p>
<ul>
<li>消费者消费服务的方式</li>
<li>消费者远程调用的方式</li>
<li>调用这些方法所需要的参数和格式</li>
</ul>
<p>在服务定义中，使用的语言称之为<strong>接口定义语言（interface definition language, IDL）</strong></p>
<p>借助服务定义，可以生成服务端代码，它通过封装了一系列底层的接口使得调用过程看起来非常简单。同时，还可以生成客户端代码，封装抽象了客户端的通信过程，为不同的编程语言隐藏了底层级的通信逻辑。底层的gRPC框架帮开发者干复杂的脏活，并且保证可参数强校验，数据序列化，认证，网络通信，访问限制和可观察性等。</p>
<h2 id="为什么要用gRPC，他有哪些优势"><a href="#为什么要用gRPC，他有哪些优势" class="headerlink" title="为什么要用gRPC，他有哪些优势"></a>为什么要用gRPC，他有哪些优势</h2><ul>
<li>提供高效的进程间通信</li>
</ul>
<p>gRPC没有使用JSON或者XML这样的文本化格式，而是使用一个基于protocol buffers的二进制协议与gRPC的客户端进行通信。同时，gRPC在HTTP&#x2F;2上实现了protocol buffers，从而更快的处理进程间通信。</p>
<ul>
<li>具有简单且定义良好的服务接口和模式</li>
</ul>
<p>gRPC为应用程序开发提供里一种契约优先的应用开发模式。开发对接的客户端开发者和服务端开发者必须要定义服务接口，然后才能去处理实现细节，gRPC强制双方按照规矩行事，提供了简单一致，可靠可扩展的应用程序开发体验</p>
<ul>
<li>强类型</li>
</ul>
<p>因为使用了protocol buffers来定义gRPC服务，所以gRPC服务七月清晰定义了应用程序间进行通信的所有类型。这样一来可以在构建涉及到多个团队和微服务的云原生应用程序的时候，避免绝大多数运行时传参错误，使得风不是应用程序的开发更加稳定。</p>
<ul>
<li>支持多语言</li>
</ul>
<p>gRPC支持多种编程语言，基于protocol buffers的服务定义是语言中立的。</p>
<ul>
<li>支持双工流</li>
</ul>
<p>gRPC早客户端和服务端都提供了对流的原生支持，这些功能都被整合到了服务定义本身之中。所以基于此框架开发流服务端和流客户端都变得非常简单。与传统的RESTful服务消息风格相比，gRPC的关键优势是能够同时构造同步的请求-响应风格应用，以及基于流的应用。</p>
<ul>
<li>商业化、工程化特性</li>
</ul>
<p>gRPC内置认证、加密、弹性（截止时间和超时）、元数据交换、压缩、负载均衡、服务发相等特性</p>
<ul>
<li>与云原生生态兼容性良好</li>
</ul>
<p>gRPC是CNCF的一部分，大部分现代的框架和技术对gRPC提供了原生支持。CNCF下的很多项目（如Envoy）支持使用gRPC作为通信协议。另外，对于大多数度量和监控工具，也对gRPC提供了支持，比如Prometheus来监控gRPC应用程序</p>
<ul>
<li>已经成熟并被广泛使用</li>
</ul>
<p>很多大型IT和互联网公司都对广泛使用gRPC，对其进行了大量的测试。</p>
<h2 id="gRPC的劣势"><a href="#gRPC的劣势" class="headerlink" title="gRPC的劣势"></a>gRPC的劣势</h2><ul>
<li>不适合构造面向外部服务的接口</li>
</ul>
<p>大多数外部消费者对gRPC，http，REST等协议很陌生。如果希望应用程序或者服务通过互联网暴露给外部客户端，gRPC的强约束性会限制外部暴露服务的灵活性，同时消费者的控制权也会弱很多</p>
<ul>
<li>频繁的变更或者巨大的变更可能会带来更多的工作量消耗</li>
</ul>
<p>在现代服务间通信场景中，修改一些参数或者模式很正常。如果出现大的服务定义（也就是proto定义）变更，通常需要重新生成对应的客户端代码和服务端代码</p>
<ul>
<li>泛用性来说，生态系统相对更小</li>
</ul>
<p>与传统的RESTful http等协议相比，gRPC的生态系统还明显相对较小，浏览器和移动应用程序对gRPC的支持还处于一个比较初级的阶段</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/17/Advanced-Programming-in-the-UNIX-Environment-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/17/Advanced-Programming-in-the-UNIX-Environment-1/" class="post-title-link" itemprop="url">Advanced Programming in the UNIX Environment 1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-17 21:13:20" itemprop="dateCreated datePublished" datetime="2019-06-17T21:13:20+08:00">2019-06-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-13 18:10:45" itemprop="dateModified" datetime="2022-03-13T18:10:45+08:00">2022-03-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Chapter1-Unix-基础知识"><a href="#Chapter1-Unix-基础知识" class="headerlink" title="Chapter1 Unix 基础知识"></a>Chapter1 Unix 基础知识</h1><ol>
<li>登录名<br>在’’’ /etc/passwd ‘’’ 文件中可以看见登录名</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hallwood:xxxx:1000:1000:hallwood zhang:/home/hallwood:/bin/zsh</span><br></pre></td></tr></table></figure>
<p>他具有这样的格式，用7个冒号作出八个分段，分别是</p>
<table>
<thead>
<tr>
<th>登录名</th>
<th>加密口令</th>
<th>数字用户ID</th>
<th>数字组id</th>
<th>注释字段</th>
<th>起始目录</th>
<th>对应shell程序</th>
</tr>
</thead>
<tbody>
<tr>
<td>hallwood</td>
<td>xxxx</td>
<td>1000</td>
<td>1000</td>
<td>hallwood zhang</td>
<td>/home/hallwood</td>
<td>/bin/zsh</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>shell</li>
</ol>
<p>读取用户输入并且执行相对应指令的解释性脚本处理和解析器</p>
<ol start="3">
<li>文件系统</li>
</ol>
<p>‘/‘ 是根目录的位置，也是他的名字</p>
<p><strong>目录</strong> 是包含 <strong>目录项</strong> 的 <strong>文件</strong></p>
<p><strong>目录项</strong> 包含 <strong>文件名</strong> ，同时包含 <strong>文件属性</strong> 的信息</p>
<p><strong>文件属性</strong>  包含 <strong>文件类型</strong> ， <strong>文件长度</strong>, <strong>文件所有者</strong>, <strong>文件的许可权</strong>, <strong>文件最后的修改时间</strong> 等信息。</p>
<p>不能出现在文件名中的字符只有两个,斜线 (/)和空操作符(null)</p>
<p>当创建一个新目录时,自动创建了两个文件名: . (称为点)和.. (称为点-点)。点引用当前目录,点-点则引用父目录。在最高层次的根目录中,点 -点与点相同。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 程序1_1.c 列出一个目录中的所有文件 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;dirent.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ourhdr.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    DIR *dp;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dirent</span> *<span class="title">dirp</span>;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(argc != <span class="number">2</span>) &#123;</span><br><span class="line">        err_quit(<span class="string">"a single argument (the directory name is required!)"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( (dp = opendir(argv[<span class="number">1</span>])) == <span class="literal">NULL</span> ) &#123;</span><br><span class="line">        err_sys(<span class="string">"can't open %s"</span>, argv[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>( (dirp = readdir(dp)) != <span class="literal">NULL</span> ) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, dirp-&gt;d_name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    closedir(dp);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用下列命令可以看到大多数场景中ls的用法<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man 1 ls</span><br></pre></td></tr></table></figure></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">learning_unix ➤ touch Makefile                                                                            git:master*</span><br><span class="line">learning_unix ➤ cc 1_1.c                                                                                  git:master*</span><br><span class="line">learning_unix ➤ ls                                                                                        git:master*</span><br><span class="line">1_1.c  a.out  errhandler.c  Makefile  ourhdr.h</span><br><span class="line">learning_unix ➤ a.out /dev                                                                                git:master*</span><br><span class="line">zsh: command not found: a.out</span><br><span class="line">learning_unix ➤ ./a.out /dev                                                                              git:master*</span><br><span class="line">.</span><br><span class="line">..</span><br><span class="line">watchdog1</span><br><span class="line">vcsa6</span><br><span class="line">vcsu6</span><br><span class="line">vcs6</span><br><span class="line">vcsa5</span><br><span class="line">vcsu5</span><br><span class="line">vcs5</span><br><span class="line">vcsa4</span><br><span class="line">vcsu4</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 以下省略</span><br></pre></td></tr></table></figure>
<p>以上就是程序1_1的执行结果，相当于实现了一个简单的ls</p>
<ol start="4">
<li>输入和输出</li>
</ol>
<p><strong>文件描述符</strong> 是一个小的 <strong>非负整数</strong>，kernel用这个整数来标记一个 <strong>特定的进程访问的文件</strong>， 当内核打开一个现存的文件或者新建一个文件的时候，就会返回一个文件描述符</p>
<p>每当运行一个新程序的时候，所有的shell就会为其打开三个文件描述符：<strong>标准输入，标准输出，标准出错</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 比如通过重定向标准输出，生成一个log文件</span><br><span class="line">ls /path &gt; file.list</span><br></pre></td></tr></table></figure>
<p>一般的，函数open, read, write, lseek还有close函数都提供了不用缓存的IO功能，这些函数都使用文件描述符工作。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 程序1_2.c 将标准输入复制到标准输出 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ourhdr.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUFFSIZE 8192</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">char</span> buf[BUFFSIZE];</span><br><span class="line">    <span class="keyword">while</span>( (n = read(STDIN_FILENO, buf, BUFFSIZE)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(write(STDOUT_FILENO, buf, n) != n) &#123;</span><br><span class="line">            err_sys(<span class="string">"write err"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        err_sys(<span class="string">"read err"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个程序简单地将标准输入的东西转化到标准输出并且写入到输出流中</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 程序1_3.c 用标准IO将标准输入写到标准输出上 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ourhdr.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">    <span class="keyword">while</span>( (c = getc(<span class="built_in">stdin</span>)) != EOF ) &#123;</span><br><span class="line">        <span class="keyword">if</span>(putc(c, <span class="built_in">stdout</span>) == EOF) &#123;</span><br><span class="line">            err_sys(<span class="string">"write err"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ferror(<span class="built_in">stdin</span>)) &#123;</span><br><span class="line">        err_sys(<span class="string">"read err"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述个函数的实现方式略有差异，一个是使用缓存的方式，一个是逐个字符扫描的方式。</p>
<ol start="5">
<li>程序与进程</li>
</ol>
<p>程序是存放在硬盘中的可执行的文件，使用unix中提供的六个exec接口可以执行，将程序加载入ram或者主存的工作由内核完成</p>
<p>每一个unix进程都有一个唯一的标志，这个被称之为 <strong>process id</strong>，它是一个唯一的非负整数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 程序1_4: 用来打印某个程序的pid */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ourhdr.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, getpid());</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于进程控制，有三个主要用于进程控制的函数，分别是 <strong>fork、exec和waitpid</strong>（exec函数有6种变体，统一称为exec函数）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 程序1_5.c 从标准输入读入命令并且执行 */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ourhdr.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> buf[MAXLINE];</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span> status;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%% "</span>);</span><br><span class="line">    <span class="keyword">while</span>(fgets(buf, MAXLINE, <span class="built_in">stdin</span>) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        buf[<span class="built_in">strlen</span>(buf) - <span class="number">1</span>] = <span class="string">'\0'</span>;</span><br><span class="line">        <span class="keyword">if</span>( (pid = fork()) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            err_sys(<span class="string">"fork err"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(pid == <span class="number">0</span>) &#123;</span><br><span class="line">            execlp(buf, buf, (<span class="keyword">char</span>*) <span class="number">0</span>);</span><br><span class="line">            err_ret(<span class="string">"couldnt exec: %c"</span>, buf);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">127</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>( (pid = waitpid(pid, &amp;status, <span class="number">0</span>)) &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">            err_sys(<span class="string">"waitpid err"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%% "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/23/NLPDemo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/23/NLPDemo/" class="post-title-link" itemprop="url">基于知乎语料库做的一个简单NLP情感倾向分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-23 17:58:38" itemprop="dateCreated datePublished" datetime="2019-04-23T17:58:38+08:00">2019-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-12 00:06:50" itemprop="dateModified" datetime="2022-05-12T00:06:50+08:00">2022-05-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NLP情感分析的一个简单demo"><a href="#NLP情感分析的一个简单demo" class="headerlink" title="NLP情感分析的一个简单demo"></a>NLP情感分析的一个简单demo</h1><ul>
<li><p>by <a href="mailto:&#x68;&#x61;&#x6c;&#108;&#x77;&#111;&#x6f;&#x64;&#x7a;&#104;&#97;&#110;&#x67;&#x40;&#x67;&#x6d;&#97;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;">&#x68;&#x61;&#x6c;&#108;&#x77;&#111;&#x6f;&#x64;&#x7a;&#104;&#97;&#110;&#x67;&#x40;&#x67;&#x6d;&#97;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;</a></p>
</li>
<li><p>在实验开始前，先要保证电脑中具有</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line">numpy</span><br><span class="line">jieba</span><br><span class="line">gensim</span><br><span class="line">matplotlib</span><br><span class="line">scikit-learn</span><br><span class="line"></span><br><span class="line">tensorflow</span><br><span class="line">keras</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">没有这个你也很不舒服对吧，这个必须有</span></span><br><span class="line">jupyter-notebook</span><br></pre></td></tr></table></figure>

<ul>
<li><p>由于我的os是Arch Linux这些package的安装非常方便，不是pacman就是makepkg，如果是其他Linux发行版或者是mac更有甚者使用windows的同学，安装过程可能会复杂一些</p>
</li>
<li><p>这个实验的规模很小，所以并没有使用GPU来进行cuda加速，直接使用老旧的i5-3320M作为运算承担者，也不是很烫手</p>
</li>
<li><p>在实验之前，需要先下载知乎的词料库，这个词料库是由北京师范大学和中国人民大学的 DBIIR 实验室的研究者开源和免费提供的”chinese-word-vectors”，非常感谢这些老师和同学的努力，这里给出他们的github repo地址（自觉star）还有需要的百度云地址：</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/Embedding/Chinese-Word-Vectors">https://github.com/Embedding/Chinese-Word-Vectors</a></p>
<p><a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1OQ6fQLCgqT43WTwh5fh_lg">https://pan.baidu.com/s/1OQ6fQLCgqT43WTwh5fh_lg</a></p>
<p>如果嫌下载速度慢，作为一个程序员，我建议你使用baidu_pcs_go，具体怎么使用自行在github查找，使用时也请自觉star</p>
<ul>
<li><p>如果你不知道什么是word2vec，也没有关系，你只需要知道他是一种词语转化为一维向量的一种压缩表示，并且意义相近或者出现相近频率高的两个词所转化的一维向量之中他们的cos值非常接近 1,距离非常近，就行了，具体的预处理细节（预处理过程也是一次深度学习过程）与本实验无关</p>
</li>
<li><p>我通过一个github用户aespresso，和他发布的youtube教程找到了这个repo，不仅如此，我这一整个实验也是基于这位先生的教程，非常感谢他无私的奉献</p>
</li>
</ul>
<p><strong>这个是他的github repo:</strong><br><a target="_blank" rel="noopener" href="https://github.com/aespresso/chinese_sentiment">https://github.com/aespresso/chinese_sentiment</a></p>
<p><strong>这个是我在youtube找到的教程的地址</strong><br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=-mcrmLmNOXA">https://www.youtube.com/watch?v=-mcrmLmNOXA</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 首先，我们需要先导入特定的需要的模块，并且确定utf-8编码</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> gensim.models <span class="keyword">import</span> KeyedVectors</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 然后, 我们需要使用gensim中的模块导入系统导入知乎的向量库，这个向量库是经过</span></span><br><span class="line"><span class="comment"># 别的dalao训练过的词向量模型，这是一个很帅气的预处理工作，它生成了一个名字-&gt;长度为300的向量的字典</span></span><br><span class="line"></span><br><span class="line">cn_model = KeyedVectors.load_word2vec_format(<span class="string">&quot;./sgns.zhihu.bigram&quot;</span>, binary=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">embedding_dim = cn_model[<span class="string">&quot;东北大学&quot;</span>].shape[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;词向量的长度是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(embedding_dim))</span><br><span class="line"><span class="built_in">print</span>(cn_model[<span class="string">&#x27;东北大学&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>词向量的长度是：300
[-0.173169  0.167039 -0.280759 -0.014771 -0.383082 -0.449514  0.004122
  0.181255 -0.0816    0.166133 -0.422213  0.61386   0.200546 -0.047912
  0.521156 -0.452226  0.205978  0.310417  0.271675  0.188779  0.056854
  0.248341 -0.250261  0.016247 -0.278753 -0.346694 -0.03471   0.03249
  0.215906  0.094957 -0.052379  0.135054 -0.565997  0.116935 -0.033103
  0.063923  0.063995 -0.047387 -0.147508  0.04383  -0.710059 -0.238688
 -0.420966  0.104801  0.036028  0.015015 -0.076793  0.109947 -0.117651
  0.240857  0.046658 -0.506142  0.193275 -0.262593 -0.223561  0.084296
 -0.40914   0.353332  0.036367  0.244455  0.190103  0.45901  -0.095526
 -0.031275  0.179822 -0.009634 -0.119463  0.182669  0.251691  0.163992
 -0.162786 -0.067089 -0.367855 -0.453598 -0.114575 -0.090093  0.22609
  0.084055 -0.008024  0.116842  0.245771 -0.079714 -0.21936   0.158594
 -0.147824 -0.007306  0.038464  0.076449  0.010872  0.339708 -0.387843
  0.070963 -0.162495 -0.055928 -0.014498 -0.3011   -0.006571 -0.170685
  0.249473  0.395145  0.490381  0.439393  0.070372  0.204143 -0.357806
  0.346742  0.114885  0.051335  0.227703 -0.269376 -0.230159  0.628753
  0.454348  0.303936 -0.309634  0.044038 -0.072019  0.121463 -0.387852
  0.11073   0.319537  0.319746  0.129916 -0.45686  -0.065263 -0.327417
 -0.239647 -0.129028  0.28914  -0.228613  0.466321  0.210633  0.37147
  0.12168   0.340034 -0.333509  0.086691  0.077145 -0.094515 -0.043243
 -0.310047  0.200959 -0.092351 -0.342879 -0.478685 -0.066384  0.163397
  0.857368 -0.080743  0.169016  0.09662  -0.123794 -0.117578 -0.26009
  0.795876  0.789666  0.069576 -0.133995 -0.042939  0.082372  0.001277
  0.108221 -0.627131 -0.201711  0.283772 -0.112421 -0.411831  0.246149
  0.450343 -0.018889 -0.217646  0.085195 -0.093665  0.121886  0.041374
 -0.154509 -0.475513  0.414564 -0.632025 -0.001257 -0.143076  0.076735
  0.232488  0.28378   0.060433  0.059984 -0.113402  0.10065  -0.130145
  0.450837 -0.52761   0.039118 -0.237067 -0.19011  -0.013432 -0.288856
 -0.044987 -0.10847  -0.046629  0.035354  0.455324  0.067548  0.214632
 -0.196388  0.765769  0.199199 -0.030234 -0.058608  0.036483 -0.082312
 -0.228086 -0.275695 -0.281059 -0.364453  0.045814  0.43929   0.142706
 -0.021881 -0.05454   0.430346  0.052213  0.437351  0.170989 -0.175498
  0.439948 -0.438312  0.002475  0.370412  0.070516 -0.206736  0.016968
 -0.11588  -0.117777 -0.148206 -0.059988  0.030804 -0.04045   0.324203
  0.234363  0.128853 -0.202953  0.0302    0.244632  0.161924  0.037215
  0.259181 -0.149307 -0.633232  0.096391  0.274292  0.36863  -0.263364
 -0.03885   0.320316  0.166729 -0.079096  0.226739 -0.272492  0.15599
  0.218765  0.136066 -0.428375 -0.19812   0.198432 -0.594367 -0.305591
  0.047796 -0.323848 -0.202678  0.293873  0.328747 -0.647988  0.068186
  0.26757   0.435469  0.22514  -0.006098  0.110309  0.494696 -0.267628
  0.150945  0.015826  0.114192  0.039815  0.067472  0.280086 -0.190843
 -0.274264  0.206202 -0.30322  -0.264427 -0.298466 -0.561606 -0.21909
 -0.05875  -0.137941  0.081865  0.271779  0.574957 -0.519857]
</code></pre>
<p>很显然，这一步我们直接跳过了一个步骤，那就是将中文词汇转化为vector的步骤，完成这个步骤的dalao帮助我们省了很多事情，所以我们有更多的精力用来构造双向LSTM模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我现在尝试了解KeyedVectors.load_word2vec_format(&quot;./sgns.zhihu.bigram&quot;, binary=False)</span></span><br><span class="line"><span class="comment"># 的返回值的（也就是词向量字典封装类）结构，在这里我们给它赋值为cn_model，如上所示</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(cn_model))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(cn_model))</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;__class__&#39;, &#39;__contains__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__getitem__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__setitem__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;_adapt_by_suffix&#39;, &#39;_load_specials&#39;, &#39;_log_evaluate_word_analogies&#39;, &#39;_save_specials&#39;, &#39;_smart_save&#39;, &#39;accuracy&#39;, &#39;add&#39;, &#39;closer_than&#39;, &#39;cosine_similarities&#39;, &#39;distance&#39;, &#39;distances&#39;, &#39;doesnt_match&#39;, &#39;evaluate_word_analogies&#39;, &#39;evaluate_word_pairs&#39;, &#39;get_keras_embedding&#39;, &#39;get_vector&#39;, &#39;index2entity&#39;, &#39;index2word&#39;, &#39;init_sims&#39;, &#39;load&#39;, &#39;load_word2vec_format&#39;, &#39;log_accuracy&#39;, &#39;log_evaluate_word_pairs&#39;, &#39;most_similar&#39;, &#39;most_similar_cosmul&#39;, &#39;most_similar_to_given&#39;, &#39;n_similarity&#39;, &#39;rank&#39;, &#39;relative_cosine_similarity&#39;, &#39;save&#39;, &#39;save_word2vec_format&#39;, &#39;similar_by_vector&#39;, &#39;similar_by_word&#39;, &#39;similarity&#39;, &#39;similarity_matrix&#39;, &#39;syn0&#39;, &#39;syn0norm&#39;, &#39;vector_size&#39;, &#39;vectors&#39;, &#39;vectors_norm&#39;, &#39;vocab&#39;, &#39;wmdistance&#39;, &#39;word_vec&#39;, &#39;words_closer_than&#39;, &#39;wv&#39;]
&lt;class &#39;gensim.models.keyedvectors.Word2VecKeyedVectors&#39;&gt;
</code></pre>
<p>在这里，我们使用了dir函数，它炸出了一大堆东西，但是我菜啊，我看不懂，怎么办</p>
<p>只能根据这些输出的函数名字去分别了解相对应的功能，使用google，事半功倍</p>
<p><strong>我们可以很容易地找到，gensim的doc网址</strong><br><a target="_blank" rel="noopener" href="https://radimrehurek.com/gensim/apiref.html">https://radimrehurek.com/gensim/apiref.html</a></p>
<p>这样我们就可以知道KeyedVectors.load_word2vec_format这个载入函数的返回值的类型了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &#x27;gensim.models.keyedvectors.Word2VecKeyedVectors&#x27;&gt;</span><br></pre></td></tr></table></figure>

<p>哇，这个是什么类？我们可以用这个类做什么？这个直接在官方的文档网站就可以找到</p>
<ul>
<li>Mapping between words and vectors for the Word2Vec model. Used to perform operations on the vectors such as vector lookup, distance, similarity etc.</li>
</ul>
<p>这样，这个类的对象是一个字典类似对象，但是给出了很多方便的接口，比如计算两个词之间的相似度，距离等等非常方便的接口<br>我们接下来马上试试</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 找出最相近的词，我们比较贪心，要找出前100个相似的，这里用的向量余弦相似度，属于高中数学内容</span></span><br><span class="line">cn_model.most_similar(positive=[<span class="string">&#x27;大学&#x27;</span>], topn=<span class="number">100</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[(&#39;高中&#39;, 0.7247821688652039),
 (&#39;本科&#39;, 0.6768536567687988),
 (&#39;研究生&#39;, 0.6244412660598755),
 (&#39;中学&#39;, 0.6088206768035889),
 (&#39;大学本科&#39;, 0.595908522605896),
 (&#39;初中&#39;, 0.5883588790893555),
 (&#39;读研&#39;, 0.5778335928916931),
 (&#39;职高&#39;, 0.5767994523048401),
 (&#39;大学毕业&#39;, 0.5767452120780945),
 (&#39;师范大学&#39;, 0.5708829164505005),
 (&#39;职中&#39;, 0.5695523023605347),
 (&#39;医科&#39;, 0.5680999159812927),
 (&#39;医学院&#39;, 0.5679919123649597),
 (&#39;小学&#39;, 0.5646480321884155),
 (&#39;中专&#39;, 0.5628771185874939),
 (&#39;预科&#39;, 0.5617093443870544),
 (&#39;高中后&#39;, 0.561117947101593),
 (&#39;专科学校&#39;, 0.5603978037834167),
 (&#39;医学院校&#39;, 0.5599128603935242),
 (&#39;高中上&#39;, 0.5595210194587708),
 (&#39;高中和&#39;, 0.5583246350288391),
 (&#39;高中没&#39;, 0.5544076561927795),
 (&#39;高中都&#39;, 0.5528644919395447),
 (&#39;军校&#39;, 0.5500032305717468),
 (&#39;技校&#39;, 0.548747718334198),
 (&#39;庆应&#39;, 0.5458650588989258),
 (&#39;念书&#39;, 0.5458193421363831),
 (&#39;高校&#39;, 0.5448956489562988),
 (&#39;那所&#39;, 0.5438604950904846),
 (&#39;野鸡大学&#39;, 0.542473554611206),
 (&#39;法学院&#39;, 0.5421650409698486),
 (&#39;职校&#39;, 0.5418159365653992),
 (&#39;硕士&#39;, 0.5406658053398132),
 (&#39;高中再&#39;, 0.5402267575263977),
 (&#39;私立高中&#39;, 0.5399061441421509),
 (&#39;高中我&#39;, 0.5386292934417725),
 (&#39;国际部&#39;, 0.5384584665298462),
 (&#39;大专&#39;, 0.5383963584899902),
 (&#39;普高&#39;, 0.5363925695419312),
 (&#39;高中里&#39;, 0.5352319478988647),
 (&#39;重点高中&#39;, 0.5320777893066406),
 (&#39;武汉一&#39;, 0.5320106148719788),
 (&#39;普通本科&#39;, 0.5314226150512695),
 (&#39;私立中学&#39;, 0.5313701629638672),
 (&#39;名牌大学&#39;, 0.5307841897010803),
 (&#39;卫校&#39;, 0.530119001865387),
 (&#39;高中到&#39;, 0.5297942161560059),
 (&#39;985&#39;, 0.5292823910713196),
 (&#39;师范院校&#39;, 0.5284144282341003),
 (&#39;艺校&#39;, 0.5281397104263306),
 (&#39;师范类&#39;, 0.5281273126602173),
 (&#39;普通高中&#39;, 0.5267952084541321),
 (&#39;师范&#39;, 0.5257189869880676),
 (&#39;警校&#39;, 0.5256354212760925),
 (&#39;师范学校&#39;, 0.5255476832389832),
 (&#39;学校&#39;, 0.5252041220664978),
 (&#39;高三没&#39;, 0.5238454937934875),
 (&#39;大连理工&#39;, 0.5235210061073303),
 (&#39;院校&#39;, 0.5231703519821167),
 (&#39;艺术院校&#39;, 0.5229425430297852),
 (&#39;军医大&#39;, 0.5211274027824402),
 (&#39;外国语大学&#39;, 0.5209094285964966),
 (&#39;英语系&#39;, 0.5208790302276611),
 (&#39;社区大学&#39;, 0.5202288627624512),
 (&#39;高中又&#39;, 0.5201476812362671),
 (&#39;五年制&#39;, 0.5199419856071472),
 (&#39;省级重点&#39;, 0.5197730660438538),
 (&#39;军医大学&#39;, 0.519767165184021),
 (&#39;金融系&#39;, 0.5196066498756409),
 (&#39;师范学院&#39;, 0.5194557309150696),
 (&#39;职业学院&#39;, 0.518003523349762),
 (&#39;公立大学&#39;, 0.5172786712646484),
 (&#39;普通高校&#39;, 0.5172494053840637),
 (&#39;外国语学院&#39;, 0.5171521902084351),
 (&#39;财经学校&#39;, 0.5170426964759827),
 (&#39;高中考&#39;, 0.5167708396911621),
 (&#39;高中在&#39;, 0.5163607001304626),
 (&#39;211&#39;, 0.5148729085922241),
 (&#39;名校&#39;, 0.5147680044174194),
 (&#39;北大医学部&#39;, 0.5146102905273438),
 (&#39;师专&#39;, 0.5141969919204712),
 (&#39;寄宿制&#39;, 0.5140889883041382),
 (&#39;武汉某&#39;, 0.5136144757270813),
 (&#39;某大学&#39;, 0.5126028060913086),
 (&#39;川大&#39;, 0.5104366540908813),
 (&#39;日语系&#39;, 0.5104085206985474),
 (&#39;毛中&#39;, 0.510360836982727),
 (&#39;初高中&#39;, 0.5103123784065247),
 (&#39;成人高考&#39;, 0.510170578956604),
 (&#39;高三后&#39;, 0.5100051760673523),
 (&#39;九八五&#39;, 0.5088520646095276),
 (&#39;法律系&#39;, 0.5087538957595825),
 (&#39;美国大学&#39;, 0.5084203481674194),
 (&#39;工科大学&#39;, 0.5082870721817017),
 (&#39;数学系&#39;, 0.5082342624664307),
 (&#39;艺术学校&#39;, 0.5080037117004395),
 (&#39;考上&#39;, 0.50799161195755),
 (&#39;继续教育&#39;, 0.5068403482437134),
 (&#39;高中当&#39;, 0.5067394971847534),
 (&#39;南外&#39;, 0.5065196752548218)]
</code></pre>
<p>可以很容易的看出，后面的相似度是用一个很长的浮点数来表示的，这表示越接近1,两个词之间越相似，可以说这个预训练的词向量集合还是比较靠谱的，基本上不会出现相似度非常高，但是风马牛不相及的词</p>
<p>我们可以使用自己的词语来测试一下，这个model中能不能挑出一组词中的“异类”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test_words = <span class="string">&quot;老师 会计 程序员 律师 医生 老人&quot;</span></span><br><span class="line">diff_word = cn_model.doesnt_match(test_words.split())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;在 &#x27;</span> + test_words + <span class="string">&#x27; 中:\n不是同一类别的词为: %s&#x27;</span> % diff_word)</span><br></pre></td></tr></table></figure>

<pre><code>在 老师 会计 程序员 律师 医生 老人 中:
不是同一类别的词为: 老人
</code></pre>
<p>我们可以很容易的看到，这个模型的很容易的从一堆职业表示词中挑选出了一个表示某一个年龄的人群的词</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cn_model.most_similar(positive=[<span class="string">&#x27;女人&#x27;</span>,<span class="string">&#x27;出轨&#x27;</span>], negative=[<span class="string">&#x27;男人&#x27;</span>], topn=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[(&#39;劈腿&#39;, 0.5849197506904602),
 (&#39;婚外情&#39;, 0.5557920336723328),
 (&#39;偷情&#39;, 0.5555664896965027),
 (&#39;外遇&#39;, 0.545864462852478),
 (&#39;再婚&#39;, 0.5422407388687134),
 (&#39;未婚先孕&#39;, 0.5357396006584167),
 (&#39;隐婚&#39;, 0.5257365107536316),
 (&#39;离婚&#39;, 0.5245394110679626),
 (&#39;马蓉&#39;, 0.5239366292953491),
 (&#39;通奸&#39;, 0.522205650806427)]
</code></pre>
<p>在这里，我们要从词料库中挑选出最接近“女人”，“出轨”这两个词的词，但是这些词我们希望和“男人”这个词关系尽量远，就这样筛选出了上述十个词</p>
<p>居然出现了“马蓉”小姐，这个也太真实了吧，我哭了<br>那要是我们换一种玩法，使用“男人”，“出轨”，作为正向的引导，反之要求和“女人”这个词距离远一点结果会怎么样呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cn_model.most_similar(positive=[<span class="string">&#x27;男人&#x27;</span>,<span class="string">&#x27;出轨&#x27;</span>], negative=[<span class="string">&#x27;女人&#x27;</span>], topn=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[(&#39;劈腿&#39;, 0.6062113046646118),
 (&#39;外遇&#39;, 0.558462381362915),
 (&#39;婚外情&#39;, 0.5538169741630554),
 (&#39;马蓉&#39;, 0.5418684482574463),
 (&#39;隐婚&#39;, 0.5396678447723389),
 (&#39;嫖娼&#39;, 0.5364097952842712),
 (&#39;移情别恋&#39;, 0.5359160900115967),
 (&#39;偷情&#39;, 0.5289183259010315),
 (&#39;骗婚&#39;, 0.5087193846702576),
 (&#39;好男人&#39;, 0.5070855617523193)]
</code></pre>
<p>居然出现了“好男人”这个词，笑死我了（马某人又是你，这说明在知乎，马某人和出轨这种话题共同出现的频率非常高</p>
<p>值得注意的是，这里的所有列出来的值都很接近百分之50,说明预处理词向量的model并不是很确定它的决定是否准确，所以我们观察到这两次的“出轨”相关的输出相差不是很大，事实上，就算是人类自己来做这种分类，也很难说“劈腿”到底是更像“女人”，还是更像“男人”，但是“未婚先孕”一定是更像“女人”的，这点也在上面的两次输出中体现出来了</p>
<p>这个确实很好玩，有兴趣的可以想想有什么新的玩法</p>
<p><strong>通过现有的经过预处理的model来猜测一些评价的倾向</strong></p>
<p>因为我比较菜，所以这里做的工作仅限于区分正面评价和负面评价，并且给定一个概率值来表示生成的model对于这个结果的确信程度</p>
<p>在这里，我找到了网上的一些资料作为训练集，用来训练我们自己的微型人工智障</p>
<p>并且用生成的model去猜测一些评价的积极性，在这里我使用LSTM模型，并且使用双向的模型</p>
<p>那么问题来了，我去那里找评价？爬虫爬？这个工程量有点大，我时间比较有限，所以这里使用哈工大谭松波老师的数据集</p>
<p>这个数据集很难找，<strong>所以我通过一个github用户aespresso，和他发布的youtube教程找到了这个repo，不仅如此，我这一整个实验也是基于这位先生的教程，非常感谢他无私的奉献</strong></p>
<p><strong>这个是他的github repo:</strong><br><a target="_blank" rel="noopener" href="https://github.com/aespresso/chinese_sentiment">https://github.com/aespresso/chinese_sentiment</a></p>
<p>直接给star！有什么好说的？</p>
<p><strong>这个是我在youtube找到的教程的地址</strong><br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=-mcrmLmNOXA">https://www.youtube.com/watch?v=-mcrmLmNOXA</a></p>
<p>我在这个repo中找到了现成的已经经过分类的好评和差评的集合，现在我们把它导入进来，并且作为我们的训练集还有测试集，这时候我们距离我们的第一个人工智障又进了一步</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 现在，我们需要导入评价集</span></span><br><span class="line"><span class="comment"># 这个path由你自己定义，我在这里直接clone了aespresso的repo所以path是</span></span><br><span class="line"><span class="comment"># ./chinese_sentiment/pos和./chinese_sentiment/neg</span></span><br><span class="line"><span class="comment"># 记得unzip 语料.zip</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">positive_dir = os.listdir(<span class="string">&quot;./chinese_sentiment/pos&quot;</span>)</span><br><span class="line">negative_dir = os.listdir(<span class="string">&quot;./chinese_sentiment/neg&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(positive_dir))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(positive_dir))</span><br><span class="line"><span class="comment"># print(positive_dir)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;样本总共: &#x27;</span>+ <span class="built_in">str</span>(<span class="built_in">len</span>(negative_dir) + <span class="built_in">len</span>(positive_dir)))</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;list&#39;&gt;
2000
样本总共: 4000
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 接下来我们会一步步把所有的评论都放在一个list内，并且打乱他们，尝试分出</span></span><br><span class="line"><span class="comment"># 用来训练的和测试的部分集合</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function </span><br><span class="line"></span><br><span class="line">origin_train_txts = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这么频繁的文件IO操作可能会有点慢，而且有点卡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(positive_dir)):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;./chinese_sentiment/pos/&quot;</span> + positive_dir[i], <span class="string">&quot;r&quot;</span>, errors=<span class="string">&quot;ignore&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        text = f.read().strip()</span><br><span class="line">        origin_train_txts.append(text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(negative_dir)):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;./chinese_sentiment/neg/&quot;</span> + negative_dir[i], <span class="string">&quot;r&quot;</span>, errors=<span class="string">&quot;ignore&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        text = f.read().strip()</span><br><span class="line">        origin_train_txts.append(text)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(origin_train_txts))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(origin_train_txts))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 怎么回事，居然有乱码。。。。真是奇葩</span></span><br><span class="line"><span class="comment"># 这里有点坑爹，原来的文件是gb 2312编码</span></span><br><span class="line"><span class="comment"># 都9102年了，90后都要奔三了，utf-8居然还没有普及，惊了</span></span><br><span class="line"><span class="built_in">print</span>(origin_train_txts[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;list&#39;&gt;
4000
单人间的价格物超所值.早餐不错.服务也好,很人性化.呵呵,第一次碰到卫生间马桶里撒花瓣的宾馆.不过酒店的洗浴中心,美容美发都在装修中不能使用.预定时没有提到.
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用核武器tensorflow和傻瓜式接口keras</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.layers <span class="keyword">import</span> Dense, GRU, Embedding, LSTM, Bidirectional</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.preprocessing.text <span class="keyword">import</span> Tokenizer</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.preprocessing.sequence <span class="keyword">import</span> pad_sequences</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.optimizers <span class="keyword">import</span> RMSprop</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.optimizers <span class="keyword">import</span> Adam</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.callbacks <span class="keyword">import</span> EarlyStopping, ModelCheckpoint, TensorBoard, ReduceLROnPlateau</span><br></pre></td></tr></table></figure>

<p><strong>分词和tokenize</strong></p>
<p>首先我们去掉每个样本的标点符号，然后用jieba这个库分词，jieba分词返回一个生成器，没法直接进行tokenize，所以我们将分词结果转换成一个list，并将它索引化，这样每一例评价的文本变成一段索引数字，对应着预训练词向量模型中的词。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进行分词和tokenize</span></span><br><span class="line"><span class="comment"># train_tokens是一个长长的list，其中含有4000个小list，对应每一条评价</span></span><br><span class="line"></span><br><span class="line">train_tokens = []</span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> origin_train_txts:</span><br><span class="line">    <span class="comment"># 去掉标点</span></span><br><span class="line">    text = re.sub(<span class="string">&quot;[\s+\.\!\/_,$%^*(+\&quot;\&#x27;]+|[+——！，。？、~@#￥%……&amp;*（）]+&quot;</span>, <span class="string">&quot;&quot;</span>, text)</span><br><span class="line">    <span class="comment"># 结巴分词</span></span><br><span class="line">    cut = jieba.cut(text)</span><br><span class="line">    cut_list = [ i <span class="keyword">for</span> i <span class="keyword">in</span> cut ]</span><br><span class="line">    <span class="keyword">for</span> i, word <span class="keyword">in</span> <span class="built_in">enumerate</span>(cut_list):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 将词转换为索引index</span></span><br><span class="line">            cut_list[i] = cn_model.vocab[word].index</span><br><span class="line">        <span class="keyword">except</span> KeyError:</span><br><span class="line">            <span class="comment"># 如果词不在字典中，则输出0</span></span><br><span class="line">            cut_list[i] = <span class="number">0</span></span><br><span class="line">    train_tokens.append(cut_list)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(train_tokens))</span><br><span class="line"><span class="built_in">print</span>(train_tokens[<span class="number">0</span>:<span class="number">10</span>])</span><br></pre></td></tr></table></figure>

<pre><code>Building prefix dict from the default dictionary ...
Dumping model to file cache /tmp/jieba.cache
Loading model cost 1.198 seconds.
Prefix dict has been built succesfully.


4000
[[0, 1, 651, 66551, 4656, 562, 1191, 1562, 34, 13758, 2012, 0, 2020, 6296, 6729, 63, 3649, 15627, 1, 7224, 223, 1845, 1, 38926, 1486, 107489, 11, 15, 3783, 60, 124, 308, 10395, 100, 29, 872], [7224, 15, 95, 5976, 24, 31233, 173, 67, 2380, 497, 9074, 5139, 87, 7224, 5249, 103, 1113, 1, 869, 1487, 2871, 333, 470, 95, 67, 879, 83986, 1321, 57, 0, 0, 1, 110, 578, 562, 38, 15, 95, 9081, 457, 2567, 10199, 11216, 0, 148, 148, 2360, 2360, 7215, 158, 893, 1426, 38, 1353, 7224, 2289, 9265, 388, 0, 38, 35, 48, 44101, 33287, 810, 115835, 95, 9081, 10984, 1117, 0, 147, 3466, 562, 657, 51, 6781, 1622, 1, 62779, 211, 169, 9852, 1256, 88407, 87], [40, 562, 25, 310, 614, 0, 2852, 38, 72, 3, 66, 1845, 4, 8, 119, 1487, 7261, 1, 10, 56, 183, 14862, 10, 614], [1105, 29184, 34, 562, 949, 18, 34, 72, 38, 15, 46465, 2001, 1175, 366, 48, 46465, 0, 175, 1419, 3365, 34, 7314], [6247, 3, 7, 1487, 659, 3, 0, 7723, 237, 67, 4429, 40, 640, 1038], [2004, 3, 0, 774, 2852, 3930, 40, 2813, 4656, 40, 562, 8241, 1191, 18, 562], [82, 135465, 24, 130, 138, 39, 44289, 9512, 1, 1191, 779, 34, 236, 27, 190, 517, 161, 21119, 48, 7227, 49095, 3819, 11780, 95173, 11780, 384, 123, 9819, 2657, 51127, 35, 16, 15, 27, 659, 64, 1, 7224, 63, 1191, 4, 5044, 1, 8, 0, 627, 55, 6, 34, 1896, 274, 32739, 6582, 65110, 5, 4305, 63441, 9917, 1366, 6, 8, 27180, 312, 15, 62631, 100, 1886, 6, 4225, 6, 3306, 136, 482, 29406, 16, 242, 116, 0, 35, 748, 110892, 6, 233, 116, 12961, 484, 11, 3069, 51, 6, 2733, 41, 84749, 27, 48, 7227, 1, 1138, 39039, 69612, 2922, 209, 598, 27, 509, 1487, 15, 1487, 63, 2042, 3, 11780, 8705, 13, 15, 8633, 100, 130, 6, 61858, 24, 10254, 48234, 1304, 55, 15370, 4305, 51, 6, 9475, 2953, 57714, 9686, 309, 4026, 88, 4305, 18, 760, 48, 6, 2737, 26572, 70, 51, 3, 0, 48234, 6, 1212, 84, 275, 14684, 6, 8, 12451, 63634, 509, 3, 2437, 2852, 38, 8649, 15565, 4305, 1184, 51, 6, 62993, 241490, 4026, 88, 4305, 70, 3306, 8649, 25862, 6, 7820, 84, 1304, 20760, 15370, 4305, 412, 15, 27, 5916, 84, 2878, 1487, 484, 569, 1487, 412, 23083, 1, 366, 40, 9475, 2595, 22, 399, 27, 4819, 1645, 82, 29, 653, 64, 1, 3507, 27, 3332, 1845, 1340, 1, 1536, 11, 2564, 7124, 55, 12, 1044, 34, 7869, 6, 40, 760, 48, 1845, 614, 1, 4656, 1604, 51, 1487, 598, 1, 2730, 5, 95, 19067, 832, 11, 169, 72, 213, 22, 357, 11, 778, 1845, 13675, 1112, 56203, 44, 133, 46, 1, 1536, 1755, 117, 532, 0, 55, 79, 7179, 4910, 11620, 3563, 614, 13758, 1191, 33216, 2643, 7060, 27396, 22, 4, 34, 10, 374, 1, 168, 293, 19888, 1845, 95173, 4652, 127, 10, 34, 1616, 86, 79, 40494, 1, 1191, 1703, 1623, 3, 4910, 27, 4952, 49095, 57, 11641, 7227, 48, 7227, 62554, 338, 57, 11641, 44289, 9512], [949, 5249, 11, 562, 651, 18, 40, 35, 25, 21604, 5915, 3, 33, 1872, 5020, 3, 41, 366], [3930, 246, 40, 562, 3365, 1191, 11, 7347, 1845, 348, 2158, 3, 2732, 7723, 0, 0, 1, 15565, 34, 2495, 2012, 4429, 40, 9483, 88], [1162, 11780, 44289, 9512, 44512, 0, 7869, 1845, 1536, 2643, 21531, 1191, 57, 96, 1, 5593, 6, 11780, 64, 1, 18369, 221, 0, 0, 1845, 81, 107, 1527, 1191, 10, 15, 7, 7723, 829, 9153, 9512, 333, 562, 2694, 6, 57, 30, 11780, 0, 856, 1, 2497, 4, 158579, 2437, 0, 26782, 1191, 124, 15, 135, 228, 18881, 11276, 276, 455, 5166]]
</code></pre>
<p>从上面的结果我们很容易就可以看出来，很多词是无法从知乎的语料库中找到相对应的索引的，除此之外，更加严重的问题是，每一个文本评价(句子)-&gt;index list，这个过程中由于每个句子不同，所以我们很容易看到这些index list的长度是不一样的，这不利于我们接下来深度学习的模型构造</p>
<p>所以我们需要把所有的index list填充成为相同长度的index list并且用无效索引0作为填充值，往前面填充0,或者往尾部填充0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获得所有tokens的长度</span></span><br><span class="line">num_tokens = [ <span class="built_in">len</span>(tokens) <span class="keyword">for</span> tokens <span class="keyword">in</span> train_tokens ]</span><br><span class="line">num_tokens = np.array(num_tokens)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(num_tokens[<span class="number">0</span> : <span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;平均tokens的长度&quot;</span> + <span class="built_in">str</span>(np.mean(num_tokens)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;最长tokens的长度&quot;</span> + <span class="built_in">str</span>(np.<span class="built_in">max</span>(num_tokens)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>[ 36  86  24  22  14  15 317  18  25  62]
平均tokens的长度71.4495
最长tokens的长度1540
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在这里我们需要了解长度分布情况</span></span><br><span class="line"></span><br><span class="line">plt.hist(np.log(num_tokens), bins = <span class="number">100</span>)</span><br><span class="line">plt.xlim((<span class="number">0</span>,<span class="number">10</span>))</span><br><span class="line">plt.ylabel(<span class="string">&#x27;number of tokens&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;length of tokens&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Distribution of tokens length&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="data:image/png;base64,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" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 上述图像接近正态分布</span></span><br><span class="line"><span class="comment"># 根据 3 sigma 定理（正态分布规律），我们使用平均值 +- 2*标准差可以覆盖百分之95以上的case</span></span><br><span class="line"><span class="comment"># 取tokens平均值并加上两个tokens的标准差，</span></span><br><span class="line"><span class="comment"># 假设tokens长度的分布为正态分布，则max_tokens这个值可以涵盖95%左右的样本</span></span><br><span class="line">max_tokens = np.mean(num_tokens) + <span class="number">2</span> * np.std(num_tokens)</span><br><span class="line">max_tokens = <span class="built_in">int</span>(max_tokens)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(max_tokens)</span><br></pre></td></tr></table></figure>

<pre><code>236
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算一下覆盖了多少case</span></span><br><span class="line"><span class="comment"># 取tokens的长度为236时，大约95%的样本被涵盖</span></span><br><span class="line"><span class="comment"># 我们对长度不足的进行padding，超长的进行修剪</span></span><br><span class="line">np.<span class="built_in">sum</span>( num_tokens &lt; max_tokens ) / <span class="built_in">len</span>(num_tokens)</span><br></pre></td></tr></table></figure>




<pre><code>0.9565
</code></pre>
<p>在这之后，我们会需要debug，但是呢，现在的sample都是index list形式的，所以不是很好直观地反映样本情况，我们需要构造一个函数来反过来通过index在cn_model中求vocab</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">detokenize</span>(<span class="params">tokens</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    translate tokens to text</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    text = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> tokens:</span><br><span class="line">        <span class="keyword">if</span> i != <span class="number">0</span>:</span><br><span class="line">            text = text + cn_model.index2word[i]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            text = text + <span class="string">&#x27; &#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> text</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text = detokenize(train_tokens[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure>

<pre><code> 的价格物超所值早餐不错服务也好很人性化呵呵 碰到卫生间马桶里撒花瓣的宾馆不过酒店的洗浴中心美容美发都在装修中不能使用预定时没有提到
</code></pre>
<p>由此可见，”单人间”这个词语丢失了, 标点符号也被舍弃了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原始文本</span></span><br><span class="line"><span class="built_in">print</span>(origin_train_txts[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<pre><code>单人间的价格物超所值.早餐不错.服务也好,很人性化.呵呵,第一次碰到卫生间马桶里撒花瓣的宾馆.不过酒店的洗浴中心,美容美发都在装修中不能使用.预定时没有提到.
</code></pre>
<p><strong>准备Embedding Matrix</strong><br>现在我们来为模型准备embedding matrix（词向量矩阵），根据keras的要求，我们需要准备一个维度为$(numwords, embeddingdim)$的矩阵，num words代表我们使用的词汇的数量，emdedding dimension在我们现在使用的预训练词向量模型中是300，每一个词汇都用一个长度为300的向量表示。<br>注意我们只选择使用前50k个使用频率最高的词，在这个预训练词向量模型中，一共有260万词汇量，如果全部使用在分类问题上会很浪费计算资源，因为我们的训练样本很小，一共只有4k，如果我们有100k，200k甚至更多的训练样本时，在分类问题上可以考虑减少使用的词汇量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(embedding_dim)</span><br><span class="line"></span><br><span class="line">num_words = <span class="number">50000</span></span><br><span class="line"><span class="comment"># 初始化embedding_matrix，之后在keras上进行应用</span></span><br><span class="line">embedding_matrix = np.zeros((num_words, embedding_dim))</span><br><span class="line"><span class="comment"># embedding_matrix为一个 [num_words，embedding_dim] 的矩阵</span></span><br><span class="line"><span class="comment"># 维度为 50000 * 300</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_words):</span><br><span class="line">    embedding_matrix[i,:] = cn_model[cn_model.index2word[i]]</span><br><span class="line"></span><br><span class="line">embedding_matrix = embedding_matrix.astype(<span class="string">&#x27;float32&#x27;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>300
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查index是否对应，</span></span><br><span class="line"><span class="comment"># 输出300意义为长度为300的embedding向量一一对应</span></span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">sum</span>( cn_model[cn_model.index2word[<span class="number">333</span>]] == embedding_matrix[<span class="number">333</span>] ))</span><br><span class="line"></span><br><span class="line"><span class="comment"># embedding_matrix的维度，</span></span><br><span class="line"><span class="comment"># 这个维度为keras的要求，后续会在模型中用到</span></span><br><span class="line"><span class="built_in">print</span>(embedding_matrix.shape)</span><br></pre></td></tr></table></figure>

<pre><code>300
(50000, 300)
</code></pre>
<p>接下来,我们要完成上一步已经提到过步骤,那就是完成tokens(由索引构成的列表)长度的标准化<br>不够长的index list我们往这个list中填充无效索引0, 这里我们选择往列表前缀填充0, 当index list长度太长的时候,我们要对它进行一定的裁剪</p>
<p>由上面的实验结果我们可以知道, 236可以覆盖至少百分之95的sample, 所以我们要使用236作为标准化后的index list长度</p>
<p>这一步也就是所谓的 **padding (填充) 和truncating (修剪) **</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进行padding和truncating， 输入的train_tokens是一个list</span></span><br><span class="line"><span class="comment"># 返回的train_pad是一个numpy array</span></span><br><span class="line">train_pad = pad_sequences(train_tokens, maxlen=max_tokens, padding=<span class="string">&#x27;pre&#x27;</span>, truncating=<span class="string">&#x27;pre&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了提高训练效率,我们只选择词料库中的前50k个高频词作为训练集的参照</span></span><br><span class="line"><span class="comment"># 所以超出五万个词向量的词用0代替</span></span><br><span class="line">train_pad[ train_pad &gt;= num_words ] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 我们随便选择一个经过长度标准化的tokens(index list)看看是一个什么样的结果</span></span><br><span class="line"><span class="built_in">print</span>(train_pad[<span class="number">100</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[    0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0     0
     0     0     0     0     0     0     0     0     0     0     0 11670
    40   640    35  1845  1487   348  2495    67    10   369    53   143
  1487     1 21604   169   710   865     1 14453  1487     5   784    11
   254   117    34   786  1883    30   369  1028]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 准备target向量，前2000样本为1，后2000为0</span></span><br><span class="line"><span class="comment"># 这一步的意思是给之前已经打包进来的tokens打一个标签</span></span><br><span class="line"><span class="comment"># 前2000个是positive评价, 后2000个是negative评价</span></span><br><span class="line"><span class="comment"># 将两个生成的一维list组合起来就可以了</span></span><br><span class="line">train_target = np.concatenate( (np.ones(<span class="number">2000</span>), np.zeros(<span class="number">2000</span>)) )</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(train_target))</span><br><span class="line"><span class="built_in">print</span>(train_target[<span class="number">1997</span>:<span class="number">2003</span>])</span><br></pre></td></tr></table></figure>

<pre><code>4000
[1. 1. 1. 0. 0. 0.]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分割这些原始的集合, 并且划分出训练集和测试集</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"><span class="comment"># 90%用来作为训练集, 10%用来作为测试集</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(train_pad, train_target, test_size=<span class="number">0.1</span>, random_state=<span class="number">12</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们任意取一个sample来确认一下</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(detokenize(X_train[<span class="number">29</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;positive? : %d&quot;</span> % y_train[<span class="number">29</span>])</span><br></pre></td></tr></table></figure>

<pre><code>                                                                                                                                                                                                                      一般情况吧这个价位的能有这样的硬件条件也算不错了适合情人约会不想 的
positive? : 1
</code></pre>
<p>现在我们用keras搭建LSTM模型，模型的第一层是Embedding层，只有当我们把tokens索引转换为词向量矩阵之后，才可以用神经网络对文本进行处理。<br>keras提供了Embedding接口，避免了繁琐的稀疏矩阵操作。<br>在Embedding层我们输入的矩阵为：$$(batchsize, maxtokens)$$<br>输出矩阵为： $$(batchsize, maxtokens, embeddingdim)$$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开始构造model</span></span><br><span class="line"></span><br><span class="line">model = Sequential()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(num_words)</span><br><span class="line"><span class="built_in">print</span>(embedding_dim)</span><br><span class="line"><span class="built_in">print</span>(max_tokens)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型第一层为embedding</span></span><br><span class="line">model.add(Embedding(num_words, embedding_dim, weights=[embedding_matrix], input_length=max_tokens, </span><br><span class="line">                    trainable=<span class="literal">False</span>))</span><br></pre></td></tr></table></figure>

<pre><code>50000
300
236
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model.add(Bidirectional(LSTM(units=<span class="number">32</span>, return_sequences=<span class="literal">True</span>)))</span><br><span class="line">model.add(LSTM(units=<span class="number">16</span>, return_sequences=<span class="literal">False</span>))</span><br></pre></td></tr></table></figure>

<p><strong>构建模型</strong><br>我在这个教程中尝试了几种神经网络结构，因为训练样本比较少，所以我们可以尽情尝试，训练过程等待时间并不长：<br><strong>GRU：</strong>如果使用GRU的话，测试样本可以达到87%的准确率，但我测试自己的文本内容时发现，GRU最后一层激活函数的输出都在0.5左右，说明模型的判断不是很明确，信心比较低，而且经过测试发现模型对于否定句的判断有时会失误，我们期望对于负面样本输出接近0，正面样本接近1而不是都徘徊于0.5之间。<br><strong>BiLSTM：</strong>测试了LSTM和BiLSTM，发现BiLSTM的表现最好，LSTM的表现略好于GRU，这可能是因为BiLSTM对于比较长的句子结构有更好的记忆，有兴趣的朋友可以深入研究一下。<br>Embedding之后第，一层我们用BiLSTM返回sequences，然后第二层16个单元的LSTM不返回sequences，只返回最终结果，最后是一个全链接层，用sigmoid激活函数输出结果。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">model.add(Dense(<span class="number">1</span>, activation=<span class="string">&#x27;sigmoid&#x27;</span>))</span><br><span class="line"><span class="comment"># 我们使用adam以0.001的learning rate进行优化</span></span><br><span class="line">optimizer = Adam(lr=<span class="number">1e-3</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">model.<span class="built_in">compile</span>(loss=<span class="string">&#x27;binary_crossentropy&#x27;</span>,</span><br><span class="line">              optimizer=optimizer,</span><br><span class="line">              metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们来看一下模型的结构，一共90k左右可训练的变量</span></span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>

<pre><code>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
embedding_2 (Embedding)      (None, 236, 300)          15000000  
_________________________________________________________________
bidirectional (Bidirectional (None, 236, 64)           85248     
_________________________________________________________________
lstm_1 (LSTM)                (None, 16)                5184      
_________________________________________________________________
dense (Dense)                (None, 1)                 17        
=================================================================
Total params: 15,090,449
Trainable params: 90,449
Non-trainable params: 15,000,000
_________________________________________________________________
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立一个权重的存储点</span></span><br><span class="line">path_checkpoint = <span class="string">&#x27;sentiment_checkpoint.keras&#x27;</span></span><br><span class="line">checkpoint = ModelCheckpoint(filepath=path_checkpoint, monitor=<span class="string">&#x27;val_loss&#x27;</span>,</span><br><span class="line">                                      verbose=<span class="number">1</span>, save_weights_only=<span class="literal">True</span>,</span><br><span class="line">                                      save_best_only=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 尝试加载已训练模型</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    model.load_weights(path_checkpoint)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>

<pre><code>Unable to open file (unable to open file: name = &#39;sentiment_checkpoint.keras&#39;, errno = 2, error message = &#39;No such file or directory&#39;, flags = 0, o_flags = 0)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义early stoping如果3个epoch内validation loss没有改善则停止训练</span></span><br><span class="line">earlystopping = EarlyStopping(monitor=<span class="string">&#x27;val_loss&#x27;</span>, patience=<span class="number">3</span>, verbose=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自动降低learning rate</span></span><br><span class="line">lr_reduction = ReduceLROnPlateau(monitor=<span class="string">&#x27;val_loss&#x27;</span>,</span><br><span class="line">                                       factor=<span class="number">0.1</span>, min_lr=<span class="number">1e-5</span>, patience=<span class="number">0</span>,</span><br><span class="line">                                       verbose=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义callback函数</span></span><br><span class="line">callbacks = [</span><br><span class="line">    earlystopping, </span><br><span class="line">    checkpoint,</span><br><span class="line">    lr_reduction</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开始训练</span></span><br><span class="line">model.fit(X_train, y_train,</span><br><span class="line">          validation_split=<span class="number">0.1</span>, </span><br><span class="line">          epochs=<span class="number">20</span>,</span><br><span class="line">          batch_size=<span class="number">128</span>,</span><br><span class="line">          callbacks=callbacks)</span><br></pre></td></tr></table></figure>

<pre><code>Train on 3240 samples, validate on 360 samples
WARNING:tensorflow:From /usr/lib/python3.7/site-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.cast instead.
Epoch 1/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.6279 - acc: 0.6637
Epoch 00001: val_loss improved from inf to 0.52382, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 32s 10ms/sample - loss: 0.6268 - acc: 0.6651 - val_loss: 0.5238 - val_acc: 0.7528
Epoch 2/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.4681 - acc: 0.7941
Epoch 00002: val_loss improved from 0.52382 to 0.49189, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 32s 10ms/sample - loss: 0.4685 - acc: 0.7938 - val_loss: 0.4919 - val_acc: 0.7972
Epoch 3/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.4387 - acc: 0.8031
Epoch 00003: val_loss improved from 0.49189 to 0.46409, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 29s 9ms/sample - loss: 0.4392 - acc: 0.8028 - val_loss: 0.4641 - val_acc: 0.7889
Epoch 4/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.3542 - acc: 0.8553
Epoch 00004: val_loss improved from 0.46409 to 0.40490, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 29s 9ms/sample - loss: 0.3524 - acc: 0.8562 - val_loss: 0.4049 - val_acc: 0.8250
Epoch 5/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.3913 - acc: 0.8253
Epoch 00005: val_loss improved from 0.40490 to 0.40423, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 29s 9ms/sample - loss: 0.3910 - acc: 0.8253 - val_loss: 0.4042 - val_acc: 0.8361
Epoch 6/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.3222 - acc: 0.8656
Epoch 00006: val_loss improved from 0.40423 to 0.39816, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 34s 11ms/sample - loss: 0.3246 - acc: 0.8642 - val_loss: 0.3982 - val_acc: 0.8278
Epoch 7/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.3409 - acc: 0.8600
Epoch 00007: val_loss improved from 0.39816 to 0.38914, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 29s 9ms/sample - loss: 0.3402 - acc: 0.8605 - val_loss: 0.3891 - val_acc: 0.8389
Epoch 8/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.2806 - acc: 0.8919
Epoch 00008: val_loss did not improve from 0.38914

Epoch 00008: ReduceLROnPlateau reducing learning rate to 0.00010000000474974513.
3240/3240 [==============================] - 28s 9ms/sample - loss: 0.2825 - acc: 0.8914 - val_loss: 0.3940 - val_acc: 0.8361
Epoch 9/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.2689 - acc: 0.8969
Epoch 00009: val_loss improved from 0.38914 to 0.36922, saving model to sentiment_checkpoint.keras
3240/3240 [==============================] - 28s 9ms/sample - loss: 0.2694 - acc: 0.8960 - val_loss: 0.3692 - val_acc: 0.8528
Epoch 10/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.2483 - acc: 0.9081
Epoch 00010: val_loss did not improve from 0.36922

Epoch 00010: ReduceLROnPlateau reducing learning rate to 1.0000000474974514e-05.
3240/3240 [==============================] - 29s 9ms/sample - loss: 0.2483 - acc: 0.9080 - val_loss: 0.3737 - val_acc: 0.8500
Epoch 11/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.2425 - acc: 0.9075
Epoch 00011: val_loss did not improve from 0.36922

Epoch 00011: ReduceLROnPlateau reducing learning rate to 1e-05.
3240/3240 [==============================] - 28s 9ms/sample - loss: 0.2419 - acc: 0.9080 - val_loss: 0.3747 - val_acc: 0.8472
Epoch 12/20
3200/3240 [============================&gt;.] - ETA: 0s - loss: 0.2415 - acc: 0.9087
Epoch 00012: val_loss did not improve from 0.36922
3240/3240 [==============================] - 29s 9ms/sample - loss: 0.2405 - acc: 0.9090 - val_loss: 0.3730 - val_acc: 0.8500
Epoch 00012: early stopping





&lt;tensorflow.python.keras.callbacks.History at 0x7f8ba949f5c0&gt;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = model.evaluate(X_test, y_test)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Accuracy:&#123;0:.2%&#125;&#x27;</span>.<span class="built_in">format</span>(result[<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>400/400 [==============================] - 2s 6ms/sample - loss: 0.3132 - acc: 0.8825
Accuracy:88.25%
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">predict_sentiment</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="built_in">print</span>(text)</span><br><span class="line">    <span class="comment"># 去标点</span></span><br><span class="line">    text = re.sub(<span class="string">&quot;[\s+\.\!\/_,$%^*(+\&quot;\&#x27;]+|[+——！，。？、~@#￥%……&amp;*（）]+&quot;</span>, <span class="string">&quot;&quot;</span>,text)</span><br><span class="line">    <span class="comment"># 分词</span></span><br><span class="line">    cut = jieba.cut(text)</span><br><span class="line">    cut_list = [ i <span class="keyword">for</span> i <span class="keyword">in</span> cut ]</span><br><span class="line">    <span class="comment"># tokenize</span></span><br><span class="line">    <span class="keyword">for</span> i, word <span class="keyword">in</span> <span class="built_in">enumerate</span>(cut_list):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            cut_list[i] = cn_model.vocab[word].index</span><br><span class="line">            <span class="keyword">if</span> cut_list[i] &gt;= <span class="number">50000</span>:</span><br><span class="line">                cut_list[i] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">except</span> KeyError:</span><br><span class="line">            cut_list[i] = <span class="number">0</span></span><br><span class="line">    <span class="comment"># padding</span></span><br><span class="line">    tokens_pad = pad_sequences([cut_list], maxlen=max_tokens,</span><br><span class="line">                           padding=<span class="string">&#x27;pre&#x27;</span>, truncating=<span class="string">&#x27;pre&#x27;</span>)</span><br><span class="line">    <span class="comment"># 预测</span></span><br><span class="line">    result = model.predict(x=tokens_pad)</span><br><span class="line">    coef = result[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> coef &gt;= <span class="number">0.5</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;是一例正面评价&#x27;</span>,<span class="string">&#x27;output=%.2f&#x27;</span>%coef)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;是一例负面评价&#x27;</span>,<span class="string">&#x27;output=%.2f&#x27;</span>%coef)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">test_list = [</span><br><span class="line">    <span class="string">&#x27;酒店设施不是新的，服务态度很不好&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;酒店卫生条件非常不好&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;床铺非常舒适&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;房间很凉，不给开暖气&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;房间很凉爽，空调冷气很足&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;酒店环境不好，住宿体验很不好&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;房间隔音不到位&#x27;</span> ,</span><br><span class="line">    <span class="string">&#x27;晚上回来发现没有打扫卫生&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;因为过节所以要我临时加钱，比团购的价格贵&#x27;</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> test_list:</span><br><span class="line">    predict_sentiment(text)</span><br></pre></td></tr></table></figure>

<pre><code>酒店设施不是新的，服务态度很不好
是一例负面评价 output=0.07
酒店卫生条件非常不好
是一例负面评价 output=0.06
床铺非常舒适
是一例正面评价 output=0.55
房间很凉，不给开暖气
是一例负面评价 output=0.13
房间很凉爽，空调冷气很足
是一例负面评价 output=0.47
酒店环境不好，住宿体验很不好
是一例负面评价 output=0.04
房间隔音不到位
是一例负面评价 output=0.13
晚上回来发现没有打扫卫生
是一例负面评价 output=0.18
因为过节所以要我临时加钱，比团购的价格贵
是一例负面评价 output=0.09
</code></pre>
<p><strong>错误分类的文本</strong><br>经过查看，发现错误分类的文本的含义大多比较含糊，就算人类也不容易判断极性，如index为101的这个句子，好像没有一点满意的成分，但这例子评价在训练样本中被标记成为了正面评价，而我们的模型做出的负面评价的预测似乎是合理的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">y_actual = np.array(y_test)</span><br><span class="line"></span><br><span class="line">y_pred = model.predict(X_test)</span><br><span class="line">y_pred = y_pred.T[<span class="number">0</span>]</span><br><span class="line">y_pred = [<span class="number">1.0</span> <span class="keyword">if</span> p&gt;= <span class="number">0.5</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">for</span> p <span class="keyword">in</span> y_pred]</span><br><span class="line">y_pred = np.array(y_pred)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 找出错误分类的索引</span></span><br><span class="line">misclassified = np.where( y_pred != y_actual )[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出所有错误分类的索引</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(misclassified))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(X_test))</span><br></pre></td></tr></table></figure>

<pre><code>47
400
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们来找出错误分类的样本看看</span></span><br><span class="line"><span class="built_in">print</span>(misclassified)</span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> misclassified:</span><br><span class="line">    <span class="built_in">print</span>(detokenize(X_test[idx]))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;预测的分类&#x27;</span>, y_pred[idx])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;实际的分类&#x27;</span>, y_actual[idx])</span><br></pre></td></tr></table></figure>

<pre><code>[  1   9  14  20  51  57  70  71  85  88  89  91  94 114 124 137 139 140
 146 170 171 198 199 206 210 229 231 236 242 250 262 270 280 292 323 325
 326 334 335 336 345 357 371 380 387 389 393]
                                                                                                                                                                                                                  只是 近出入 有蚊子  基本上夠一定的水平免费注册网站导航宾馆索引服务说明关于携程 英
预测的分类 0.0
实际的分类 1.0
车上的人仔细辨认结果还是 很多地方好不容易才开到酒店大门口那天正好下小雨门口保安只有 跑来我在酒店门口依然看不到车库入口要求保安带路于是他安排一个管理车库的工人 那工人带我们到车库后一听说我们是入住客人不能向他交停车费他立刻一溜烟不见人影害得我们找电梯 酒店找了半天这种情况也许以前很难体现出来也许平时也不觉得怎样过分但这几件事集中起来就反映了该酒店的管理薄弱的一方面最重要的是我觉得作为一个好评如潮的酒店更不应该了当然事后当晚值班经理的及时道歉和升级房间等等补偿行为也体现了该酒店管理层对客人的重视体现了酒店有错及时改进的诚恳态度而且 还通过携程要向我电话道歉我也确实感到该酒店能有如此态度很难能可贵了本来我不想点评此次事情但后来觉得也不妨通过我的客观褒贬让大家看到该酒店的真实品质也许我下次 考虑入住该酒店只是仍然希望酒店今后多积极发现不足免得以后入住该酒店的客人那么麻烦同时也影响自己的声誉
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                                                            感觉环境服务方面还不够位房间里面的洗浴设施有点发黄需要改善
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                                    服务基本上没有非常失望其酒店的服务和周围的优雅环境很 总而言之非常失望更不用谈性价比了
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                                          房间比较干净卫生间太小转身都费劲地理位置一半 胡同里不容易找到服务一般
预测的分类 0.0
实际的分类 1.0
店主的妹妹向我们介绍推荐景点行程安排之类的因我们不喜欢事前安排喜欢随性游玩在和黎阿姨聊了一会后并没有让其安排而是 在 游玩中了解到他们安排或者推荐游客都能有一定收益的 我们退房    到   因为行李较多所以特意问服务员是否可以在 上岸直接去桂林服务员也不清楚就跑去 阿姨回来后告知可以在 直接去桂林这样我们就背上所有行李  了然而实际上  是从 乘车去  开始乘机动  到 附近中间不下 直接返回 这样就是说我们要背着重重的行李来回跑而当初的本意是在如果回桂林还是必须返回 我们就找地方寄存行李不背着来回跑很是不厚道啊总体评价风景不错躺床上能看到 的 景观房但是不推荐住因为到晚上之后就没什么 可做只能去 城里其实在那里不管什么宾馆只要 肯定能看到山水回来还要找出租车或摩的；房间里边都没有宽带；最好自带洗漱用品；服务员还是很厚道很淳朴的
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                             除了房间门的隔音效果和 不强之外别的都还不错我又 将 卡片插在 了到北京才记起来赶紧打电话过去告诉我服务员收起来了 后再入住时找到了感谢
预测的分类 0.0
实际的分类 1.0
                                                                                                                                 房间 传说的 一个 还是真大除了这个好像没有其他的优点了早上赶火车到的想洗澡空调没有水还是有时无最奇怪的是淋浴竟然是要把那个小开关 按而不是拉这是我发现的 害我还无知的问前台打扫卫生 吸尘器竟然 早餐 早餐什么都没有20块太不值了电梯 顶楼21楼等个电梯要抽几支烟的不过服务员还是不错的不过诸多不快被美丽的景色和服务员的笑脸给抹杀了
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                   的  齐全包括洗浴间小毛巾吹风机等房屋装修新服务态度好如前台 好位于市中心但是 道而喧闹房间隔音效果不好早餐一般补充点评2007年9月4日：房屋价格适中但是 预定没有 该酒店前台价格与 一样
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                                                 酒店的房间很舒服但是打电话询问酒店位置的时候前台说不清楚;餐厅由于要接待团队就不能为 服务而且理直气壮
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                       房间非常小房间设施非常旧因为装修至今已经10年了房间空气非常 打开门 非常大的烟味和 迎面扑来服务还不错虽然帮我从6 到了9楼但是房间空气依然非常差非常差非常差得不能接受
预测的分类 1.0
实际的分类 0.0
                                                                                                                                         我已经入住很多次了我之所以选择它是因为地理位置好但是 比较差而且餐饮价格也不合理并且现在装修噪音很大下次我是不会选择了宾馆反馈2008年1月7日：尊敬的宾客：由于酒店近期装修改造给您带来了 对此我们 根据客人反馈信息 对房价进行了调整还为入住 的客人赠送欢迎水果房内免费宽带上网等增值服务我们将秉承“宾客至上服务第一”的宗旨  
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                    房间 卫生间是很多 房间比较大大床不错我喜欢价格还可以就是 了不舒服服务员水平差不多 前老国营的水平下次 一家住不过据说小姐不错俺没试
预测的分类 1.0
实际的分类 0.0
宽敞干净整洁隔音不错服务很温馨： 小 还有清凉的 和水果点点细节体现着一个 酒店的 再说点小插曲在前台服务生查看了预订情况推荐我升级我谢绝了他们的提议之后说 的是 我说我要大 貌似预订时是无法选择大床还是 的接着便打电话询问有没有豪华大床间听着他们一会儿说有一会儿说没有弄得我一头雾水最后告诉我：现在没有房间因为 酒店的缘故所以给我免费升级这个小插曲虽然让人有点不快但终究本着顾客是上帝的原则去解决问题比较满意以后 选择这里宾馆反馈2008年8月13日：感谢您选择 大酒店入住并对酒店予以认可看您的评论猜想您可能是通过网络直接预订的房间吧通过网络直接 没有对房间 的选项例如大床等 )如果 对房间有  拨打电话预订酒店和携程的预订人员会共同做好记录按您的要求提前准备房间携程 电话：800-820- -820- 手机；酒店 电话： - 再次对您的点评表示感谢祝 一切顺利
预测的分类 0.0
实际的分类 1.0
      这家酒店虽然设施比较老价格比较贵很小的经济 还330但是早餐很不错服务更是不错服务生很 见主动过来帮忙拿东西临走我想把车里的垃圾找垃圾箱扔了正找呢服务生又主动过来问情况然后帮我把垃圾拿走扔掉了过了一个小时酒店打来电话问是不是衣服落他们那儿了可是我们上了高速回不去了于是留了地址请他们寄回来结果 一早衣服就到了所以感觉服务很好还特意打电话回去感谢他们这服务啊跟那个啥交通大厦对比一下啊那个天上地下啊停车没人管然后前台 没收到携程的订单还不跟携程联系非让我自己联系手机给她后她倒聊上了于是我生气出门走人结果就 的停车保安竟然  5块的停车费这个价格高一点房间小一点我也认了强烈建议携程把交通大厦从合作对象中剔除实在有损携程形象我想点评交通大厦来着因为很气愤就没有住所以不让我点评不过我给携程写了意见了也建议大家不要订交通大厦即使携程推荐
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                                                       也就占了个位置还可以到光内部设施和消耗品配备实在是不怎么样而且很贵
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                                     最大的优势是距火车站 坐公交去  等景点十分方便宾馆设施太陈旧电视效果差
预测的分类 1.0
实际的分类 0.0
                                                          酒店硬件和位置都好但服务令人生气12 地震这 我通过携程入住了这酒店 因为办事延误了没有来得及退房下午携程问是否要退?但因已经过了 我们要求 结果被告知 房房价涨40元和50元了说是星期一是特价 取消特价了我说我们连同住了 应该是同一 酒店后来说如果当时通过携程预订住 也是 价的如果退房的话 半天的费还说三星以上宾馆 10服务费总之感觉象是被宰了今后是不会再入住这宾馆了补充点评2008年5月14日：补；由于天下雨我们要向酒店 并出示住房证告知我们是酒店客人谁知被告知先登记再每人押100元缺乏人性化同样的事发生在凤凰 酒店只要出示 登记就可以了
预测的分类 0.0
实际的分类 1.0
人十分失望的 反馈2008年6月20日：感谢您选择入住上海绿地 全套房酒店并给予我们 的建议首先请允许我们为您简单介绍一下我们的酒店概况我们属于一家 连锁酒店集团提供高优质标准的 服务迎合不同种类客户的需求希望给为您及其他客人带来回家的感觉我们的客房最小面积为65平方米最大至100平方米不等 套房均配备简洁齐全的现代化 酒店提供餐饮 酒吧健身等一系列设施此次您所入住的行政套房其面积为75平方米每晚 元的房价 客房其设计风格和建筑布局比例以客厅为主在同区域五星级酒店中具有较高的性价比如客户想追求更加豪华舒适的套房也可选择我们的贵宾套房其 为85平方米其次我们酒店与携程 是合作伙伴关系我们总是以最优惠的价格最好的 提供给携程的客户们以保持长期友好的合作关系相信携程 也秉承同样的宗旨 地将每一家签约酒店推荐给忠实的客户最后再次感谢您的忠实建议希望下次能有机会为您提供更优质的服务谢谢
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                             一切还行就是对通过网络预订的房间为什么就不能灵活一点半天房都是合情合理的啊尤其是换住连锁酒店更应该 
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                    该酒店的确是靠近 --湖畔哦；但酒店的内部环境的确无法 哦走廊气味令人反感房间 不干净卫生间气味令人作呕 空调漏水“”只是前台接待小姐态度非常 客房服务的大嫂就太差了希望携程相关领导有空 一下建议有准备去 南山 的游客要么住 宾馆要么入住南山  景区内哦空气极佳挂三星有当地 的标准哦
预测的分类 1.0
实际的分类 0.0
          7月25 家人到泰山玩通过携程订的华侨大厦的房间说是搞活动花280升级到360的房间但是实际我们也不知道280和360的房间到底是怎样的对华侨大厦的评价和以前很很多网友的评价一样：服务很热情但是设施太陈旧在 上看酒店的反馈说是有 的房间但是 的时候携程的工作人员不知道我们订的房间是否是 的 希望携程以后把工作做仔细一些入住华侨大厦从 前台带房间服务人都态度很好很热情对客人的要求反应很快我因为带了孩子要求  洗漱用品到房间刚放下电话没多久服务员就送来了对一些我们询问的怎么去泰山玩附近有什么好吃的等问题都很耐心的回答房间有欢迎 而且分量不小很实在呵呵但是华侨大厦的设施确实太陈旧了很多地方的墙纸已经脱落房间的浴室比较小而且没有独立的 感觉老人和小孩使用时比较不方便但是良好的服务还是可以弥补这些不足的而且价钱也不贵感觉还可以接受
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                      我5月30日入住6月1日退房但比较离谱的是当我5月31日外出办事时回来竟发现房间已经 当时我极其郁闷酒店也很纳闷幸好房间我没有放任何 还好酒店的应急方案不错并送了 水果致歉最好告诉我说是 员工 这个理由有点勉强
预测的分类 0.0
实际的分类 1.0
                                                                                                                                             该酒店位置  3分钟路程房间宽敞早餐可以甜点很好吃但大堂太小电梯少客人 和写字楼混用很不方便从房间装修看的确是个 但携程上却说是 标准实际上很难达到 水平该酒店最大问题是没有给客人准备免费袋装茶茶杯旁边有一小桶茶叶很容易误认为是免费的谁知结账 了我11块钱服务员的解释是如果要免费袋装茶宾馆可以 提供牵强的很
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                                            房间还比较干净交通方便离外滩 但外面声音太大休息不好
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                              房间大细节不好住过上海  三亚 这个 最差把我 的携程积分都弄丢了呵呵携程 我好 很烦最后还是没用补充点评2008年4月10日：是的空调也不好调节弄了几遍都不合适早餐那个简单简单得过分了
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                                                        价格实惠基本还可以宾馆反馈2008年4月17日：希望下次再入住本酒店
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                                              月之后再次入住一进门大厅里 女工作人员就叫得出我的名字很不一般服务没得说酒店位置也很好位于 中心
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                        房间价格  2元 所有价格还要 服务费房间设施一般   部 免费的机场巴士好像是对客人的赏赐坐了后觉得很不舒服这家酒店我以后是绝对不会去了其他 也都免了
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                          这家酒店位置房间性价比都不错的但不知是不是由于客人多服务自然下降携程的客人好象在这里 受欢迎每次入住要不是订的大 没有要不是房间没有要不是还没有打扫出来而且不能积会员卡的分前台说是上面规定的也没有什么依据补充点评2007年12月9日：这家酒店的服务越来越差 也旧了大不如从前以后不住了
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                            这次入住感到服务人员的工作态度不如以前整体工作热情也不象其他 那么专业因为 的房间满了于是给我升级到行政套房这个本来是不错的安排但是不知道为什么偏偏这个房间里早晚都有 股噪音；而我朋友住在我下面  就被行政 准备早餐的声音吵醒酒店2楼西餐厅服务还是很好的
预测的分类 0.0
实际的分类 1.0
点评2008年8月3日：只能说服务人员的热情是可以打高分的但 很一般房间的设施实在太差房间里居然没有小冰箱提供的不是 是大的 不是很 我是看了诸位的评价后才下定决心订这酒店的但太失望了很怀疑这些高分是怎么 的宾馆反馈2008年8月13日：尊敬的先生：请允许我们这样称呼您因您入住时的姓名与宾客 姓名不一致非常感谢您的留言及对酒店提出的 对于您所指出的关于本酒店的各类硬件问题酒店方已有计划将于年底对客房及相关设施进行装修；同时对于酒店服务方面等出现的问题已引起酒店高层的高度关注酒店 对于此事进行彻底调查并对相关员工做出相应处理同时酒店 对员工进行各方面的培训加强服务意识提高服务品质；希望下次有机会为您提供更优质的服务我们已把您的信息存入 资料下次入住时我们会提供个性化服务最后再次感谢您对本酒店提出的各种建议以便于我们更好的为客人服务提高总体服务品质
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                                                 酒店不好找里面的环境还可以打车不方便
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                    网上介绍的比较好但是实际却是 现象交通非常不便晚上除非包车否则根本没法出行；另外酒店性质为居家酒店服务态度服务质量比较一般周围环境也没有传说中的那么诗意化如果想体验农村生活的话可以 否则可以考虑 街上一带的住宿
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                                                  设施一般大堂服务没有笑容其它方面还可以
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                                            酒店比较偏了虽然是在东方路上周围也没什么餐馆可以吃饭的
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                建议旅游的人住 这个酒店太远了交通不方便客房 但浴室 有异味白天水温 自己去的价格比携程的价格要便宜约150到180就能拿下不过服务态度停不错的
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                               海景花园是我所有住过的５星酒店中服务最好的一家另外他们的 餐厅非常地道并且 如果去青岛  它 补充点评2008年7月29日： ; ; ; ; ; ; ; ; ; ;
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                                              房间不算太小床不错虽然不 但也挺舒服干净最大的问题是上网太贵 抢钱似的为什么香港的酒店都没有免费上网呢
预测的分类 0.0
实际的分类 1.0
                                                                   订了 高级房只有这种 才有 订的时候忘记注明要 的但是要了 早餐后来我的客人到了酒店前台说： 了 大床房我不知道携程是怎么跟 沟通的那天下着大雨客人也不能转其他酒店害我丢尽颜面后来携程的一个工作人员打电话过来除了顶嘴什么事情也不能帮我解决我认为： 了 早餐虽然我忘记了说一定要 的可是携程也应该帮我确认一下估计那天酒店生意好就随便把我的房间 大床房后来携程那个工作人员还说：你有可能带朋友来吃早餐才订 早餐的这很正常我觉得这个服务态度也真是够差的我一直在用 现在已经是白金了但是这样的服务态度我真的觉得很遗憾
预测的分类 0.0
实际的分类 1.0
                                                        酒店地理位置较偏如无 不建议入住酒店在装修 方面并不能体现 的标准其实底子还是很不错的却弄得有些蛮荒的感觉如酒店 前后的草坪都未能很好的利用酒店的服务员很滑稽会用眼光注视客人但却不会问好那么还不如不注视入住时前台 男生还在用扬州话聊电话对客人 房间的装修很单调墙面上都是素色的墙纸大面积的 却无 装饰画单调无比特别是 的21寸电视实在 有些搞笑卫浴设施到都是 的勉强过关至于学 酒店的通透卫浴设计相对 酒店有些不伦不类吧酒店的自助早餐 没有变换菜式被好友不幸 呵呵如果你不是 苛刻的人还是能接受这样的酒店的只是离 实在有些距离哦还有酒店大厅进出的 反应极端的迟钝哈哈
预测的分类 0.0
实际的分类 1.0
                                                                                                                                                                                                             位置比较好卫生条件也还行就是房间太小高级大床房的大床还不如一般酒店的 的床而且床实在是睡的不是很舒服
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                               酒店位置比较偏远按照地址打车去被送到另外一个相同地址的地方希望酒店引起注意房间格调很前卫也许年轻人还可以接受
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                          该酒店确实性价比不是很高距离该酒店500 的衡阳 应该会比这家好很多我也 价格了 208前台 年198携程价
预测的分类 1.0
实际的分类 0.0
                                                                                                                                                                                                            绝对不是五星：晚8 去的2楼 没什么人用餐餐厅环境犹如一般小店餐具也很一般桌上没有餐巾纸没有牙签上菜也慢
预测的分类 0.0
实际的分类 1.0
            由于在南京住的银河 感觉不错所以这次来成都退了 到万达 接机的师傅和行李员都非常的不错但接下来发生的事情让我觉得非常气愤问前台要了 房卡 是开不了门的然后去大堂换了张并出去吃东西可回来发现在前台 房卡还是开不了门在走廊里等了 才由行李员拿了 的房卡进房间发现 没有开然后打电话给房屋中心 也床最 的是我的房间 听见电梯机器的声音吵得睡不着最后打电话给大副换房间半夜 拿着大 在换房间 由此以来 发生在五星级酒店的事情宾馆反馈2008年3月25日：酒店回复：非常感谢您的光临和对我们 品牌的关注我们对您在饭店遇到的不快 也向您对我们饭店服务和设施中提出的不足致以诚挚的感谢我们将加强前台员工的培训和监督使服务质量提升把品牌做得更好并衷心的希望您有机会再来饭店体验我们各方面的提高
预测的分类 1.0
实际的分类 0.0
                                                                             首先是让我满意的酒店接机服务这一点是和大家取得共识的了我是来 办事的去 办事在这里住还是非常方便的没有车服务员会 的帮我 让我比较感动的是 要去办事 却发现衣服挂了口子因为急着出去没时间处理而且本人 手艺也比较差于是 之中找到了服务员回来的时候衣服 了皮鞋也擦亮了一定没耽误事在这里对她们的服务表示小小的感谢补充点评2007年12月20日：看了大家点评小补充 ：鄙视一下 的那位朋友交教育基金才6块前还要报销没的报销还抱怨住高级酒店的人啊这是 话大家不要 实在看不过去了本人支持 
预测的分类 0.0
实际的分类 1.0
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/27/01-pack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/27/01-pack/" class="post-title-link" itemprop="url">01-pack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-27 15:52:32" itemprop="dateCreated datePublished" datetime="2019-01-27T15:52:32+08:00">2019-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-13 18:10:45" itemprop="dateModified" datetime="2022-03-13T18:10:45+08:00">2022-03-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="0-1-背包问题"><a href="#0-1-背包问题" class="headerlink" title="0-1 背包问题"></a>0-1 背包问题</h1><p>0-1背包问题是经典的动态规划问题，它有两种衍生的问题形式，我们称之为完全背包问题和多重背包问题</p>
<h2 id="基本的0-1背包问题："><a href="#基本的0-1背包问题：" class="headerlink" title="基本的0-1背包问题："></a>基本的0-1背包问题：</h2><h3 id="热动分析-jpg"><a href="#热动分析-jpg" class="headerlink" title="热动分析.jpg"></a>热动分析.jpg</h3><blockquote>
<p>给一个capacity为n的背包，能装weight总共不超过n的物品，给定m个物品，每一个物品具有价值value和重量weight,我们希望能装的物品value的总和越大越好，那么应该怎么做呢？</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ciso646&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">int</span> MAX_N = SOME_VAL();</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">int</span> MAX_M = SOME_VAL();</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> weight[MAX_M];</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> value[MAX_M];</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> dp_cache[MAX_M][MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; MAX_M; ++i)</span><br><span class="line">        <span class="built_in">memset</span>(dp_cache[i], <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>)*MAX_N);</span><br><span class="line">    <span class="built_in">memset</span>(weight, <span class="number">0</span>, <span class="keyword">sizeof</span>(weight));</span><br><span class="line">    <span class="built_in">memset</span>(value, <span class="number">0</span>, <span class="keyword">sizeof</span>(value));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取输入</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">get_input</span><span class="params">(<span class="built_in">std</span>::istream&amp; is = <span class="built_in">std</span>::<span class="built_in">cin</span>, <span class="built_in">std</span>::ostream&amp; os = <span class="built_in">std</span>::<span class="built_in">cout</span>)</span> </span>&#123;</span><br><span class="line">    is &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m <span class="keyword">and</span> i &lt;= MAX_M; ++i) &#123;</span><br><span class="line">        is &gt;&gt; weight[i] &gt;&gt; value[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 算法执行</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">proc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m <span class="keyword">and</span> i &lt;= MAX_M; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n <span class="keyword">and</span> j &lt;= MAX_N; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(weight[i] &lt;= j)</span><br><span class="line">                dp_cache[i][j] = <span class="built_in">std</span>::max(dp_cache[i - <span class="number">1</span>][j], dp_cache[i - <span class="number">1</span>][j - weight[i]] + value[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp_cache[m][n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    get_input();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; proc() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上这个代码基本就是解决基本0-1背包问题的算法思路了，我们可以看到，问题解决的关键在于找到一条合理的状态转移方程，所以我们考虑用一个合适的“容器”，用来记录一些中间状态，比如dp_cache[i][j]用来表示：</p>
<blockquote>
<p>考虑前i个物品（1,…,i）中，在容量为j的情况下能够装下的物品的最大价值。为了减少思维负担，我们信任这个最大价值，并且认为他是最优的，那么下一步的问题就是我们要不要在继续装下一个物品</p>
</blockquote>
<p>那么问题就转化成dp_cache[i + 1][j]究竟是容量不够没有装下第 i+1 个物品，还是装下了却得不偿失所以不装，还是装下了确实地能够提高整体容纳物品的价值总和，所以我们会有下面的思考</p>
<blockquote>
<p>dp_cache[i + 1][j] = k</p>
</blockquote>
<ul>
<li><p>当不能装下这个物品（第i + 1个物品），也就是j比第i + 1个物品的的重量要小，那么自然而然不装下第i + 1个物品，k就是dp_cache[i][j]</p>
</li>
<li><p>当能够装下这个物品，那么我们需要考虑要不要装下它，是否值得</p>
<ul>
<li>如果值得，那么k就是dp_cache[i][j - weight[i + 1]] + value[i + 1]，也就是考虑前i个物品，在容量为j - weight[i+1]扣除第i+1个物品的剩余容量的最佳值加上装入的新物品的价值之和</li>
<li>否则，保持不变，也就是k = dp_cache[i][j]比装入这个物品后的情况(dp_cache[i][j - weight[i + 1]] + value[i + 1])要大，那么我们不装入这个新的物品</li>
</ul>
</li>
</ul>
<p>为了方便下面我们使用dp数组代指dp_cache</p>
<p><strong>这里注意一下</strong> </p>
<p>值得注意的是，我们在迭代的过程中，要求dp[i][j]需要考虑的“原材料”，也就是我们所说的迭代前项，是dp[i-1][0,1,2,…,j]与本行的数据都没有关系（指dp[i][0,1,2,3,…,j - 1]），仅仅只用到了上一行的数据，也就是说，将暂存数组从二维优化为一维是可能的</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">xx1</td>
<td style="text-align:left">xx2</td>
<td style="text-align:left">xx3</td>
</tr>
<tr>
<td style="text-align:left">oo1</td>
<td style="text-align:left">oo2</td>
<td style="text-align:left">tag</td>
</tr>
</tbody>
</table>
<p>如上表所示，要求tag，那么xx是需要用到的，oo是用不到的，而要求第二行第二列的值，也只需要第一行第一列，第一行第二列的值作为推导的前项。</p>
<p>假如我们只用一个一维数组dp_cache来暂存价值信息，并且我们还只有第一行的数据</p>
<p>他现在长这样</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">xx1</td>
<td style="text-align:left">xx2</td>
<td style="text-align:left">xx3</td>
</tr>
</tbody>
</table>
<p>现在，我们要求下一行第一个数据oo1，没问题，直接使用这个一维数组的第一个数据递推</p>
<p>他现在长这样</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">oo1</td>
<td style="text-align:left">xx2</td>
<td style="text-align:left">xx3</td>
</tr>
</tbody>
</table>
<p>接下来，我们要求下一个数据oo2，但是问题出现了，求oo2需要xx1还有xx2，但是xx1已经被覆盖了，这样的话我们这个想法就宣告失败了。</p>
<p>那么，如果我们倒着来求dp[i+1][0…j]呢？</p>
<p>我们先求oo3(也就是之前的tag)，oo3需要xx1, xx2, xx3来递推得到，也确实有，所以我们顺利得到oo3</p>
<p>这样，这个表现在长这样</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">xx1</td>
<td style="text-align:left">xx2</td>
<td style="text-align:left">oo3</td>
</tr>
</tbody>
</table>
<p>我们再求oo2，需要xx2和xx1，可以得到</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">xx1</td>
<td style="text-align:left">oo2</td>
<td style="text-align:left">oo3</td>
</tr>
</tbody>
</table>
<p>最后我们需要求oo1,可以由xx1推导得到</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">oo1</td>
<td style="text-align:left">oo2</td>
<td style="text-align:left">oo3</td>
</tr>
</tbody>
</table>
<p>这样，我们前i + 1个物品的dp数组已经求出来了</p>
<p>所以相对应的，我们可以把我们的算法代码优化一下,注意由于dp_cache结构改变init()函数也应当改变</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新初始化函数</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dp_cache[i], <span class="number">0</span>, <span class="keyword">sizeof</span>(dp_cache));</span><br><span class="line">    <span class="built_in">memset</span>(weight, <span class="number">0</span>, <span class="keyword">sizeof</span>(weight));</span><br><span class="line">    <span class="built_in">memset</span>(value, <span class="number">0</span>, <span class="keyword">sizeof</span>(value));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，第二个版本的算法执行函数就出来了</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第二个版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将dp_cache[MAX_M][MAX_N]改为dp_cache[MAX_N]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> dp_cache[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">proc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m <span class="keyword">and</span> i &lt;= MAX_M; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = n; j &gt;= <span class="number">0</span> <span class="keyword">and</span> j &lt;= MAX_N; --j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(j &gt;= weight[i])</span><br><span class="line">                dp_cache[j] = <span class="built_in">std</span>::max(dp_cache[j - weight[i]] + value[i], dp_cache[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp_cache[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果j小于weight[i]那么，显然是没有继续往下遍历的必要了，所以可以继续改为</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 最终版本</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> dp_cache[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">proc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m <span class="keyword">and</span> i &lt;= MAX_M; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = n; j &gt;= weight[i] <span class="keyword">and</span> j &lt;= MAX_N; --j)</span><br><span class="line">            dp_cache[j] = <span class="built_in">std</span>::max(dp_cache[j - weight[i]] + value[i], dp_cache[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp_cache[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上，就是0-1背包问题的解法了，假设物品有m个，背包容量为n,他的空间复杂度是O(n)，时间复杂度是O(n*m);</p>
<p>时间上应该是可以再优化的（比如说最后一次迭代不去求dp[m][0….j-1]，直接返回dp[m][n]也就是dp_cache[n]），但是O(n*m)的时间复杂度还是逃不掉的</p>
<h2 id="完全背包问题"><a href="#完全背包问题" class="headerlink" title="完全背包问题"></a>完全背包问题</h2><h3 id="魔法分析-jpg"><a href="#魔法分析-jpg" class="headerlink" title="魔法分析.jpg"></a>魔法分析.jpg</h3><blockquote>
<p>给一个capacity为n的背包，能装weight总共不超过n的物品，给定m种物品，每一种物品具有价值value和重量weight,我们希望能装的物品value的总和越大越好，那么应该怎么做呢？</p>
</blockquote>
<p><strong>注意这个问题和基本0-1背包问题的区别！！！</strong></p>
<p><strong>注意这个问题和基本0-1背包问题的区别！！！</strong></p>
<p><strong>注意这个问题和基本0-1背包问题的区别！！！</strong></p>
<p><strong>m种物品的数量是不限的！</strong></p>
<p><strong>m种物品的数量是不限的！</strong></p>
<p><strong>m种物品的数量是不限的！</strong></p>
<p>有的小伙伴这个时候就有点懵逼了，那咋办啊，暴力遍历一下啊？</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们假设初始化函数没有问题</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> dp_cache[MAX_M][MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">proc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp_max;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= MAX_M <span class="keyword">and</span> i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= MAX_N <span class="keyword">and</span> j &lt;= n; ++j) &#123;</span><br><span class="line">            tmp_max = dp_cache[i - <span class="number">1</span>][j];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k*weight[i] &lt;= j; ++k) &#123;</span><br><span class="line">                tmp_max = <span class="built_in">std</span>::max(tmp_max, dp_cache[i - <span class="number">1</span>][j - k*weight[i]] + k*value[i])</span><br><span class="line">            &#125;</span><br><span class="line">            dp_cache[i][j] = tmp_max;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp_cache[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种做法简单粗暴够直接，我喜欢，但是它没有利用到同一行的数据</p>
<p>我们记</p>
<blockquote>
<p>k1 = dp[i][j] + value[i]</p>
</blockquote>
<blockquote>
<p>k2 = dp[i - 1][j + weight[i]]</p>
</blockquote>
<p>dp[i][j]代表的是前 i <strong>种</strong>物品在 j 这个容量下的最优值，我们足够地信任他,那么当我们考虑dp[i][j + weight[i]]的值的时候，我们要作出一个判断，是继续装第 i 种物品更加合适还是只考虑前 i - 1 种但是容量增大更合适</p>
<p>也就是说</p>
<blockquote>
<p>记 x = j + weight[i]</p>
</blockquote>
<blockquote>
<p>dp[i][x] = max(dp[i][x - weight[j]] + value[i], dp[i - 1][x])</p>
</blockquote>
<blockquote>
<p>dp[i][x] = max(k1, k2)</p>
</blockquote>
<p>这样的话，我们就可以得到相对不那么暴力的算法了</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第二版</span></span><br><span class="line"><span class="comment">// 我们假设初始化函数没有问题</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> dp_cache[MAX_M][MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">proc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= MAX_M <span class="keyword">and</span> i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= MAX_N <span class="keyword">and</span> j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(j &lt; weight[i])</span><br><span class="line">                dp_cache[i][j] = dp_cache[i - <span class="number">1</span>][j];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp_cache[i][j] = <span class="built_in">std</span>::max(dp_cache[i][j - weight[i]] + value[i], dp_cache[i - <span class="number">1</span>][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>发现了没有，dp[i][j]的递推的“原材料”是dp[i][j-w]还有dp[i-1][j]</strong></p>
<p>我们是否可以效仿之前提到的做法，优化这个算法的空间复杂度，将二维暂存数组转化为一维数组以节省空间呢</p>
<p>当然可以！！</p>
<p>由于之前详细讲过转化成滚动数组的验证方法，这里只是给出较为简略的说明</p>
<p>这是二维数组版本</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">xx1</td>
<td style="text-align:left">xx2</td>
<td style="text-align:left">xx3</td>
</tr>
<tr>
<td style="text-align:left">oo1</td>
<td style="text-align:left">oo2</td>
<td style="text-align:left">oo1</td>
</tr>
</tbody>
</table>
<p>好的，现在假设我们已经得到了前 i - 1 种的结果 xx1 xx2 xx3</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">xx1</td>
<td style="text-align:left">xx2</td>
<td style="text-align:left">xx3</td>
</tr>
</tbody>
</table>
<p>现在我们要求 oo1, oo1需要xx1还有边界的0（希望这个无需说明）作为递推的前项</p>
<p>现在这个表长这样</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">oo1</td>
<td style="text-align:left">xx2</td>
<td style="text-align:left">xx3</td>
</tr>
</tbody>
</table>
<p>现在我们要求 oo2，oo2要求同一行的前置位已经求出和同一列的前置位已经求出，也就是ooX(X &lt; 2)还有xx2的数据作为递推的前项，这里刚好满足，所以我们填下oo2</p>
<p>现在这个表长这样</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">oo1</td>
<td style="text-align:left">oo2</td>
<td style="text-align:left">xx3</td>
</tr>
</tbody>
</table>
<p>现在我们要求 oo3，oo3要求同一行的前置位已经求出和同一列的前置位已经求出，也就是ooX(X &lt; 3)还有xx3的数据作为递推的前项，这里刚好满足，所以我们填下oo3</p>
<p>现在这个表长这样</p>
<table>
<thead>
<tr>
<th style="text-align:left">1</th>
<th style="text-align:left">2</th>
<th style="text-align:left">3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">oo1</td>
<td style="text-align:left">oo2</td>
<td style="text-align:left">oo3</td>
</tr>
</tbody>
</table>
<p>大功告成</p>
<p>我们反过来思考一下，为什么基本的0-1背包问题的递推要避开同一行的数据而不得不倒着遍历？</p>
<p><strong>恰恰是因为要避免重复装入第i个物品</strong></p>
<p>而在完全背包问题中，我们要反其道行之,就是要考虑可能的重复装入情况，这样最终的代码反而是非常简洁的</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 最终版，初始化函数什么的自己去改，这里只展示proc函数</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> dp_cache[MAX_N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">proc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m <span class="keyword">and</span> i &lt;= MAX_M; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n <span class="keyword">and</span> j &lt;= MAX_N; ++j)</span><br><span class="line">            dp_cache[j] = <span class="built_in">std</span>::max(dp_cache[j - weight[i]] + value[i], dp_cache[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp_cache[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码仅供参考</p>
<h2 id="多重背包问题"><a href="#多重背包问题" class="headerlink" title="多重背包问题"></a>多重背包问题</h2><h3 id="不想分析-jpg"><a href="#不想分析-jpg" class="headerlink" title="不想分析.jpg"></a>不想分析.jpg</h3><p>你直接把它转换成基本0-1背包问题不就完事了么，这题摸了</p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>最后祝您，身体健康，再见</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/18/regex-learning0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/01/18/regex-learning0/" class="post-title-link" itemprop="url">regex_learning0</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-01-18 20:01:42" itemprop="dateCreated datePublished" datetime="2019-01-18T20:01:42+08:00">2019-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-13 18:10:45" itemprop="dateModified" datetime="2022-03-13T18:10:45+08:00">2022-03-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="这篇博客就来写一点有关正则表达式的笔记"><a href="#这篇博客就来写一点有关正则表达式的笔记" class="headerlink" title="这篇博客就来写一点有关正则表达式的笔记"></a>这篇博客就来写一点有关正则表达式的笔记</h1><h2 id="为什么突然要写这个"><a href="#为什么突然要写这个" class="headerlink" title="为什么突然要写这个"></a>为什么突然要写这个</h2><p>关于我个人的近况，我最近找到了一家实习公司做分布式爬虫，由于个人不是很熟悉正则表达式相关的东西，在review老代码的时候遇到了一些问题，其中看不懂正则表达式占了很大的一部分</p>
<h2 id="话不多说，进入正题"><a href="#话不多说，进入正题" class="headerlink" title="话不多说，进入正题"></a>话不多说，进入正题</h2><h4 id="什么是正则表达式？"><a href="#什么是正则表达式？" class="headerlink" title="什么是正则表达式？"></a>什么是正则表达式？</h4><p>正则表达式就是用一些特殊的字符组成的特殊的字符串，这个字符串用一些定义过的特殊字符来代表一些模式，我们可以认为他是一种模式串（pattern），他对于于一个字符串集合，这个集合内的的所有字符串有一个公共的可以用模式串匹配的特征，我们称这些字符串是对应于这个模式串（也就是正则表达式）是匹配的</p>
<h4 id="一个正则表达式可以由哪些字符组成？他们的含义是什么"><a href="#一个正则表达式可以由哪些字符组成？他们的含义是什么" class="headerlink" title="一个正则表达式可以由哪些字符组成？他们的含义是什么"></a>一个正则表达式可以由哪些字符组成？他们的含义是什么</h4><h6 id="普通字符"><a href="#普通字符" class="headerlink" title="普通字符"></a>普通字符</h6><p>普通字符就是最简单的字符，这些字符通常是可以“打印的”，</p>
<h6 id="非打印字符"><a href="#非打印字符" class="headerlink" title="非打印字符"></a>非打印字符</h6><p>由于很多字符是不可以打印的，所以我们思考去用上这些字符来作为我们的模式匹配的规则组成部分，由于他们大部分是不可见的，为了表示他们我们很多情况下需要使用转移字符 ‘\’</p>
<table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\cx</td>
<td style="text-align:left">匹配所有与’x’相匹配的ctrl+’x’,\cc代表一个ctrl+c所对应的字符（这个字符是不可打印的），\cM代表一个ctrl+M字符，这个x必须是字母</td>
</tr>
<tr>
<td style="text-align:left">\f</td>
<td style="text-align:left">匹配一个换页符号，这个通常很难用上</td>
</tr>
<tr>
<td style="text-align:left">\n</td>
<td style="text-align:left">匹配一个换行符号</td>
</tr>
<tr>
<td style="text-align:left">\r</td>
<td style="text-align:left">匹配一个回车符号</td>
</tr>
<tr>
<td style="text-align:left">\s</td>
<td style="text-align:left">匹配任何一个任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。</td>
</tr>
<tr>
<td style="text-align:left">\S</td>
<td style="text-align:left">匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。</td>
</tr>
<tr>
<td style="text-align:left">\t</td>
<td style="text-align:left">制表符，等价于 \x09 和 \cI。</td>
</tr>
<tr>
<td style="text-align:left">\w</td>
<td style="text-align:left">垂直制表符号，等价于 \x0b 和 \cK。</td>
</tr>
</tbody>
</table>
<h6 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h6><table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配输入字符串的结尾位置，如果设置了RegExp对象的Multiline属性，则 $ 也匹配 ‘\n’ 或 ‘\r’。要匹配 $ 字符本身，请使用 \$。</td>
</tr>
<tr>
<td style="text-align:left">()</td>
<td style="text-align:left">标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 ( 和 )。</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">可以匹配<strong>0个字符或者多个字符</strong>，如果要使用<em>这个字符本身请使用\</em></td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">可以匹配<strong>1个字符或者多个字符</strong>，如果要使用+这个字符本身请使用+</td>
</tr>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">匹配除了换行符\n之外的所有<strong>单个</strong>字符</td>
</tr>
<tr>
<td style="text-align:left">[</td>
<td style="text-align:left">标记一个中括号表达式的开始。要匹配 [，请使用 [。</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 \?。</td>
</tr>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left">将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n’ 匹配字符 ‘n’。’\n’ 匹配换行符。序列 ‘\‘ 匹配 “\”，而 ‘(‘ 则匹配 “(“。</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 ^ 字符本身，请使用 \^。</td>
</tr>
<tr>
<td style="text-align:left">{</td>
<td style="text-align:left">标记限定符表达式的开始。要匹配 {，请使用 {。</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td>指明两项之间的一个选择。要匹配</td>
<td>，请使用 \</td>
<td>。</td>
</tr>
</tbody>
</table>
<h6 id="限定符"><a href="#限定符" class="headerlink" title="限定符"></a>限定符</h6><table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">匹配前面的子表达式零次或多次。例如，zo<em> 能匹配 “z” 以及 “zoo”。</em> 等价于{0,}。</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 、 “does” 中的 “does” 、 “doxy” 中的 “do” 。? 等价于 {0,1}。</td>
</tr>
<tr>
<td style="text-align:left">{n}</td>
<td style="text-align:left">n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td>
</tr>
<tr>
<td style="text-align:left">{n.}</td>
<td style="text-align:left">n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’。</td>
</tr>
<tr>
<td style="text-align:left">{n.m}</td>
<td style="text-align:left">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，”o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td>
</tr>
</tbody>
</table>
<h6 id="定位符"><a href="#定位符" class="headerlink" title="定位符"></a>定位符</h6><table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">匹配一个单词边界，即字与空格间的位置。</td>
</tr>
<tr>
<td style="text-align:left">\B</td>
<td style="text-align:left">非单词边界匹配。</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/25/tiny_socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hall">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hall">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/25/tiny_socket/" class="post-title-link" itemprop="url">用C++实现一个非常简单的socket即时通信机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-25 09:10:20" itemprop="dateCreated datePublished" datetime="2018-12-25T09:10:20+08:00">2018-12-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-13 18:10:45" itemprop="dateModified" datetime="2022-03-13T18:10:45+08:00">2022-03-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>在这个简单的demo中，我们需要两个主要的部分</p>
<ol>
<li>服务器：能够接受新的客户端连接，并将每个客户端发过来的消息发给所有其他的客户端</li>
<li>客户端：能够连接服务器，并且向服务器发送信息</li>
</ol>
<p>这个是最简单的群聊功能, 以后有空的话考虑加入两个客户端之间的私聊功能, 第一版我不会加入太多的东西,包括但不限于线程池, 多线程编程, 超时重传, 确认收包( 当然还包括GUI )等特性在初版中我都不会涉及, 这一次的理解重点在于Linux epoll和C/S架构的理解</p>
<h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><p>从之前的需求的大致整理,我们可以归纳出以下几条要点</p>
<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><ol>
<li>连接服务器</li>
<li>支持用户输入信息,发送信息给服务器</li>
<li>接受并且显示服务器的信息</li>
<li>退出连接</li>
</ol>
<p>针对上述需求, 客户端实现需要两个进程, 分别支持下面的功能</p>
<p>对于子进程:</p>
<ol>
<li>等待用户输入聊天信息</li>
<li>将信息写入管道( pipe ) 中读取, 并且发送给服务器</li>
</ol>
<p>对于父进程:</p>
<ol>
<li>使用epoll机制接受接受服务器端发过来的信息, 并显示给用户, 使用户看到其他用户的聊天信息</li>
<li>将子进程写道pipe内的信息读取出来并且发送给服务器端</li>
</ol>
<h3 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h3><ol>
<li>支持多个客户端接入，实现聊天室基本功能</li>
<li>启动服务建立监听端口等待客户端连接</li>
<li>使用epoll机制实现并发，增加效率</li>
<li>客户端连接时发送欢迎消息并存储连接记录</li>
<li>客户端发送消息时广播给其他所有客户端</li>
<li>客户端请求退出时对连接信息进行清理</li>
</ol>
<h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><p>模型采用C/S模型</p>
<ul>
<li>服务器端<ol>
<li>socket()创建监听socket</li>
<li>bind()绑定服务器端口</li>
<li>listen()监听客户端连接</li>
<li>accept()接受连接</li>
<li>recv/send接受和发送数据</li>
<li>close()关闭socket</li>
</ol>
</li>
</ul>
<ul>
<li>客户端<ol>
<li>socket()创建监听socket</li>
<li>connect()连接服务器</li>
<li>recv/send接受或者传送信息</li>
<li>close()关闭socket</li>
</ol>
</li>
</ul>
<h3 id="TCP服务端通信的常规步骤"><a href="#TCP服务端通信的常规步骤" class="headerlink" title="TCP服务端通信的常规步骤"></a>TCP服务端通信的常规步骤</h3><ol>
<li>使用socket()创建TCP套接字（socket）</li>
<li>将创建的套接字绑定到一个本地地址和端口上（Bind）</li>
<li>将套接字设为监听模式，准备接收客户端请求（listen）</li>
<li>等待客户请求到来: 当请求到来后，接受连接请求，返回一个对应于此次连接的新的套接字（accept）</li>
<li>用accept返回的套接字和客户端进行通信（使用write()/send()或send()/recv() )</li>
<li>返回，等待另一个客户请求</li>
<li>关闭套接字</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Server.cpp代码（通信模块）：</span></span><br><span class="line"><span class="comment">// 服务端地址 ip地址 + 端口号</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">serverAddr</span>;</span></span><br><span class="line">serverAddr.sin_family = PF_INET;</span><br><span class="line">serverAddr.sin_port = htons(SERVER_PORT);</span><br><span class="line">serverAddr.sin_addr.s_addr = inet_addr(SERVER_HOST);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端创建监听socket</span></span><br><span class="line"><span class="keyword">int</span> listener = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(listener &lt; <span class="number">0</span>) &#123; perror(<span class="string">"listener"</span>); <span class="built_in">exit</span>(<span class="number">-1</span>);&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"listen socket created \n"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将服务端地址与监听socket绑定</span></span><br><span class="line"><span class="keyword">if</span>( bind(listener, (struct sockaddr *)&amp;serverAddr, <span class="keyword">sizeof</span>(serverAddr)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    perror(<span class="string">"bind error"</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开始监听</span></span><br><span class="line"><span class="keyword">int</span> ret = listen(listener, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">if</span>(ret &lt; <span class="number">0</span>) &#123; perror(<span class="string">"listen error"</span>); <span class="built_in">exit</span>(<span class="number">-1</span>);&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Start to listen: %s\n"</span>, SERVER_HOST);</span><br></pre></td></tr></table></figure>
<p>之后会提到accept和epoll的方法</p>
<h2 id="TCP客户端通信的常规步骤"><a href="#TCP客户端通信的常规步骤" class="headerlink" title="TCP客户端通信的常规步骤"></a>TCP客户端通信的常规步骤</h2><ol>
<li>创建套接字（socket）</li>
<li>使用connect()建立到达服务器的连接（connect)</li>
<li>客户端进行通信（使用write()/send()或send()/recv())</li>
<li>使用close()关闭客户连接</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Client.cpp代码（通信模块）：</span></span><br><span class="line"><span class="comment">// 客户要连接的服务端地址（ ip地址 + 端口号）</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">serverAddr</span>;</span></span><br><span class="line">serverAddr.sin_family = PF_INET;</span><br><span class="line">serverAddr.sin_port = htons(SERVER_PORT);</span><br><span class="line">serverAddr.sin_addr.s_addr = inet_addr(SERVER_IP);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建套接字（socket）</span></span><br><span class="line"><span class="keyword">int</span> sock = socket(PF_INET, SOCK_STREAM, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(sock &lt; <span class="number">0</span>) &#123; perror(<span class="string">"sock error"</span>); <span class="built_in">exit</span>(<span class="number">-1</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 向服务器发出连接请求（connect）</span></span><br><span class="line"><span class="keyword">if</span>(connect(sock, (struct sockaddr *)&amp;serverAddr, <span class="keyword">sizeof</span>(serverAddr)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    perror(<span class="string">"connect error"</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>至于客户端如何实现管道之间的通信，以及与服务端之间的通信，在后面会详细介绍。</p>
<h2 id="基本技术"><a href="#基本技术" class="headerlink" title="基本技术"></a>基本技术</h2><h3 id="阻塞和非阻塞socket"><a href="#阻塞和非阻塞socket" class="headerlink" title="阻塞和非阻塞socket"></a>阻塞和非阻塞socket</h3><p>通常的,对一个文件描述符对应的文件或者是设备, 阻塞和非阻塞方式</p>
<ol>
<li>阻塞方式指的是: 当试图对该文件描述符进行读写的时候, 如果当时没有数据可读或者暂时不可写, 那么程序就进入等待状态, 知道有东西/空间可以读/写时, 程序接受到某个信号量被唤醒重新进入就绪队列( 操作系统 )</li>
<li>如果没有资源可写或者没有数据可读, 那么直接返回, 或者等一个特定的时间片再来寻求相应的资源</li>
</ol>
<p>两者的区别就是, 是否等待某一个信号量来重新唤醒。<br>我们这个小demo采用非阻塞的socket<br>这样能够充分利用服务器性能（<del>其实是偷懒比较方便</del>）</p>
<h3 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h3><p>当服务端的在线人数越来越多，会导致系统资源吃紧，I/O效率越来越慢，这时候就应该考虑epoll了。epoll是Linux内核为处理大批句柄而作改进的poll，是Linux特有的I/O函数。其特点如下：</p>
<ol>
<li>epoll是Linux下多路复用IO接口select/poll的增强版本。其实现和使用方式与select/poll有很多不同，epoll通过一组函数来完成有关任务，而不是一个函数</li>
<li>epoll之所以高效，是因为epoll将用户关心的文件描述符放到内核里的一个事件表中，而不是像select/poll每次调用都需要重复传入文件描述符集或事件集。比如当一个事件发生（比如说读事件），epoll无须遍历整个被侦听的描述符集，只要遍历那些被内核IO事件异步唤醒而加入就绪队列的描述符集合就行了。</li>
<li>epoll有两种工作方式，LT(level triggered)：水平触发和ET(edge-triggered)：边沿触发。LT是select/poll使用的触发方式，比较低效；而ET是epoll的高速工作方式，这次demo使用epoll的ET方式。</li>
</ol>
<p>想要了解epoll的可以康康 <a href="https://www.cnblogs.com/lojunren/p/3856290.html" title="这篇博客" target="_blank" rel="noopener">这篇博客</a> ，这篇博客的参考文献也挺有读一读的价值</p>
<p>咳咳，言归正传，我们看看epoll的C/C++接口长啥样子</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个epoll句柄，参数size用来告诉内核需要监听的文件描述符的数目，这个size是有上限的，随着内核的更新可能会不同</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_create</span><span class="params">(<span class="keyword">int</span> size)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 事件注册函数</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">函数功能： epoll事件注册函数</span></span><br><span class="line"><span class="comment">　 参数epfd为epoll的句柄，即epoll_create返回值</span></span><br><span class="line"><span class="comment">　 参数op表示动作，用3个宏来表示：</span></span><br><span class="line"><span class="comment">　　  EPOLL_CTL_ADD(注册新的fd到epfd)， </span></span><br><span class="line"><span class="comment">　EPOLL_CTL_MOD(修改已经注册的fd的监听事件)，</span></span><br><span class="line"><span class="comment">　　  EPOLL_CTL_DEL(从epfd删除一个fd)；</span></span><br><span class="line"><span class="comment">　　  其中参数fd为需要监听的标示符；</span></span><br><span class="line"><span class="comment">　 参数event告诉内核需要监听的事件，event的结构如下：</span></span><br><span class="line"><span class="comment">struct epoll_event &#123;</span></span><br><span class="line"><span class="comment">  __uint32_t events; //Epoll events</span></span><br><span class="line"><span class="comment">  epoll_data_t data; //User data variable</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">其中介绍events是宏的集合，本项目主要使用EPOLLIN(表示对应的文件描述符可以读，即读事件发生)，其他宏类型，可以google之！</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_ctl</span><span class="params">(<span class="keyword">int</span> epfd, <span class="keyword">int</span> op, <span class="keyword">int</span> fd, struct epoll_event *event)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待事件的产生，我猜可能有点类似C#中的async</span></span><br><span class="line"><span class="comment">// 函数返回需要处理的事件数目</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_wait</span><span class="params">(<span class="keyword">int</span> epfd, struct epoll_event * events, <span class="keyword">int</span> maxevents, <span class="keyword">int</span> timeout)</span></span>;</span><br></pre></td></tr></table></figure>
<p>因此服务端使用epoll的时候，步骤如下：</p>
<ol>
<li>调用epoll_create函数在Linux内核中创建一个事件表；</li>
<li>然后将文件描述符（监听套接字listener）添加到所创建的事件表中；</li>
<li>在主循环中，调用epoll_wait等待返回就绪的文件描述符集合；</li>
<li>分别处理就绪的事件集合，本项目中一共有两类事件：新用户连接事件和用户发来消息事件（epoll还有很多其他事件，这里我就不深入了以后有机会再开坑</li>
</ol>
<p>把一个socket添加到事件中</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将文件描述符fd添加到epollfd标示的内核事件表中， 并注册EPOLLIN和EPOOLET事件，EPOLLIN是数据可读事件；EPOOLET表明是ET工作方式。最后将文件描述符设置非阻塞方式</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @param epollfd: epoll句柄</span></span><br><span class="line"><span class="comment">  * @param fd: 文件描述符</span></span><br><span class="line"><span class="comment">  * @param enable_et : enable_et = true, </span></span><br><span class="line"><span class="comment">     采用epoll的ET工 作方式；否则采用LT工作方式</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addfd</span><span class="params">( <span class="keyword">int</span> epollfd, <span class="keyword">int</span> fd, <span class="keyword">bool</span> enable_et )</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">epoll_event</span> <span class="title">ev</span>;</span></span><br><span class="line">    ev.data.fd = fd;</span><br><span class="line">    ev.events = EPOLLIN;</span><br><span class="line">    <span class="keyword">if</span>( enable_et )</span><br><span class="line">        ev.events = EPOLLIN | EPOLLET;</span><br><span class="line">    epoll_ctl(epollfd, EPOLL_CTL_ADD, fd, &amp;ev);</span><br><span class="line">    setnonblocking(fd);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"fd added to epoll!\n\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><p>我们已经进行了一系列的分析，是时候进行一波实现了，又到了我最喜欢的coding环节</p>
<p>先进行一波初始化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化代码文件夹</span></span><br><span class="line">$ mkdir -p /home/hallwood/Code/learning/cpp/tiny_msg_demo</span><br><span class="line">$ <span class="built_in">cd</span> /home/hallwood/Code/learning/cpp/tiny_msg_demo</span><br><span class="line">$ mkdir header cpp</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装cmake</span></span><br><span class="line">$ sudo pacman -S cmake</span><br><span class="line">$ touch CMakeLists.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建对应的文件</span></span><br><span class="line">$ touch Common.h Client.h Client.cpp ClientMain.cpp</span><br><span class="line">$ touch Server.h Server.cpp ServerMain.cpp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动文件到对应的文件夹</span></span><br><span class="line">$ mv *.h ./header</span><br><span class="line">$ mv *.cpp ./cpp</span><br></pre></td></tr></table></figure>
<p>每个文件的作用:</p>
<ol>
<li>Common.h: 公共头文件</li>
<li>Client.h, Client.cpp: 客户端类实现</li>
<li>Server.h, Server.cpp: 服务器端实现</li>
<li>ClientMain.cpp,和ServerMain.cpp: 分别是客户端程序和服务器端程序的执行入口</li>
</ol>
<p>接下来我们开始逐渐实现我们需要的类</p>
<h2 id="Common-h"><a href="#Common-h" class="headerlink" title="Common.h"></a>Common.h</h2><p>这个头文件是Client程序和Server程序共用的， 我们只需要定义一个单独的函数被类成员函数调用即可，这个功能函数的作用就是之前提到的将文件描述符fd添加到epollfd标示的内核事件表中，因此我们把它卸载Common.h中，</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hall</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hall</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
